!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).edit=t()}}(function(){return function o(s,a,u){function c(e,t){if(!a[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return c(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,n){function r(t){if(!(this instanceof r))return new r(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}(e.exports=r).prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},r.prototype.equals=function(t){var e;return e=t instanceof r?t.bbox():t,this._bbox[0]==e[0]&&this._bbox[1]==e[1]&&this._bbox[2]==e[2]&&this._bbox[3]==e[3]},r.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},r.prototype.union=function(t){var e;return this._valid=!0,e=t instanceof r?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3]),this},r.prototype.bbox=function(){return this._valid?this._bbox:null},r.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],n=t[1];return this._bbox[0]<=e&&this._bbox[1]<=n&&this._bbox[2]>=e&&this._bbox[3]>=n},r.prototype.intersect=function(t){return this._valid?(e=t instanceof r?t.bbox():t,!(this._bbox[0]>e[2]||this._bbox[2]<e[0]||this._bbox[3]<e[1]||this._bbox[1]>e[3])):null;var e},r.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},r.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},{}],2:[function(t,e,n){var c=t("wgs84");function i(t){var e=0;if(t&&0<t.length){e+=Math.abs(r(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(r(t[n]))}return e}function r(t){var e,n,r,i,o,s,a=0,u=t.length;if(2<u){for(s=0;s<u;s++)s===u-2?(r=u-2,i=u-1,o=0):s===u-1?(r=u-1,i=0,o=1):(i=(r=s)+1,o=s+2),e=t[r],n=t[i],a+=(l(t[o][0])-l(e[0]))*Math.sin(l(n[1]));a=a*c.RADIUS*c.RADIUS/2}return a}function l(t){return t*Math.PI/180}e.exports.geometry=function t(e){var n,r=0;switch(e.type){case"Polygon":return i(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=i(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},e.exports.ring=r},{wgs84:66}],3:[function(t,e,n){e.exports=function(t){return function n(t){if(Array.isArray(t)&&t.length&&"number"==typeof t[0])return[t];return t.reduce(function(t,e){return Array.isArray(e)&&Array.isArray(e[0])?t.concat(n(e)):(t.push(e),t)},[])}(t)}},{}],4:[function(t,e,n){var r=t("@mapbox/geojson-normalize"),i=t("geojson-flatten"),o=t("./flatten");e.exports=function(t){if(!t)return[];var e=i(r(t)),n=[];return e.features.forEach(function(t){t.geometry&&(n=n.concat(o(t.geometry.coordinates)))}),n}},{"./flatten":3,"@mapbox/geojson-normalize":6,"geojson-flatten":46}],5:[function(t,e,n){var i=t("@mapbox/geojson-coords"),r=t("traverse"),o=t("@mapbox/extent"),s={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},a=Object.keys(s);function u(t){for(var e=o(),n=i(t),r=0;r<n.length;r++)e.include(n[r]);return e}e.exports=function(t){return u(t).bbox()},e.exports.polygon=function(t){return u(t).polygon()},e.exports.bboxify=function(t){return r(t).map(function(e){e&&(a.some(function(t){return!!e[t]&&-1!==s[t].indexOf(e.type)})&&(e.bbox=u(e).bbox(),this.update(e)))})}},{"@mapbox/extent":1,"@mapbox/geojson-coords":4,traverse:62}],6:[function(t,e,n){e.exports=function(t){if(!t||!t.type)return null;var e=r[t.type];if(!e)return null;{if("geometry"===e)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if("feature"===e)return{type:"FeatureCollection",features:[t]};if("featurecollection"===e)return t}};var r={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],7:[function(t,e,n){var o=t("jsonlint-lines"),s=t("./object");e.exports.hint=function(t,e){var n,r=[];if("object"==typeof t)n=t;else{if("string"!=typeof t)return[{message:"Expected string or object as input",line:0}];try{n=o.parse(t)}catch(t){var i=t.message.match(/line (\d+)/);return[{line:parseInt(i[1],10)-1,message:t.message,error:t}]}}return r=r.concat(s.hint(n,e))}},{"./object":8,"jsonlint-lines":49}],8:[function(t,e,n){var y=t("./rhr");e.exports.hint=function(t,n){var o=[],s=0,e=10,a=6;function r(t){if(n&&!1===n.noDuplicateMembers||!t.__duplicateProperties__||o.push({message:"An object contained duplicate members, making parsing ambigous: "+t.__duplicateProperties__.join(", "),line:t.__line__}),!i(t,"type","string"))if(d[t.type])t&&d[t.type](t);else{var e=g[t.type.toLowerCase()];void 0!==e?o.push({message:"Expected "+e+" but got "+t.type+" (case sensitive)",line:t.__line__}):o.push({message:"The type "+t.type+" is unknown",line:t.__line__})}}function u(t,e){return t.every(function(t){return null!==t&&typeof t===e})}function i(t,e,n){if(void 0===t[e])return o.push({message:'"'+e+'" member required',line:t.__line__});if("array"===n){if(!Array.isArray(t[e]))return o.push({message:'"'+e+'" member should be an array, but is an '+typeof t[e]+" instead",line:t.__line__})}else{if("object"===n&&t[e]&&"Object"!==t[e].constructor.name)return o.push({message:'"'+e+'" member should be '+n+", but is an "+t[e].constructor.name+" instead",line:t.__line__});if(n&&typeof t[e]!==n)return o.push({message:'"'+e+'" member should be '+n+", but is an "+typeof t[e]+" instead",line:t.__line__})}}function c(r,i){if(!Array.isArray(r))return o.push({message:"position should be an array, is a "+typeof r+" instead",line:r.__line__||i});if(r.length<2)return o.push({message:"position must have 2 or more elements",line:r.__line__||i});if(3<r.length)return o.push({message:"position should not have more than 3 elements",level:"message",line:r.__line__||i});if(!u(r,"number"))return o.push({message:"each element in a position must be a number",line:r.__line__||i});if(n&&n.precisionWarning){if(s===e)return s+=1,o.push({message:"truncated warnings: we've encountered coordinate precision warning "+e+" times, no more warnings will be reported",level:"message",line:r.__line__||i});s<e&&r.forEach(function(t){var e=0,n=String(t).split(".")[1];if(void 0!==n&&(e=n.length),a<e)return s+=1,o.push({message:"precision of coordinates should be reduced",level:"message",line:r.__line__||i})})}}function l(n,e,r,i){if(void 0===i&&void 0!==n.__line__&&(i=n.__line__),0===r)return c(n,i);if(1===r&&e)if("LinearRing"===e){if(!Array.isArray(n[n.length-1]))return o.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i}),!0;if(n.length<4&&o.push({message:"a LinearRing of coordinates needs to have four or more positions",line:i}),n.length&&(n[n.length-1].length!==n[0].length||!n[n.length-1].every(function(t,e){return n[0][e]===t})))return o.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:i}),!0}else if("Line"===e&&n.length<2)return o.push({message:"a line needs to have two or more coordinates to be valid",line:i});if(Array.isArray(n))return n.map(function(t){return l(t,e,r-1,t.__line__||i)}).some(function(t){return t});o.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i})}function p(t){t.crs&&("object"==typeof t.crs&&t.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===t.crs.properties.name?o.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:t.__line__}):o.push({message:"old-style crs member is not recommended",line:t.__line__}))}function h(t){if(t.bbox)return Array.isArray(t.bbox)?(u(t.bbox,"number")||o.push({message:"each element in a bbox member must be a number",line:t.bbox.__line__}),4!==t.bbox.length&&6!==t.bbox.length&&o.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:t.bbox.__line__}),o.length):void o.push({message:"bbox member must be an array of numbers, but is a "+typeof t.bbox,line:t.__line__})}function f(t){p(t),h(t),void 0!==t.id&&"string"!=typeof t.id&&"number"!=typeof t.id&&o.push({message:'Feature "id" member must have a string or number value',line:t.__line__}),void 0!==t.features&&o.push({message:'Feature object cannot contain a "features" member',line:t.__line__}),void 0!==t.coordinates&&o.push({message:'Feature object cannot contain a "coordinates" member',line:t.__line__}),"Feature"!==t.type&&o.push({message:"GeoJSON features must have a type=feature member",line:t.__line__}),i(t,"properties","object"),i(t,"geometry","object")||t.geometry&&r(t.geometry)}var d={Point:function(t){var e;p(t),h(t),void 0!==(e=t).properties&&o.push({message:'geometry object cannot contain a "properties" member',line:e.__line__}),void 0!==e.geometry&&o.push({message:'geometry object cannot contain a "geometry" member',line:e.__line__}),void 0!==e.features&&o.push({message:'geometry object cannot contain a "features" member',line:e.__line__}),i(t,"coordinates","array")||c(t.coordinates)},Feature:f,MultiPoint:function(t){p(t),h(t),i(t,"coordinates","array")||l(t.coordinates,"",1)},LineString:function(t){p(t),h(t),i(t,"coordinates","array")||l(t.coordinates,"Line",1)},MultiLineString:function(t){p(t),h(t),i(t,"coordinates","array")||l(t.coordinates,"Line",2)},FeatureCollection:function(t){if(p(t),h(t),void 0!==t.properties&&o.push({message:'FeatureCollection object cannot contain a "properties" member',line:t.__line__}),void 0!==t.coordinates&&o.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:t.__line__}),!i(t,"features","array")){if(!u(t.features,"object"))return o.push({message:"Every feature must be an object",line:t.__line__});t.features.forEach(f)}},GeometryCollection:function(e){p(e),h(e),i(e,"geometries","array")||(u(e.geometries,"object")||o.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:e.__line__}),1===e.geometries.length&&o.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:e.geometries.__line__}),e.geometries.forEach(function(t){t&&("GeometryCollection"===t.type&&o.push({message:"GeometryCollection should avoid nested geometry collections",line:e.geometries.__line__}),r(t))}))},Polygon:function(t){p(t),h(t),i(t,"coordinates","array")||l(t.coordinates,"LinearRing",2)||y(t,o)},MultiPolygon:function(t){p(t),h(t),i(t,"coordinates","array")||l(t.coordinates,"LinearRing",3)||y(t,o)}},g=Object.keys(d).reduce(function(t,e){return t[e.toLowerCase()]=e,t},{});return"object"!=typeof t||null==t?o.push({message:"The root of a GeoJSON object must be an object.",line:0}):(r(t),o.forEach(function(t){({}).hasOwnProperty.call(t,"line")&&void 0===t.line&&delete t.line})),o}},{"./rhr":9}],9:[function(t,e,n){function o(t){return t*Math.PI/180}function r(t){var e=0;if(2<t.length)for(var n,r,i=0;i<t.length-1;i++)n=t[i],e+=o((r=t[i+1])[0]-n[0])*(2+Math.sin(o(n[1]))+Math.sin(o(r[1])));return 0<=e}function i(t){if(t&&0<t.length){if(r(t[0]))return!1;if(!t.slice(1,t.length).every(r))return!1}return!0}e.exports=function(t,e){var n;("Polygon"===(n=t).type?i(n.coordinates):"MultiPolygon"===n.type?n.coordinates.every(i):void 0)||e.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:t.__line__})}},{}],10:[function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}(e.exports=r).prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},{}],11:[function(t,e,n){"use strict";var r=t("@turf/meta");function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}e.exports=i,e.exports.default=i},{"@turf/meta":31}],12:[function(t,e,n){"use strict";var p=t("@turf/invariant"),h=t("@turf/helpers");function f(t,e,n){if(n=n||{},!h.isObject(n))throw new Error("options is invalid");if(!0===n.final)return(f(e,t)+180)%360;var r=p.getCoord(t),i=p.getCoord(e),o=h.degreesToRadians(r[0]),s=h.degreesToRadians(i[0]),a=h.degreesToRadians(r[1]),u=h.degreesToRadians(i[1]),c=Math.sin(s-o)*Math.cos(u),l=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return h.radiansToDegrees(Math.atan2(c,l))}e.exports=f,e.exports.default=f},{"@turf/helpers":21,"@turf/invariant":23}],13:[function(t,e,n){"use strict";var u=t("@turf/helpers"),c=t("@turf/invariant"),l=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length;for(var e=this.delay=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};function r(t,e){if(e=e||{},!u.isObject(e))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!u.isNumber(n))throw new Error("resolution must be an number");if(!u.isNumber(r))throw new Error("sharpness must be an number");for(var i=[],o=new l({points:c.getGeom(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:r}),s=0;s<o.duration;s+=10){var a=o.pos(s);Math.floor(s/100)%2==0&&i.push([a.x,a.y])}return u.lineString(i,t.properties)}l.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);t<Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))&&(e.push(r),n=i)}return e},l.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},l.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(1<=n)return this.points[this.length-1];var r,i,o,s,a,u,c,l,p=Math.floor((this.points.length-1)*n),h=(this.length-1)*n-p;return r=h,i=this.points[p],o=this.controls[p][1],s=this.controls[p+1][0],a=this.points[p+1],l=[(c=(u=r)*u)*u,3*c*(1-u),3*u*(1-u)*(1-u),(1-u)*(1-u)*(1-u)],{x:a.x*l[0]+s.x*l[1]+o.x*l[2]+i.x*l[3],y:a.y*l[0]+s.y*l[1]+o.y*l[2]+i.y*l[3],z:a.z*l[0]+s.z*l[1]+o.z*l[2]+i.z*l[3]}},e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],14:[function(t,e,n){"use strict";var o=t("@turf/meta"),s=t("@turf/helpers");function r(t,e){var n=0,r=0,i=0;return o.coordEach(t,function(t){n+=t[0],r+=t[1],i++},!0),s.point([n/i,r/i],e)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/meta":31}],15:[function(t,e,n){"use strict";var r,a=(r=t("@turf/destination"))&&"object"==typeof r&&"default"in r?r.default:r,u=t("@turf/helpers");function i(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var o=[],s=0;s<r;s++)o.push(a(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),u.polygon([o],i)}e.exports=i,e.exports.default=i},{"@turf/destination":19,"@turf/helpers":21}],16:[function(t,e,n){"use strict";var s=t("@turf/helpers"),l=t("@turf/invariant");function r(t,e){var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=l.getType(t),i=[];switch(r){case"LineString":i=a(t);break;case"MultiLineString":case"Polygon":l.getCoords(t).forEach(function(t){i.push(a(t))});break;case"MultiPolygon":l.getCoords(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(a(t))}),i.push(e)});break;case"Point":return t;case"MultiPoint":var o={};l.getCoords(t).forEach(function(t){var e=t.join("-");o.hasOwnProperty(e)||(i.push(t),o[e]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):s.feature({type:r,coordinates:i},t.properties,t.bbox,t.id)}function a(t){var e,n,r,i,o,s=l.getCoords(t);if(2===s.length&&(e=s[0],n=s[1],e[0]!==n[0]||e[1]!==n[1]))return s;var a=[],u=s.length-1;a.push(s[0]);for(var c=1;c<u;c++)r=s[c-1],i=s[c],p(r,o=s[c+1],i)||a.push(i);return a.push(o),a}function p(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],c=a-o,l=u-s;return 0===(r-o)*l-(i-s)*c&&(Math.abs(c)>=Math.abs(l)?0<c?o<=r&&r<=a:a<=r&&r<=o:0<l?s<=i&&i<=u:u<=i&&i<=s)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],17:[function(t,e,n){"use strict";function r(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return i(t);case"FeatureCollection":return e=t,n={type:"FeatureCollection"},Object.keys(e).forEach(function(t){switch(t){case"type":case"features":return;default:n[t]=e[t]}}),n.features=e.features.map(function(t){return i(t)}),n;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return o(t);default:throw new Error("unknown GeoJSON type")}var e,n}function i(e){var n={type:"Feature"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:n[t]=e[t]}}),n.properties=function n(r){var i={};if(!r)return i;Object.keys(r).forEach(function(t){var e=r[t];"object"==typeof e?null===e?i[t]=null:e.length?i[t]=e.map(function(t){return t}):i[t]=n(e):i[t]=e});return i}(e.properties),n.geometry=o(e.geometry),n}function o(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(function(t){return o(t)}):e.coordinates=function e(t){if("object"!=typeof t[0])return t.slice();return t.map(function(t){return e(t)})}(t.coordinates),e}e.exports=r,e.exports.default=r},{}],18:[function(t,e,n){"use strict";var r,o=(r=t("concaveman"))&&"object"==typeof r&&"default"in r?r.default:r,s=t("@turf/meta"),a=t("@turf/helpers");function i(t,e){if(e=e||{},!a.isObject(e))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(s.coordEach(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=o(r,n);return 3<i.length?a.polygon([i]):null}e.exports=i,e.exports.default=i},{"@turf/helpers":21,"@turf/meta":31,concaveman:45}],19:[function(t,e,n){"use strict";var g=t("@turf/invariant"),y=t("@turf/helpers");function r(t,e,n,r){if(r=r||{},!y.isObject(r))throw new Error("options is invalid");var i=r.units,o=r.properties,s=g.getCoord(t),a=y.degreesToRadians(s[0]),u=y.degreesToRadians(s[1]),c=y.degreesToRadians(n),l=y.lengthToRadians(e,i),p=Math.asin(Math.sin(u)*Math.cos(l)+Math.cos(u)*Math.sin(l)*Math.cos(c)),h=a+Math.atan2(Math.sin(c)*Math.sin(l)*Math.cos(u),Math.cos(l)-Math.sin(u)*Math.sin(p)),f=y.radiansToDegrees(h),d=y.radiansToDegrees(p);return y.point([f,d],o)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],20:[function(t,e,n){"use strict";var p=t("@turf/invariant"),h=t("@turf/helpers");function r(t,e,n){if(n=n||{},!h.isObject(n))throw new Error("options is invalid");var r=n.units,i=p.getCoord(t),o=p.getCoord(e),s=h.degreesToRadians(o[1]-i[1]),a=h.degreesToRadians(o[0]-i[0]),u=h.degreesToRadians(i[1]),c=h.degreesToRadians(o[1]),l=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(c);return h.radiansToLength(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=6371008.8,i={meters:r,metres:r,millimeters:1e3*r,millimetres:1e3*r,centimeters:100*r,centimetres:100*r,kilometers:r/1e3,kilometres:r/1e3,miles:r/1609.344,nauticalmiles:r/1852,inches:39.37*r,yards:r/1.0936,feet:3.28084*r,radians:1,degrees:r/111325},o={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/r,degrees:1/111325},s={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function a(t,e,n){if(!v(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&E(r),i&&I(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!m(t[0])||!m(t[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:t},e,n)}function c(t,e,n){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var i=t[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++){if(0===r&&0===o&&!m(i[0][0])||!m(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}}return a({type:"Polygon",coordinates:t},e,n)}function l(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!m(t[0][1])||!m(t[0][1]))throw new Error("coordinates must contain numbers");return a({type:"LineString",coordinates:t},e,n)}function p(t,e){if(!v(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&E(n),r&&I(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function h(t,e,n){if(!t)throw new Error("coordinates is required");return a({type:"MultiLineString",coordinates:t},e,n)}function f(t,e,n){if(!t)throw new Error("coordinates is required");return a({type:"MultiPoint",coordinates:t},e,n)}function d(t,e,n){if(!t)throw new Error("coordinates is required");return a({type:"MultiPolygon",coordinates:t},e,n)}function g(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=i[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function y(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=i[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function _(t){if(null==t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function m(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function v(t){return!!t&&t.constructor===Object}function E(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!m(t))throw new Error("bbox must only contain numbers")})}function I(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}n.earthRadius=r,n.factors=i,n.unitsFactors=o,n.areaFactors=s,n.feature=a,n.geometry=function(t,e,n){if(!v(n=n||{}))throw new Error("options is invalid");var r,i=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(i&&E(i),t){case"Point":r=u(e).geometry;break;case"LineString":r=l(e).geometry;break;case"Polygon":r=c(e).geometry;break;case"MultiPoint":r=f(e).geometry;break;case"MultiLineString":r=h(e).geometry;break;case"MultiPolygon":r=d(e).geometry;break;default:throw new Error(t+" is invalid")}return i&&(r.bbox=i),r},n.point=u,n.points=function(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return p(t.map(function(t){return u(t,e)}),n)},n.polygon=c,n.polygons=function(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return p(t.map(function(t){return c(t,e)}),n)},n.lineString=l,n.lineStrings=function(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return p(t.map(function(t){return l(t,e)}),n)},n.featureCollection=p,n.multiLineString=h,n.multiPoint=f,n.multiPolygon=d,n.geometryCollection=function(t,e,n){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return a({type:"GeometryCollection",geometries:t},e,n)},n.round=function(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(0<=e))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},n.radiansToLength=g,n.lengthToRadians=y,n.lengthToDegrees=function(t,e){return _(y(t,e))},n.bearingToAzimuth=function(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e},n.radiansToDegrees=_,n.degreesToRadians=function(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180},n.convertLength=function(t,e,n){if(null==t)throw new Error("length is required");if(!(0<=t))throw new Error("length must be a positive number");return g(y(t,e),n||"kilometers")},n.convertArea=function(t,e,n){if(null==t)throw new Error("area is required");if(!(0<=t))throw new Error("area must be a positive number");var r=s[e||"meters"];if(!r)throw new Error("invalid original units");var i=s[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i},n.isNumber=m,n.isObject=v,n.validateBBox=E,n.validateId=I,n.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},n.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},n.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},n.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},n.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},n.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},n.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],22:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var c=t("turf-jsts"),l=r(t("@turf/truncate")),p=t("@turf/invariant"),h=t("@turf/helpers"),f=r(t("@turf/clean-coords"));function i(t,e){var n=p.getGeom(t),r=p.getGeom(e);if(f(l(r,{precision:4})).coordinates[0].length<4)return null;if(f(l(n,{precision:4})).coordinates[0].length<4)return null;var i=new c.GeoJSONReader,o=i.read(l(n)),s=i.read(l(r)),a=c.OverlayOp.intersection(o,s);if(a.isEmpty())return null;var u=(new c.GeoJSONWriter).write(a);return h.feature(u)}e.exports=i,e.exports.default=i},{"@turf/clean-coords":16,"@turf/helpers":21,"@turf/invariant":23,"@turf/truncate":40,"turf-jsts":63}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("@turf/helpers");function i(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return o(e),e;throw new Error("No valid coordinates")}function o(t){if(1<t.length&&r.isNumber(t[0])&&r.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return o(t[0]);throw new Error("coordinates must only contain numbers")}n.getCoord=function(t){if(!t)throw new Error("obj is required");var e=i(t);if(1<e.length&&r.isNumber(e[0])&&r.isNumber(e[1]))return e;throw new Error("Coordinate is not a valid Point")},n.getCoords=i,n.containsNumber=o,n.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},n.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},n.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}},n.getGeom=function(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")},n.getGeomType=function(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")},n.getType=function(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}},{"@turf/helpers":21}],24:[function(t,e,n){"use strict";var r,i=(r=t("@turf/distance"))&&"object"==typeof r&&"default"in r?r.default:r,o=t("@turf/meta"),s=t("@turf/helpers");function a(t,r){if(r=r||{},!s.isObject(r))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return o.segmentReduce(t,function(t,e){var n=e.geometry.coordinates;return t+i(n[0],n[1],r)},0)}e.exports=a,e.exports.default=a},{"@turf/distance":20,"@turf/helpers":21,"@turf/meta":31}],25:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var g=r(t("@turf/destination")),y=r(t("@turf/circle")),_=t("@turf/helpers");function i(t,e,n,r,i){if(i=i||{},!_.isObject(i))throw new Error("options is invalid");var o=i.steps,s=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var a=m(n),u=m(r),c=t.properties;if(a===u)return _.lineString(y(t,e,i).geometry.coordinates[0],c);for(var l=a,p=a<u?u:u+360,h=l,f=[],d=0;h<p;)f.push(g(t,e,h,s).geometry.coordinates),h=l+360*++d/o;return p<h&&f.push(g(t,e,p,s).geometry.coordinates),_.lineString(f,c)}function m(t){var e=t%360;return e<0&&(e+=360),e}e.exports=i,e.exports.default=i},{"@turf/circle":15,"@turf/destination":19,"@turf/helpers":21}],26:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var a=r(t("geojson-rbush")),u=r(t("@turf/line-segment")),v=t("@turf/invariant"),c=t("@turf/meta"),E=t("@turf/helpers");function i(t,e){var i={},o=[];if("LineString"===t.type&&(t=E.feature(t)),"LineString"===e.type&&(e=E.feature(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var n=l(t,e);return n&&o.push(n),E.featureCollection(o)}var s=a();return s.load(u(e)),c.featureEach(u(t),function(r){c.featureEach(s.search(r),function(t){var e=l(r,t);if(e){var n=v.getCoords(e).join(",");i[n]||(i[n]=!0,o.push(e))}})}),E.featureCollection(o)}function l(t,e){var n=v.getCoords(t),r=v.getCoords(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],u=r[0][0],c=r[0][1],l=r[1][0],p=r[1][1],h=(p-c)*(s-i)-(l-u)*(a-o),f=(l-u)*(o-c)-(p-c)*(i-u),d=(s-i)*(o-c)-(a-o)*(i-u);if(0===h)return null;var g=f/h,y=d/h;if(0<=g&&g<=1&&0<=y&&y<=1){var _=i+g*(s-i),m=o+g*(a-o);return E.point([_,m])}return null}e.exports=i,e.exports.default=i},{"@turf/helpers":21,"@turf/invariant":23,"@turf/line-segment":27,"@turf/meta":31,"geojson-rbush":47}],27:[function(t,e,n){"use strict";var p=t("@turf/helpers"),o=t("@turf/invariant"),r=t("@turf/meta");function i(t){if(!t)throw new Error("geojson is required");var e=[];return r.flattenEach(t,function(t){!function(r,i){var t=[],e=r.geometry;switch(e.type){case"Polygon":t=o.getCoords(e);break;case"LineString":t=[o.getCoords(e)]}t.forEach(function(t){var e,c,l,n=(e=t,c=r.properties,l=[],e.reduce(function(t,e){var n,r,i,o,s,a,u=p.lineString([t,e],c);return u.bbox=(r=e,i=(n=t)[0],o=n[1],s=r[0],a=r[1],[i<s?i:s,o<a?o:a,s<i?i:s,a<o?o:a]),l.push(u),e}),l);n.forEach(function(t){t.id=i.length,i.push(t)})})}(t,e)}),p.featureCollection(e)}e.exports=i,e.exports.default=i},{"@turf/helpers":21,"@turf/invariant":23,"@turf/meta":31}],28:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var p=r(t("@turf/bearing")),h=r(t("@turf/distance")),f=r(t("@turf/destination")),d=t("@turf/helpers");function i(t,e,n,r){if(r=r||{},!d.isObject(r))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,c=0,l=0;l<i.length&&!(c<=e&&l===i.length-1);l++){if(e<c&&0===o.length){if(!(s=e-c))return o.push(i[l]),d.lineString(o);a=p(i[l],i[l-1])-180,u=f(i[l],s,a,r),o.push(u.geometry.coordinates)}if(n<=c)return(s=n-c)?(a=p(i[l],i[l-1])-180,u=f(i[l],s,a,r),o.push(u.geometry.coordinates)):o.push(i[l]),d.lineString(o);if(e<=c&&o.push(i[l]),l===i.length-1)return d.lineString(o);c+=h(i[l],i[l+1],r)}return d.lineString(i[i.length-1])}e.exports=i,e.exports.default=i},{"@turf/bearing":12,"@turf/destination":19,"@turf/distance":20,"@turf/helpers":21}],29:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var p=r(t("geojson-rbush")),s=r(t("@turf/square")),a=r(t("@turf/bbox")),o=r(t("@turf/truncate")),h=r(t("@turf/line-segment")),u=r(t("@turf/line-intersect")),c=r(t("@turf/nearest-point-on-line")),f=t("@turf/invariant"),d=t("@turf/meta"),g=t("@turf/helpers");function i(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=f.getType(t),r=f.getType(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=o(e,{precision:7});switch(r){case"Point":return y(t,i);case"MultiPoint":return l(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return l(t,u(t,i))}}function l(r,t){var i=[],o=p();return d.flattenEach(t,function(t){if(i.forEach(function(t,e){t.id=e}),i.length){var e=o.search(t);if(e.features.length){var n=_(t,e);i=i.filter(function(t){return t.id!==n.id}),o.remove(n),d.featureEach(y(n,t),function(t){i.push(t),o.insert(t)})}}else(i=y(r,t).features).forEach(function(t){t.bbox||(t.bbox=s(a(t)))}),o.load(g.featureCollection(i))}),g.featureCollection(i)}function y(t,o){var s=[],e=f.getCoords(t)[0],n=f.getCoords(t)[t.geometry.coordinates.length-1];if(m(e,f.getCoord(o))||m(n,f.getCoord(o)))return g.featureCollection([t]);var r=p(),i=h(t);r.load(i);var a=r.search(o);if(!a.features.length)return g.featureCollection([t]);var u=_(o,a),c=[e],l=d.featureReduce(i,function(t,e,n){var r=f.getCoords(e)[1],i=f.getCoord(o);return n===u.id?(t.push(i),s.push(g.lineString(t)),m(i,r)?[i]:[i,r]):(t.push(r),t)},c);return 1<l.length&&s.push(g.lineString(l)),g.featureCollection(s)}function _(n,t){if(!t.features.length)throw new Error("lines must contain features");if(1===t.features.length)return t.features[0];var r,i=1/0;return d.featureEach(t,function(t){var e=c(t,n).properties.dist;e<i&&(r=t,i=e)}),r}function m(t,e){return t[0]===e[0]&&t[1]===e[1]}e.exports=i,e.exports.default=i},{"@turf/bbox":11,"@turf/helpers":21,"@turf/invariant":23,"@turf/line-intersect":26,"@turf/line-segment":27,"@turf/meta":31,"@turf/nearest-point-on-line":32,"@turf/square":38,"@turf/truncate":40,"geojson-rbush":47}],30:[function(t,e,n){"use strict";var r,p=(r=t("@turf/bbox"))&&"object"==typeof r&&"default"in r?r.default:r,s=t("@turf/invariant"),h=t("@turf/helpers");function i(t,e){if(e=e||{},!h.isObject(e))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,s.getType(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(s.getCoords(a(t,{},r,i)))}),h.multiPolygon(o,n)}return a(t,n,r,i)}function a(t,e,a,u){e=e||t.properties||{};var n=s.getCoords(t),r=s.getType(t);if(!n.length)throw new Error("line must contain coordinates");switch(r){case"LineString":return a&&(n=f(n)),h.polygon([n],e);case"MultiLineString":var c=[],l=0;return n.forEach(function(t){if(a&&(t=f(t)),u){var e=(n=p(h.lineString(t)),r=n[0],i=n[1],o=n[2],s=n[3],Math.abs(r-o)*Math.abs(i-s));l<e?(c.unshift(t),l=e):c.push(t)}else c.push(t);var n,r,i,o,s}),h.polygon(c,e);default:throw new Error("geometry type "+r+" is not supported")}}function f(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}e.exports=i,e.exports.default=i},{"@turf/bbox":11,"@turf/helpers":21,"@turf/invariant":23}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var h=t("@turf/helpers");function x(t,e,n){if(null!==t)for(var r,i,o,s,a,u,c,l,p=0,h=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,y=d?t.features.length:1,_=0;_<y;_++){a=(l=!!(c=d?t.features[_].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<a;m++){var v=0,E=0;if(null!==(s=l?c.geometries[m]:c)){u=s.coordinates;var I=s.type;switch(p=!n||"Polygon"!==I&&"MultiPolygon"!==I?0:1,I){case null:break;case"Point":e(u,h,_,v,E),h++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],h,_,v,E),h++,"MultiPoint"===I&&v++;"LineString"===I&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-p;i++)e(u[r][i],h,_,v,E),h++;"MultiLineString"===I&&v++,"Polygon"===I&&E++}"Polygon"===I&&v++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===I&&(E=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-p;o++)e(u[r][i][o],h,_,v,E),h++;E++}v++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)x(s.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function r(t,o,s,e){var a=s;return x(t,function(t,e,n,r,i){a=0===e&&void 0===s?t:o(a,t,e,n,r,i)},e),a}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function i(t,e){var n,r,i,o,s,a,u,c,l,p,h=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,c=f?t.features[n].properties:d?t.properties:{},l=f?t.features[n].bbox:d?t.bbox:void 0,p=f?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,h,c,l,p);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],h,c,l,p);break;default:throw new Error("Unknown Geometry Type")}else e(null,h,c,l,p);h++}}function a(t,a){i(t,function(t,r,i,e,n){var o,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return void a(h.feature(t,i,{bbox:e,id:n}),r,0)}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}t.coordinates.forEach(function(t,e){var n={type:o,coordinates:t};a(h.feature(n,i),r,e)})})}function c(t,p){a(t,function(a,u,c){var l=0;if(a.geometry){var t=a.geometry.type;"Point"!==t&&"MultiPoint"!==t&&r(a,function(t,e,n,r,i,o){var s=h.lineString([t,e],a.properties);return p(s,u,c,o,l),l++,e})}})}function u(t,s){if(!t)throw new Error("geojson is required");a(t,function(t,e,n){if(null!==t.geometry){var r=t.geometry.type,i=t.geometry.coordinates;switch(r){case"LineString":s(t,e,n,0,0);break;case"Polygon":for(var o=0;o<i.length;o++)s(h.lineString(i[o],t.properties),e,n,o)}}})}n.coordEach=x,n.coordReduce=r,n.propEach=o,n.propReduce=function(t,n,r){var i=r;return o(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i},n.featureEach=s,n.featureReduce=function(t,n,r){var i=r;return s(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i},n.coordAll=function(t){var e=[];return x(t,function(t){e.push(t)}),e},n.geomEach=i,n.geomReduce=function(t,o,s){var a=s;return i(t,function(t,e,n,r,i){a=0===e&&void 0===s?t:o(a,t,e,n,r,i)}),a},n.flattenEach=a,n.flattenReduce=function(t,r,i){var o=i;return a(t,function(t,e,n){o=0===e&&0===n&&void 0===i?t:r(o,t,e,n)}),o},n.segmentEach=c,n.segmentReduce=function(t,o,s){var a=s,u=!1;return c(t,function(t,e,n,r,i){a=!1===u&&void 0===s?t:o(a,t,e,n,r,i),u=!0}),a},n.lineEach=u,n.lineReduce=function(t,i,o){var s=o;return u(t,function(t,e,n,r){s=0===e&&void 0===o?t:i(s,t,e,n,r)}),s}},{"@turf/helpers":21}],32:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var y=r(t("@turf/bearing")),_=r(t("@turf/distance")),m=r(t("@turf/destination")),v=r(t("@turf/line-intersect")),i=t("@turf/meta"),E=t("@turf/helpers"),I=t("@turf/invariant");function o(t,h,f){if(f=f||{},!E.isObject(f))throw new Error("options is invalid");var e=t.geometry?t.geometry.type:t.type;if("LineString"!==e&&"MultiLineString"!==e)throw new Error("lines must be LineString or MultiLineString");var d=E.point([1/0,1/0],{dist:1/0}),g=0;return i.flattenEach(t,function(t){for(var e=I.getCoords(t),n=0;n<e.length-1;n++){var r=E.point(e[n]);r.properties.dist=_(h,r,f);var i=E.point(e[n+1]);i.properties.dist=_(h,i,f);var o=_(r,i,f),s=Math.max(r.properties.dist,i.properties.dist),a=y(r,i),u=m(h,s,a+90,f),c=m(h,s,a-90,f),l=v(E.lineString([u.geometry.coordinates,c.geometry.coordinates]),E.lineString([r.geometry.coordinates,i.geometry.coordinates])),p=null;0<l.features.length&&((p=l.features[0]).properties.dist=_(h,p,f),p.properties.location=g+_(r,p,f)),r.properties.dist<d.properties.dist&&((d=r).properties.index=n,d.properties.location=g),i.properties.dist<d.properties.dist&&((d=i).properties.index=n+1,d.properties.location=g+o),p&&p.properties.dist<d.properties.dist&&((d=p).properties.index=n),g+=o}}),d}e.exports=o,e.exports.default=o},{"@turf/bearing":12,"@turf/destination":19,"@turf/distance":20,"@turf/helpers":21,"@turf/invariant":23,"@turf/line-intersect":26,"@turf/meta":31}],33:[function(t,e,n){"use strict";var s=t("@turf/invariant"),a=t("@turf/helpers");function r(t,e){if(e=e||{},!a.isObject(e))throw new Error("options is invalid");var n=e.properties,r=s.getType(t),i=s.getCoords(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return u(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(u(t,n))}),a.featureCollection(o);default:throw new Error("geom "+r+" not supported")}}function u(t,e){return 1<t.length?a.multiLineString(t,e):a.lineString(t[0],e)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],34:[function(t,e,n){"use strict";var o=t("@turf/invariant"),a=t("@turf/helpers");function r(t,e,n){if(n=n||{},!a.isObject(n))throw new Error("options is invalid");var r,i=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return 180<(r=i?s(o.getCoord(e),o.getCoord(t)):s(o.getCoord(t),o.getCoord(e)))?-(360-r):r}function s(t,e){var n=a.degreesToRadians(t[1]),r=a.degreesToRadians(e[1]),i=a.degreesToRadians(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),s=Math.atan2(i,o);return(a.radiansToDegrees(s)+360)%360}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],35:[function(t,e,n){"use strict";var f=t("@turf/helpers"),c=t("@turf/invariant");function r(t,e,n,r){if(r=r||{},!f.isObject(r))throw new Error("options is invalid");var i=r.units,o=r.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(0<=e))throw new Error("distance must be greater than 0");var s=f.convertLength(e,i,"meters"),a=c.getCoord(t),u=function(t,e,n,r){r=void 0===r?f.earthRadius:Number(r);var i=e/r,o=t[0]*Math.PI/180,s=f.degreesToRadians(t[1]),a=f.degreesToRadians(n),u=i*Math.cos(a),c=s+u;Math.abs(c)>Math.PI/2&&(c=0<c?Math.PI-c:-Math.PI-c);var l=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),p=1e-11<Math.abs(l)?u/l:Math.cos(s),h=i*Math.sin(a)/p;return[(180*(o+h)/Math.PI+540)%360-180,180*c/Math.PI]}(a,s,n);return u[0]+=180<u[0]-a[0]?-360:180<a[0]-u[0]?360:0,f.point(u,o)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],36:[function(t,e,n){"use strict";var l=t("@turf/helpers"),a=t("@turf/invariant");function r(t,e,n){if(n=n||{},!l.isObject(n))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=a.getCoord(t),o=a.getCoord(e);o[0]+=180<o[0]-i[0]?-360:180<i[0]-o[0]?360:0;var s=function(t,e,n){var r=n=void 0===n?l.earthRadius:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),c=1e-11<Math.abs(u)?s/u:Math.cos(i);return Math.sqrt(s*s+c*c*a*a)*r}(i,o);return l.convertLength(s,"meters",r)}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/invariant":23}],37:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var u=r(t("@turf/circle")),c=r(t("@turf/line-arc")),l=t("@turf/meta"),p=t("@turf/helpers"),h=t("@turf/invariant");function i(t,e,n,r,i){if(i=i||{},!p.isObject(i))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(f(n)===f(r))return u(t,e,i);var o=h.getCoords(t),s=c(t,e,n,r,i),a=[[o]];return l.coordEach(s,function(t){a[0].push(t)}),a[0].push(o),p.polygon(a)}function f(t){var e=t%360;return e<0&&(e+=360),e}e.exports=i,e.exports.default=i},{"@turf/circle":15,"@turf/helpers":21,"@turf/invariant":23,"@turf/line-arc":25,"@turf/meta":31}],38:[function(t,e,n){"use strict";var r,u=(r=t("@turf/distance"))&&"object"==typeof r&&"default"in r?r.default:r;function i(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=u(t.slice(0,2),[r,n]);if(u(t.slice(0,2),[e,i])<=o){var s=(n+i)/2;return[e,s-(r-e)/2,r,s+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}e.exports=i,e.exports.default=i},{"@turf/distance":20}],39:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var s=r(t("@turf/centroid")),a=r(t("@turf/rhumb-bearing")),u=r(t("@turf/rhumb-distance")),c=r(t("@turf/rhumb-destination")),l=r(t("@turf/clone")),p=t("@turf/meta"),h=t("@turf/invariant"),f=t("@turf/helpers");function i(t,i,e){if(e=e||{},!f.isObject(e))throw new Error("options is invalid");var o=e.pivot,n=e.mutate;if(!t)throw new Error("geojson is required");if(null==i||isNaN(i))throw new Error("angle is required");return 0===i||(o||(o=s(t)),!1!==n&&void 0!==n||(t=l(t)),p.coordEach(t,function(t){var e=a(o,t)+i,n=u(o,t),r=h.getCoords(c(o,n,e));t[0]=r[0],t[1]=r[1]})),t}e.exports=i,e.exports.default=i},{"@turf/centroid":14,"@turf/clone":17,"@turf/helpers":21,"@turf/invariant":23,"@turf/meta":31,"@turf/rhumb-bearing":34,"@turf/rhumb-destination":35,"@turf/rhumb-distance":36}],40:[function(t,e,n){"use strict";var s=t("@turf/meta"),a=t("@turf/helpers");function r(t,e){if(e=e||{},!a.isObject(e))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return s.coordEach(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}e.exports=r,e.exports.default=r},{"@turf/helpers":21,"@turf/meta":31}],41:[function(t,e,n){"use strict";var r=t("turf-jsts");function i(){for(var t=new r.GeoJSONReader,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=r.UnionOp.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new r.GeoJSONWriter).write(e),properties:arguments[0].properties}}e.exports=i,e.exports.default=i},{"turf-jsts":63}],42:[function(t,e,n){"use strict";e.exports={builtins:{Symbol:"symbol",Promise:"promise",Map:"map",WeakMap:"weak-map",Set:"set",WeakSet:"weak-set",Observable:"observable",setImmediate:"set-immediate",clearImmediate:"clear-immediate",asap:"asap"},methods:{Array:{concat:"array/concat",copyWithin:"array/copy-within",entries:"array/entries",every:"array/every",fill:"array/fill",filter:"array/filter",findIndex:"array/find-index",find:"array/find",forEach:"array/for-each",from:"array/from",includes:"array/includes",indexOf:"array/index-of",join:"array/join",keys:"array/keys",lastIndexOf:"array/last-index-of",map:"array/map",of:"array/of",pop:"array/pop",push:"array/push",reduceRight:"array/reduce-right",reduce:"array/reduce",reverse:"array/reverse",shift:"array/shift",slice:"array/slice",some:"array/some",sort:"array/sort",splice:"array/splice",unshift:"array/unshift",values:"array/values"},JSON:{stringify:"json/stringify"},Object:{assign:"object/assign",create:"object/create",defineProperties:"object/define-properties",defineProperty:"object/define-property",entries:"object/entries",freeze:"object/freeze",getOwnPropertyDescriptor:"object/get-own-property-descriptor",getOwnPropertyDescriptors:"object/get-own-property-descriptors",getOwnPropertyNames:"object/get-own-property-names",getOwnPropertySymbols:"object/get-own-property-symbols",getPrototypeOf:"object/get-prototype-of",isExtensible:"object/is-extensible",isFrozen:"object/is-frozen",isSealed:"object/is-sealed",is:"object/is",keys:"object/keys",preventExtensions:"object/prevent-extensions",seal:"object/seal",setPrototypeOf:"object/set-prototype-of",values:"object/values"},RegExp:{escape:"regexp/escape"},Math:{acosh:"math/acosh",asinh:"math/asinh",atanh:"math/atanh",cbrt:"math/cbrt",clz32:"math/clz32",cosh:"math/cosh",expm1:"math/expm1",fround:"math/fround",hypot:"math/hypot",imul:"math/imul",log10:"math/log10",log1p:"math/log1p",log2:"math/log2",sign:"math/sign",sinh:"math/sinh",tanh:"math/tanh",trunc:"math/trunc",iaddh:"math/iaddh",isubh:"math/isubh",imulh:"math/imulh",umulh:"math/umulh"},Symbol:{for:"symbol/for",hasInstance:"symbol/has-instance",isConcatSpreadable:"symbol/is-concat-spreadable",iterator:"symbol/iterator",keyFor:"symbol/key-for",match:"symbol/match",replace:"symbol/replace",search:"symbol/search",species:"symbol/species",split:"symbol/split",toPrimitive:"symbol/to-primitive",toStringTag:"symbol/to-string-tag",unscopables:"symbol/unscopables"},String:{at:"string/at",codePointAt:"string/code-point-at",endsWith:"string/ends-with",fromCodePoint:"string/from-code-point",includes:"string/includes",matchAll:"string/match-all",padLeft:"string/pad-left",padRight:"string/pad-right",padStart:"string/pad-start",padEnd:"string/pad-end",raw:"string/raw",repeat:"string/repeat",startsWith:"string/starts-with",trim:"string/trim",trimLeft:"string/trim-left",trimRight:"string/trim-right",trimStart:"string/trim-start",trimEnd:"string/trim-end"},Number:{EPSILON:"number/epsilon",isFinite:"number/is-finite",isInteger:"number/is-integer",isNaN:"number/is-nan",isSafeInteger:"number/is-safe-integer",MAX_SAFE_INTEGER:"number/max-safe-integer",MIN_SAFE_INTEGER:"number/min-safe-integer",parseFloat:"number/parse-float",parseInt:"number/parse-int"},Reflect:{apply:"reflect/apply",construct:"reflect/construct",defineProperty:"reflect/define-property",deleteProperty:"reflect/delete-property",enumerate:"reflect/enumerate",getOwnPropertyDescriptor:"reflect/get-own-property-descriptor",getPrototypeOf:"reflect/get-prototype-of",get:"reflect/get",has:"reflect/has",isExtensible:"reflect/is-extensible",ownKeys:"reflect/own-keys",preventExtensions:"reflect/prevent-extensions",setPrototypeOf:"reflect/set-prototype-of",set:"reflect/set",defineMetadata:"reflect/define-metadata",deleteMetadata:"reflect/delete-metadata",getMetadata:"reflect/get-metadata",getMetadataKeys:"reflect/get-metadata-keys",getOwnMetadata:"reflect/get-own-metadata",getOwnMetadataKeys:"reflect/get-own-metadata-keys",hasMetadata:"reflect/has-metadata",hasOwnMetadata:"reflect/has-own-metadata",metadata:"reflect/metadata"},System:{global:"system/global"},Error:{isError:"error/is-error"},Date:{},Function:{}}}},{}],43:[function(t,e,n){"use strict";n.__esModule=!0,n.definitions=void 0,n.default=function(t){var u=t.types;function c(t){return t.moduleName||"babel-runtime"}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var r=["interopRequireWildcard","interopRequireDefault"];return{pre:function(e){var n=c(this.opts);!1!==this.opts.helpers&&e.set("helperGenerator",function(t){if(r.indexOf(t)<0)return e.addImport(n+"/helpers/"+t,"default",t)}),this.setDynamic("regeneratorIdentifier",function(){return e.addImport(n+"/regenerator","default","regeneratorRuntime")})},visitor:{ReferencedIdentifier:function(t,e){var n=t.node,r=t.parent,i=t.scope;if("regeneratorRuntime"!==n.name||!1===e.opts.regenerator){if(!1!==e.opts.polyfill&&!u.isMemberExpression(r)&&l(p.default.builtins,n.name)&&!i.getBindingIdentifier(n.name)){var o=c(e.opts);t.replaceWith(e.addImport(o+"/core-js/"+p.default.builtins[n.name],"default",n.name))}}else t.replaceWith(e.get("regeneratorIdentifier"))},CallExpression:function(t,e){if(!1!==e.opts.polyfill&&!t.node.arguments.length){var n=t.node.callee;if(u.isMemberExpression(n)&&n.computed&&t.get("callee.property").matchesPattern("Symbol.iterator")){var r=c(e.opts);t.replaceWith(u.callExpression(e.addImport(r+"/core-js/get-iterator","default","getIterator"),[n.object]))}}},BinaryExpression:function(t,e){if(!1!==e.opts.polyfill&&"in"===t.node.operator&&t.get("left").matchesPattern("Symbol.iterator")){var n=c(e.opts);t.replaceWith(u.callExpression(e.addImport(n+"/core-js/is-iterable","default","isIterable"),[t.node.right]))}},MemberExpression:{enter:function(t,e){if(!1!==e.opts.polyfill&&t.isReferenced()){var n=t.node,r=n.object,i=n.property;if(u.isReferenced(r,n)&&!n.computed&&l(p.default.methods,r.name)){var o=p.default.methods[r.name];if(l(o,i.name)&&!t.scope.getBindingIdentifier(r.name)){if("Object"===r.name&&"defineProperty"===i.name&&t.parentPath.isCallExpression()){var s=t.parentPath.node;if(3===s.arguments.length&&u.isLiteral(s.arguments[1]))return}var a=c(e.opts);t.replaceWith(e.addImport(a+"/core-js/"+o[i.name],"default",r.name+"$"+i.name))}}}},exit:function(t,e){if(!1!==e.opts.polyfill&&t.isReferenced()){var n=t.node,r=n.object;if(l(p.default.builtins,r.name)&&!t.scope.getBindingIdentifier(r.name)){var i=c(e.opts);t.replaceWith(u.memberExpression(e.addImport(i+"/core-js/"+p.default.builtins[r.name],"default",r.name),n.property,n.computed))}}}}}}};var r,i=t("./definitions"),p=(r=i)&&r.__esModule?r:{default:r};n.definitions=p.default},{"./definitions":42}],44:[function(t,e,n){},{}],45:[function(t,e,n){"use strict";var m=t("rbush"),v=t("monotone-convex-hull-2d"),y=t("tinyqueue"),E=t("point-in-polygon"),f=t("robust-orientation")[3];function r(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)E(t[o],a)||u.push(t[o]);var c=v(u),l=[];for(o=0;o<c.length;o++)l.push(u[c[o]]);return l}(t),o=m(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=w(u,r),s.push(r)}var c=m(16);for(a=0;a<s.length;a++)c.insert(C(s[a]));for(var l=e*e,p=n*n;s.length;){var h=s.shift(),f=h.p,d=h.next.p,g=S(f,d);if(!(g<p)){var y=g/l;(u=I(o,h.prev.p,f,d,h.next.next.p,y,c))&&Math.min(S(u,f),S(u,d))<=y&&(s.push(h),s.push(w(u,h)),o.remove(u),c.remove(h),c.insert(C(h)),c.insert(C(h.next)))}}h=r;for(var _=[];_.push(h.p),(h=h.next)!==r;);return _.push(h.p),_}function I(t,e,n,r,i,o,s){for(var a=new y(null,_),u=t.data;u;){for(var c=0;c<u.children.length;c++){var l=u.children[c],p=u.leaf?N(l,n,r):x(n,r,l);o<p||a.push({node:l,dist:p})}for(;a.length&&!a.peek().node.children;){var h=a.pop(),f=h.node,d=N(f,e,n),g=N(f,r,i);if(h.dist<d&&h.dist<g&&b(n,f,s)&&b(r,f,s))return f}(u=a.pop())&&(u=u.node)}return null}function _(t,e){return t.dist-e.dist}function x(t,e,n){if(a(t,n)||a(e,n))return 0;var r=u(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=u(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=u(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=u(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function a(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function b(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),c=Math.max(t[0],e[0]),l=Math.max(t[1],e[1]),p=n.search({minX:a,minY:u,maxX:c,maxY:l}),h=0;h<p.length;h++)if(r=p[h].p,i=p[h].next.p,o=t,r!==(s=e)&&i!==o&&0<f(r,i,o)!=0<f(r,i,s)&&0<f(o,s,r)!=0<f(o,s,i))return!1;return!0}function C(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function w(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,(n.prev=e).next.prev=n,e.next=n):(n.prev=n).next=n,n}function S(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function N(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);1<a?(r=n[0],i=n[1]):0<a&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function u(t,e,n,r,i,o,s,a){var u,c,l,p,h=n-t,f=r-e,d=s-i,g=a-o,y=t-i,_=e-o,m=h*h+f*f,v=h*d+f*g,E=d*d+g*g,I=h*y+f*_,x=d*y+g*_,b=m*E-v*v,C=b,w=b;0===b?(c=0,C=1,p=x,w=E):(p=m*x-v*I,(c=v*x-E*I)<0?(c=0,p=x,w=E):C<c&&(c=C,p=x+v,w=E)),p<0?-I<(p=0)?c=0:m<-I?c=C:(c=-I,C=m):w<p&&(p=w,-I+v<0?c=0:m<-I+v?c=C:(c=-I+v,C=m));var S=(1-(l=0===p?0:p/w))*i+l*s-((1-(u=0===c?0:c/C))*t+u*n),N=(1-l)*o+l*a-((1-u)*e+u*r);return S*S+N*N}e.exports=r,e.exports.default=r},{"monotone-convex-hull-2d":51,"point-in-polygon":53,rbush:56,"robust-orientation":57,tinyqueue:61}],46:[function(t,e,n){e.exports=function n(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(t,e){return t.concat(n(e))},[]),e;case"Feature":return e.geometry?n(e.geometry).map(function(t){return{type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t}}):e;case"MultiPoint":return e.coordinates.map(function(t){return{type:"Point",coordinates:t}});case"MultiPolygon":return e.coordinates.map(function(t){return{type:"Polygon",coordinates:t}});case"MultiLineString":return e.coordinates.map(function(t){return{type:"LineString",coordinates:t}});case"GeometryCollection":return e.geometries.map(n).reduce(function(t,e){return t.concat(e)},[]);case"Point":case"Polygon":case"LineString":return[e]}}},{}],47:[function(t,e,n){"use strict";function a(t,e,n,r,i){!function t(e,n,r,i,o){for(;r<i;){if(600<i-r){var s=i-r+1,a=n-r+1,u=Math.log(s),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(s-c)/s)*(a-s/2<0?-1:1),p=Math.max(r,Math.floor(n-a*c/s+l)),h=Math.min(i,Math.floor(n+(s-a)*c/s+l));t(e,n,p,h,o)}var f=e[n],d=r,g=i;for(y(e,r,n),0<o(e[i],f)&&y(e,r,i);d<g;){for(y(e,d,g),d++,g--;o(e[d],f)<0;)d++;for(;0<o(e[g],f);)g--}0===o(e[r],f)?y(e,r,g):y(e,++g,i),g<=n&&(r=g+1),n<=g&&(i=g-1)}}(t,e,n||0,r||t.length-1,i||o)}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function o(t,e){return t<e?-1:e<t?1:0}function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function l(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function f(t,e){_(t,0,t.children.length,e,t)}function _(t,e,n,r,i){i||(i=g(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],p(i,t.leaf?r(o):o);return i}function p(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function s(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function c(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(a(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),s.push(e,o,o,n))}function i(t){var e=r(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=E(e)).bbox=e}else t.bbox=t.bbox?t.bbox:I(t);return r.prototype.insert.call(this,t)},e.load=function(t){var n=[];return Array.isArray(t)?t.forEach(function(t){var e=E(t);e.bbox=t,n.push(e)}):function(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}(t,function(t){t.bbox=t.bbox?t.bbox:I(t),n.push(t)}),r.prototype.load.call(this,n)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=E(e)).bbox=e}return r.prototype.remove.call(this,t)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:r.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:r.prototype.all.call(this)}},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:I(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function E(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function I(t){var e=[1/0,1/0,-1/0,-1/0];return function t(e,n,r){if(null!==e){var i,o,s,a,u,c,l,p,h,f,d=0,g=0,y=e.type,_="FeatureCollection"===y,m="Feature"===y,v=_?e.features.length:1;for(i=0;i<v;i++)for(l=(f=!!(h=_?e.features[i].geometry:m?e.geometry:e)&&"GeometryCollection"===h.type)?h.geometries.length:1,o=0;o<l;o++){var E=0;if(null!==(c=f?h.geometries[o]:h)){p=c.coordinates;var I=c.type;switch(d=!r||"Polygon"!==I&&"MultiPolygon"!==I?0:1,I){case null:break;case"Point":n(p,g,i,E),g++,E++;break;case"LineString":case"MultiPoint":for(s=0;s<p.length;s++)n(p[s],g,i,E),g++,"MultiPoint"===I&&E++;"LineString"===I&&E++;break;case"Polygon":case"MultiLineString":for(s=0;s<p.length;s++){for(a=0;a<p[s].length-d;a++)n(p[s][a],g,i,E),g++;"MultiLineString"===I&&E++}"Polygon"===I&&E++;break;case"MultiPolygon":for(s=0;s<p.length;s++){for(a=0;a<p[s].length;a++)for(u=0;u<p[s][a].length-d;u++)n(p[s][a][u],g,i,E),g++;E++}break;case"GeometryCollection":for(s=0;s<c.geometries.length;s++)t(c.geometries[s],n,r);break;default:throw new Error("Unknown Geometry Type")}}}}}(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!c(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],c(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):d(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!c(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],c(t,s=e.leaf?n(o):o)){if(e.leaf||d(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&-1!==(i=l(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!d(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,s=(r=s).children[0])}return this},toBBox:function(t){return t},compareMinX:s,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return f(i=g(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=g([])).leaf=!1,i.height=r;var a,u,c,l,p=Math.ceil(o/s),h=p*Math.ceil(Math.sqrt(s));for(v(t,e,n,h,this.compareMinX),a=e;a<=n;a+=h)for(v(t,a,c=Math.min(a+h-1,n),p,this.compareMinY),u=a;u<=c;u+=p)l=Math.min(u+p-1,c),i.children.push(this._build(t,u,l,r-1));return f(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,l,p,h,f;r.push(e),!e.leaf&&r.length-1!==n;){for(l=p=1/0,i=0,o=e.children.length;i<o;i++)u=m(s=e.children[i]),h=t,f=s,(c=(Math.max(f.maxX,h.maxX)-Math.min(f.minX,h.minX))*(Math.max(f.maxY,h.maxY)-Math.min(f.minY,h.minY))-u)<p?(p=c,l=u<l?u:l,a=s):c===p&&u<l&&(l=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),p(s,i);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=g(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,f(n,this.toBBox),f(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,f(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,c,l,p,h,f,d,g,y;for(u=c=1/0,r=e;r<=n-e;r++)i=_(t,0,r,this.toBBox),o=_(t,r,n,this.toBBox),p=i,h=o,void 0,f=Math.max(p.minX,h.minX),d=Math.max(p.minY,h.minY),g=Math.min(p.maxX,h.maxX),y=Math.min(p.maxY,h.maxY),s=Math.max(0,g-f)*Math.max(0,y-d),a=m(i)+m(o),s<u?(u=s,l=r,c=a<c?a:c):s===u&&a<c&&(c=a,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:s,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=_(t,0,e,s),u=_(t,n-e,n,s),c=h(a)+h(u);for(i=e;i<n-e;i++)o=t.children[i],p(a,t.leaf?s(o):o),c+=h(a);for(i=n-e-1;e<=i;i--)o=t.children[i],p(u,t.leaf?s(o):o),c+=h(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)p(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():f(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},e.exports=i,e.exports.default=i},{}],48:[function(t,e,n){var u=e.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var n=Math.log(Math.pow(2,t))/Math.log(e),r=2;n===1/0;r*=2)n=Math.log(Math.pow(2,t/r))/Math.log(e)*r;var i=n-Math.floor(n),o="";for(r=0;r<Math.floor(n);r++){o=Math.floor(Math.random()*e).toString(e)+o}if(i){var s=Math.pow(e,i);o=Math.floor(Math.random()*s).toString(e)+o}var a=parseInt(o,e);return a!==1/0&&a>=Math.pow(2,t)?u(t,e):o};u.rack=function(r,i,o){var n=function(t){var e=0;do{if(10<e++){if(!o)throw new Error("too many ID collisions, use more bits");r+=o}var n=u(r,i)}while(Object.hasOwnProperty.call(s,n));return s[n]=t,n},s=n.hats={};return n.get=function(t){return n.hats[t]},n.set=function(t,e){return n.hats[t]=e,n},n.bits=r||128,n.base=i||16,n}},{}],49:[function(r,e,i){(function(n){var t=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,12],n=[1,13],r=[1,9],i=[1,10],o=[1,11],s=[1,14],a=[1,15],u=[14,18,22,24],c=[18,22],l=[22,24],p={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[a-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[a-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[a-2],o[a]];break;case 16:this.$={},this.$[o[a][0]]=o[a][1];break;case 17:this.$=o[a-2],void 0!==o[a-2][o[a][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(o[a][0])),o[a-2][o[a][0]]=o[a][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[a]];break;case 21:this.$=o[a-2],o[a-2].push(o[a])}},table:[{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,12:1,13:2,15:7,16:8,17:s,23:a},{1:[3]},{14:[1,16]},t(u,[2,7]),t(u,[2,8]),t(u,[2,9]),t(u,[2,10]),t(u,[2,11]),t(u,[2,12]),t(u,[2,3]),t(u,[2,4]),t(u,[2,5]),t([14,18,21,22,24],[2,1]),t(u,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:23,15:7,16:8,17:s,23:a,24:[1,21],25:22},{1:[2,6]},t(u,[2,13]),{18:[1,24],22:[1,25]},t(c,[2,16]),{21:[1,26]},t(u,[2,18]),{22:[1,28],24:[1,27]},t(l,[2,20]),t(u,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:30,15:7,16:8,17:s,23:a},t(u,[2,19]),{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:31,15:7,16:8,17:s,23:a},t(c,[2,17]),t(c,[2,15]),t(l,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable){function n(t,e){this.message=t,this.hash=e}throw n.prototype=Error,new n(t,e)}this.trace(t)},parse:function(t){var e=this,n=[0],r=[null],i=[],o=this.table,s="",a=0,u=0,c=0,l=i.slice.call(arguments,1),p=Object.create(this.lexer),h={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(h.yy[f]=this.yy[f]);p.setInput(t,h.yy),h.yy.lexer=p,h.yy.parser=this,void 0===p.yylloc&&(p.yylloc={});var d=p.yylloc;i.push(d);var g=p.options&&p.options.ranges;"function"==typeof h.yy.parseError?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,_,m,v,E,I,x,b,C,w=function(){var t;return"number"!=typeof(t=p.lex()||1)&&(t=e.symbols_[t]||t),t},S={};;){if(m=n[n.length-1],this.defaultActions[m]?v=this.defaultActions[m]:(null==y&&(y=w()),v=o[m]&&o[m][y]),void 0===v||!v.length||!v[0]){var N="";for(I in C=[],o[m])this.terminals_[I]&&2<I&&C.push("'"+this.terminals_[I]+"'");N=p.showPosition?"Parse error on line "+(a+1)+":\n"+p.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(N,{text:p.match,token:this.terminals_[y]||y,line:p.yylineno,loc:d,expected:C})}if(v[0]instanceof Array&&1<v.length)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+y);switch(v[0]){case 1:n.push(y),r.push(p.yytext),i.push(p.yylloc),n.push(v[1]),y=null,_?(y=_,_=null):(u=p.yyleng,s=p.yytext,a=p.yylineno,d=p.yylloc,0<c&&c--);break;case 2:if(x=this.productions_[v[1]][1],S.$=r[r.length-x],S._$={first_line:i[i.length-(x||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(x||1)].first_column,last_column:i[i.length-1].last_column},g&&(S._$.range=[i[i.length-(x||1)].range[0],i[i.length-1].range[1]]),void 0!==(E=this.performAction.apply(S,[s,u,a,h.yy,v[1],r,i].concat(l))))return E;x&&(n=n.slice(0,-1*x*2),r=r.slice(0,-1*x),i=i.slice(0,-1*x)),n.push(this.productions_[v[1]][0]),r.push(S.$),i.push(S._$),b=o[n[n.length-2]][n[n.length-1]],n.push(b);break;case 3:return!0}}return!0}},h={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function f(){this.yy={}}return p.lexer=h,new((f.prototype=p).Parser=f)}();void 0!==r&&void 0!==i&&(i.parser=t,i.Parser=t.Parser,i.parse=function(){return t.parse.apply(t,arguments)},i.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),n.exit(1));var e=r("fs").readFileSync(r("path").normalize(t[1]),"utf8");return i.parser.parse(e)},void 0!==e&&r.main===e&&i.main(n.argv.slice(1)))}).call(this,r("_process"))},{_process:54,fs:44,path:52}],50:[function(t,Qt,te){(function(t){var r="__lodash_hash_undefined__",E=1,_=2,n=9007199254740991,m="[object Arguments]",v="[object Array]",i="[object AsyncFunction]",I="[object Boolean]",x="[object Date]",b="[object Error]",o="[object Function]",s="[object GeneratorFunction]",C="[object Map]",w="[object Number]",a="[object Null]",S="[object Object]",u="[object Promise]",c="[object Proxy]",N="[object RegExp]",T="[object Set]",L="[object String]",O="[object Symbol]",l="[object Undefined]",p="[object WeakMap]",M="[object ArrayBuffer]",P="[object DataView]",h=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,e={};e["[object Float32Array]"]=e["[object Float64Array]"]=e["[object Int8Array]"]=e["[object Int16Array]"]=e["[object Int32Array]"]=e["[object Uint8Array]"]=e["[object Uint8ClampedArray]"]=e["[object Uint16Array]"]=e["[object Uint32Array]"]=!0,e[m]=e[v]=e[M]=e[I]=e[P]=e[x]=e[b]=e[o]=e[C]=e[w]=e[S]=e[N]=e[T]=e[L]=e[p]=!1;var d="object"==typeof t&&t&&t.Object===Object&&t,g="object"==typeof self&&self&&self.Object===Object&&self,y=d||g||Function("return this")(),A="object"==typeof te&&te&&!te.nodeType&&te,R=A&&"object"==typeof Qt&&Qt&&!Qt.nodeType&&Qt,F=R&&R.exports===A,D=F&&d.process,j=function(){try{return D&&D.binding&&D.binding("util")}catch(t){}}(),G=j&&j.isTypedArray;function k(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function U(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}function V(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var B,q,z,Y=Array.prototype,X=Function.prototype,W=Object.prototype,J=y["__core-js_shared__"],H=X.toString,K=W.hasOwnProperty,$=(B=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",Z=W.toString,Q=RegExp("^"+H.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=F?y.Buffer:void 0,et=y.Symbol,nt=y.Uint8Array,rt=W.propertyIsEnumerable,it=Y.splice,ot=et?et.toStringTag:void 0,st=Object.getOwnPropertySymbols,at=tt?tt.isBuffer:void 0,ut=(q=Object.keys,z=Object,function(t){return q(z(t))}),ct=jt(y,"DataView"),lt=jt(y,"Map"),pt=jt(y,"Promise"),ht=jt(y,"Set"),ft=jt(y,"WeakMap"),dt=jt(Object,"create"),gt=Vt(ct),yt=Vt(lt),_t=Vt(pt),mt=Vt(ht),vt=Vt(ft),Et=et?et.prototype:void 0,It=Et?Et.valueOf:void 0;function xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ct(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Ct;++e<n;)this.add(t[e])}function St(t){var e=this.__data__=new bt(t);this.size=e.size}function Nt(t,e){var n=zt(t),r=!n&&qt(t),i=!n&&!r&&Yt(t),o=!n&&!r&&!i&&$t(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=a.length;for(var c in t)!e&&!K.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ut(c,u))||a.push(c);return a}function Tt(t,e){for(var n=t.length;n--;)if(Bt(t[n][0],e))return n;return-1}function Lt(t){return null==t?void 0===t?l:a:ot&&ot in Object(t)?function(t){var e=K.call(t,ot),n=t[ot];try{var r=!(t[ot]=void 0)}catch(t){}var i=Z.call(t);r&&(e?t[ot]=n:delete t[ot]);return i}(t):(e=t,Z.call(e));var e}function Ot(t){return Ht(t)&&Lt(t)==m}function Mt(t,e,n,r,i){return t===e||(null==t||null==e||!Ht(t)&&!Ht(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var s=zt(t),a=zt(e),u=s?v:kt(t),c=a?v:kt(e),l=(u=u==m?S:u)==S,p=(c=c==m?S:c)==S,h=u==c;if(h&&Yt(t)){if(!Yt(e))return!1;l=!(s=!0)}if(h&&!l)return o||(o=new St),s||$t(t)?Rt(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case M:return!(t.byteLength!=e.byteLength||!o(new nt(t),new nt(e)));case I:case x:case w:return Bt(+t,+e);case b:return t.name==e.name&&t.message==e.message;case N:case L:return t==e+"";case C:var a=U;case T:var u=r&E;if(a||(a=V),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=_,s.set(t,e);var l=Rt(a(t),a(e),r,i,o,s);return s.delete(t),l;case O:if(It)return It.call(t)==It.call(e)}return!1}(t,e,u,n,r,i,o);if(!(n&E)){var f=l&&K.call(t,"__wrapped__"),d=p&&K.call(e,"__wrapped__");if(f||d){var g=f?t.value():t,y=d?e.value():e;return o||(o=new St),i(g,y,n,r,o)}}if(!h)return!1;return o||(o=new St),function(t,e,n,r,i,o){var s=n&E,a=Ft(t),u=a.length,c=Ft(e).length;if(u!=c&&!s)return!1;for(var l=u;l--;){var p=a[l];if(!(s?p in e:K.call(e,p)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=s;++l<u;){p=a[l];var g=t[p],y=e[p];if(r)var _=s?r(y,g,p,e,t,o):r(g,y,p,t,e,o);if(!(void 0===_?g===y||i(g,y,n,r,o):_)){f=!1;break}d||(d="constructor"==p)}if(f&&!d){var m=t.constructor,v=e.constructor;m!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v)&&(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o)}(t,e,n,r,Mt,i))}function Pt(t){return!(!Jt(t)||(e=t,$&&$ in e))&&(Xt(t)?Q:h).test(Vt(t));var e}function At(t){if(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||W,e!==r)return ut(t);var e,n,r,i=[];for(var o in Object(t))K.call(t,o)&&"constructor"!=o&&i.push(o);return i}function Rt(t,e,r,i,o,s){var n=r&E,a=t.length,u=e.length;if(a!=u&&!(n&&a<u))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var l=-1,p=!0,h=r&_?new wt:void 0;for(s.set(t,e),s.set(e,t);++l<a;){var f=t[l],d=e[l];if(i)var g=n?i(d,f,l,e,t,s):i(f,d,l,t,e,s);if(void 0!==g){if(g)continue;p=!1;break}if(h){if(!k(e,function(t,e){if(n=e,!h.has(n)&&(f===t||o(f,t,r,i,s)))return h.push(e);var n})){p=!1;break}}else if(f!==d&&!o(f,d,r,i,s)){p=!1;break}}return s.delete(t),s.delete(e),p}function Ft(t){return n=Gt,r=Zt(e=t),zt(e)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(e));var e,n,r}function Dt(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function jt(t,e){var n,r,i=(r=e,null==(n=t)?void 0:n[r]);return Pt(i)?i:void 0}xt.prototype.clear=function(){this.__data__=dt?dt(null):{},this.size=0},xt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},xt.prototype.get=function(t){var e=this.__data__;if(dt){var n=e[t];return n===r?void 0:n}return K.call(e,t)?e[t]:void 0},xt.prototype.has=function(t){var e=this.__data__;return dt?void 0!==e[t]:K.call(e,t)},xt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=dt&&void 0===e?r:e,this},bt.prototype.clear=function(){this.__data__=[],this.size=0},bt.prototype.delete=function(t){var e=this.__data__,n=Tt(e,t);return!(n<0||(n==e.length-1?e.pop():it.call(e,n,1),--this.size,0))},bt.prototype.get=function(t){var e=this.__data__,n=Tt(e,t);return n<0?void 0:e[n][1]},bt.prototype.has=function(t){return-1<Tt(this.__data__,t)},bt.prototype.set=function(t,e){var n=this.__data__,r=Tt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Ct.prototype.clear=function(){this.size=0,this.__data__={hash:new xt,map:new(lt||bt),string:new xt}},Ct.prototype.delete=function(t){var e=Dt(this,t).delete(t);return this.size-=e?1:0,e},Ct.prototype.get=function(t){return Dt(this,t).get(t)},Ct.prototype.has=function(t){return Dt(this,t).has(t)},Ct.prototype.set=function(t,e){var n=Dt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},wt.prototype.add=wt.prototype.push=function(t){return this.__data__.set(t,r),this},wt.prototype.has=function(t){return this.__data__.has(t)},St.prototype.clear=function(){this.__data__=new bt,this.size=0},St.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},St.prototype.get=function(t){return this.__data__.get(t)},St.prototype.has=function(t){return this.__data__.has(t)},St.prototype.set=function(t,e){var n=this.__data__;if(n instanceof bt){var r=n.__data__;if(!lt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ct(r)}return n.set(t,e),this.size=n.size,this};var Gt=st?function(e){return null==e?[]:(e=Object(e),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}(st(e),function(t){return rt.call(e,t)}))}:function(){return[]},kt=Lt;function Ut(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||f.test(t))&&-1<t&&t%1==0&&t<e}function Vt(t){if(null!=t){try{return H.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Bt(t,e){return t===e||t!=t&&e!=e}(ct&&kt(new ct(new ArrayBuffer(1)))!=P||lt&&kt(new lt)!=C||pt&&kt(pt.resolve())!=u||ht&&kt(new ht)!=T||ft&&kt(new ft)!=p)&&(kt=function(t){var e=Lt(t),n=e==S?t.constructor:void 0,r=n?Vt(n):"";if(r)switch(r){case gt:return P;case yt:return C;case _t:return u;case mt:return T;case vt:return p}return e});var qt=Ot(function(){return arguments}())?Ot:function(t){return Ht(t)&&K.call(t,"callee")&&!rt.call(t,"callee")},zt=Array.isArray;var Yt=at||function(){return!1};function Xt(t){if(!Jt(t))return!1;var e=Lt(t);return e==o||e==s||e==i||e==c}function Wt(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=n}function Jt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ht(t){return null!=t&&"object"==typeof t}var Kt,$t=G?(Kt=G,function(t){return Kt(t)}):function(t){return Ht(t)&&Wt(t.length)&&!!e[Lt(t)]};function Zt(t){return null!=(e=t)&&Wt(e.length)&&!Xt(e)?Nt(t):At(t);var e}Qt.exports=function(t,e){return Mt(t,e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],51:[function(t,e,n){"use strict";e.exports=function(r){var t=r.length;if(t<3){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return 2===t&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:e}for(var i=new Array(t),n=0;n<t;++n)i[n]=n;i.sort(function(t,e){var n=r[t][0]-r[e][0];return n||r[t][1]-r[e][1]});for(var o=[i[0],i[1]],s=[i[0],i[1]],n=2;n<t;++n){for(var a=i[n],u=r[a],c=o.length;1<c&&f(r[o[c-2]],r[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(a),c=s.length;1<c&&0<=f(r[s[c-2]],r[s[c-1]],u);)c-=1,s.pop();s.push(a)}for(var e=new Array(s.length+o.length-2),l=0,n=0,p=o.length;n<p;++n)e[l++]=o[n];for(var h=s.length-2;0<h;--h)e[l++]=s[h];return e};var f=t("robust-orientation")[3]},{"robust-orientation":57}],52:[function(t,e,c){(function(i){function o(t,e){for(var n=0,r=t.length-1;0<=r;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function s(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}c.resolve=function(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){var r=0<=n?arguments[n]:i.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,e="/"===r.charAt(0))}return(e?"/":"")+(t=o(s(t.split("/"),function(t){return!!t}),!e).join("/"))||"."},c.normalize=function(t){var e=c.isAbsolute(t),n="/"===r(t,-1);return(t=o(s(t.split("/"),function(t){return!!t}),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},c.isAbsolute=function(t){return"/"===t.charAt(0)},c.join=function(){var t=Array.prototype.slice.call(arguments,0);return c.normalize(s(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},c.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;0<=n&&""===t[n];n--);return n<e?[]:t.slice(e,n-e+1)}t=c.resolve(t).substr(1),e=c.resolve(e).substr(1);for(var r=n(t.split("/")),i=n(e.split("/")),o=Math.min(r.length,i.length),s=o,a=0;a<o;a++)if(r[a]!==i[a]){s=a;break}var u=[];for(a=s;a<r.length;a++)u.push("..");return(u=u.concat(i.slice(s))).join("/")},c.sep="/",c.delimiter=":",c.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;1<=o;--o)if(47===(e=t.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},c.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;0<=e;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},c.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,s=t.length-1;0<=s;--s){var a=t.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=s+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var r="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:54}],53:[function(t,e,n){e.exports=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],c=e[s][0],l=e[s][1];r<u!=r<l&&n<(c-a)*(r-u)/(l-u)+a&&(i=!i)}return i}},{}],54:[function(t,e,n){var r,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c,l=[],p=!1,h=-1;function f(){p&&c&&(p=!1,c.length?l=c.concat(l):h=-1,l.length&&d())}function d(){if(!p){var t=u(f);p=!0;for(var e=l.length;e;){for(c=l,l=[];++h<e;)c&&c[h].run();h=-1,e=l.length}c=null,p=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new g(t,e)),1!==l.length||p||u(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],55:[function(t,e,n){var r,i;r=this,i=function(){"use strict";function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function o(t,e){return t<e?-1:e<t?1:0}return function(t,e,n,r,i){!function t(e,n,r,i,o){for(;r<i;){if(600<i-r){var s=i-r+1,a=n-r+1,u=Math.log(s),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(s-c)/s)*(a-s/2<0?-1:1),p=Math.max(r,Math.floor(n-a*c/s+l)),h=Math.min(i,Math.floor(n+(s-a)*c/s+l));t(e,n,p,h,o)}var f=e[n],d=r,g=i;for(y(e,r,n),0<o(e[i],f)&&y(e,r,i);d<g;){for(y(e,d,g),d++,g--;o(e[d],f)<0;)d++;for(;0<o(e[g],f);)g--}0===o(e[r],f)?y(e,r,g):y(e,++g,i),g<=n&&(r=g+1),n<=g&&(i=g-1)}}(t,e,n||0,r||t.length-1,i||o)}},"object"==typeof n&&void 0!==e?e.exports=i():r.quickselect=i()},{}],56:[function(t,e,n){"use strict";e.exports=r,e.exports.default=r;var a=t("quickselect");function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function l(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function f(t,e){_(t,0,t.children.length,e,t)}function _(t,e,n,r,i){i||(i=g(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],p(i,t.leaf?r(o):o);return i}function p(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function o(t,e){return t.minX-e.minX}function s(t,e){return t.minY-e.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function c(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,a(t,o,e,n,i),s.push(e,o,o,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!c(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],c(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):d(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!c(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],c(t,s=e.leaf?n(o):o)){if(e.leaf||d(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&-1!==(i=l(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!d(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,s=(r=s).children[0])}return this},toBBox:function(t){return t},compareMinX:o,compareMinY:s,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return f(i=g(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=g([])).leaf=!1,i.height=r;var a,u,c,l,p=Math.ceil(o/s),h=p*Math.ceil(Math.sqrt(s));for(y(t,e,n,h,this.compareMinX),a=e;a<=n;a+=h)for(y(t,a,c=Math.min(a+h-1,n),p,this.compareMinY),u=a;u<=c;u+=p)l=Math.min(u+p-1,c),i.children.push(this._build(t,u,l,r-1));return f(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,l,p,h,f;r.push(e),!e.leaf&&r.length-1!==n;){for(l=p=1/0,i=0,o=e.children.length;i<o;i++)u=m(s=e.children[i]),h=t,f=s,(c=(Math.max(f.maxX,h.maxX)-Math.min(f.minX,h.minX))*(Math.max(f.maxY,h.maxY)-Math.min(f.minY,h.minY))-u)<p?(p=c,l=u<l?u:l,a=s):c===p&&u<l&&(l=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),p(s,i);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=g(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,f(n,this.toBBox),f(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,f(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,c,l,p,h,f,d,g,y;for(u=c=1/0,r=e;r<=n-e;r++)i=_(t,0,r,this.toBBox),o=_(t,r,n,this.toBBox),p=i,h=o,void 0,f=Math.max(p.minX,h.minX),d=Math.max(p.minY,h.minY),g=Math.min(p.maxX,h.maxX),y=Math.min(p.maxY,h.maxY),s=Math.max(0,g-f)*Math.max(0,y-d),a=m(i)+m(o),s<u?(u=s,l=r,c=a<c?a:c):s===u&&a<c&&(c=a,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:o,i=t.leaf?this.compareMinY:s;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=_(t,0,e,s),u=_(t,n-e,n,s),c=h(a)+h(u);for(i=e;i<n-e;i++)o=t.children[i],p(a,t.leaf?s(o):o),c+=h(a);for(i=n-e-1;e<=i;i--)o=t.children[i],p(u,t.leaf?s(o):o),c+=h(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)p(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():f(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},{quickselect:55}],57:[function(t,o,e){"use strict";var l=t("two-product"),p=t("robust-sum"),h=t("robust-scale"),f=t("robust-subtract");function d(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function g(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",g(t.slice(0,e)),",",g(t.slice(e)),")"].join("")}function y(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",g(y(d(t,n))),",",(r=n,1&r?"-":""),t[0][n],")"].join(""));return e;var r}function s(t){for(var e=[],n=[],r=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),i=[],o=0;o<t;++o)0==(1&o)?e.push.apply(e,y(d(r,o))):n.push.apply(n,y(d(r,o))),i.push("m"+o);var s=g(e),a=g(n),u="orientation"+t+"Exact",c=["function ",u,"(",i.join(),"){var p=",s,",n=",a,",d=sub(p,n);return d[d.length-1];};return ",u].join("");return new Function("sum","prod","scale","sub",c)(p,l,h,f)}var u=s(3),I=s(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(0<i){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(0<=o)return s;r=-(i+o)}var a=33306690738754716e-32*r;return a<=s||s<=-a?s:u(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],a=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],l=t[2]-r[2],p=e[2]-r[2],h=n[2]-r[2],f=o*c,d=s*u,g=s*a,y=i*c,_=i*u,m=o*a,v=l*(f-d)+p*(g-y)+h*(_-m),E=7771561172376103e-31*((Math.abs(f)+Math.abs(d))*Math.abs(l)+(Math.abs(g)+Math.abs(y))*Math.abs(p)+(Math.abs(_)+Math.abs(m))*Math.abs(h));return E<v||E<-v?v:I(t,e,n,r)}];!function(){for(;a.length<=5;)a.push(s(a.length));for(var t=[],e=["slow"],n=0;n<=5;++n)t.push("a"+n),e.push("o"+n);var r=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)r.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(r.join(""));var i=Function.apply(void 0,e);for(o.exports=i.apply(void 0,[function(t){var e=a[t.length];return e||(e=a[t.length]=s(t.length)),e.apply(void 0,t)}].concat(a)),n=0;n<=5;++n)o.exports[n]=a[n]}()},{"robust-scale":58,"robust-subtract":59,"robust-sum":60,"two-product":64}],58:[function(t,e,n){"use strict";var g=t("two-product"),y=t("two-sum");e.exports=function(t,e){var n=t.length;if(1===n){var r=g(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;g(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){g(t[u],e,s);var c=o[1];y(c,s[0],o),o[0]&&(i[a++]=o[0]);var l=s[1],p=o[1],h=l+p,f=h-l,d=p-f;o[1]=h,d&&(i[a++]=d)}o[1]&&(i[a++]=o[1]);0===a&&(i[a++]=0);return i.length=a,i}},{"two-product":64,"two-sum":65}],59:[function(t,e,n){"use strict";e.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);if(i)return[i,n];return[n]}(t[0],-e[0]);var i,o,s=new Array(n+r),a=0,u=0,c=0,l=Math.abs,p=t[u],h=l(p),f=-e[c],d=l(f);h<d?(o=p,(u+=1)<n&&(p=t[u],h=l(p))):(o=f,(c+=1)<r&&(f=-e[c],d=l(f)));u<n&&h<d||r<=c?(i=p,(u+=1)<n&&(p=t[u],h=l(p))):(i=f,(c+=1)<r&&(f=-e[c],d=l(f)));var g,y,_=i+o,m=_-i,v=o-m,E=v,I=_;for(;u<n&&c<r;)h<d?(i=p,(u+=1)<n&&(p=t[u],h=l(p))):(i=f,(c+=1)<r&&(f=-e[c],d=l(f))),(v=(o=E)-(m=(_=i+o)-i))&&(s[a++]=v),E=I-((g=I+_)-(y=g-I))+(_-y),I=g;for(;u<n;)(v=(o=E)-(m=(_=(i=p)+o)-i))&&(s[a++]=v),E=I-((g=I+_)-(y=g-I))+(_-y),I=g,(u+=1)<n&&(p=t[u]);for(;c<r;)(v=(o=E)-(m=(_=(i=f)+o)-i))&&(s[a++]=v),E=I-((g=I+_)-(y=g-I))+(_-y),I=g,(c+=1)<r&&(f=-e[c]);E&&(s[a++]=E);I&&(s[a++]=I);a||(s[a++]=0);return s.length=a,s}},{}],60:[function(t,e,n){"use strict";e.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);if(i)return[i,n];return[n]}(t[0],e[0]);var i,o,s=new Array(n+r),a=0,u=0,c=0,l=Math.abs,p=t[u],h=l(p),f=e[c],d=l(f);h<d?(o=p,(u+=1)<n&&(p=t[u],h=l(p))):(o=f,(c+=1)<r&&(f=e[c],d=l(f)));u<n&&h<d||r<=c?(i=p,(u+=1)<n&&(p=t[u],h=l(p))):(i=f,(c+=1)<r&&(f=e[c],d=l(f)));var g,y,_=i+o,m=_-i,v=o-m,E=v,I=_;for(;u<n&&c<r;)h<d?(i=p,(u+=1)<n&&(p=t[u],h=l(p))):(i=f,(c+=1)<r&&(f=e[c],d=l(f))),(v=(o=E)-(m=(_=i+o)-i))&&(s[a++]=v),E=I-((g=I+_)-(y=g-I))+(_-y),I=g;for(;u<n;)(v=(o=E)-(m=(_=(i=p)+o)-i))&&(s[a++]=v),E=I-((g=I+_)-(y=g-I))+(_-y),I=g,(u+=1)<n&&(p=t[u]);for(;c<r;)(v=(o=E)-(m=(_=(i=f)+o)-i))&&(s[a++]=v),E=I-((g=I+_)-(y=g-I))+(_-y),I=g,(c+=1)<r&&(f=e[c]);E&&(s[a++]=E);I&&(s[a++]=I);a||(s[a++]=0);return s.length=a,s}},{}],61:[function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||i,0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)}function i(t,e){return t<e?-1:e<t?1:0}e.exports=r,(e.exports.default=r).prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];0<t;){var i=t-1>>1,o=e[i];if(0<=n(r,o))break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(a=e[o=s]),0<=n(a,i))break;e[t]=a,t=o}e[t]=i}}},{}],62:[function(t,e,n){var i=e.exports=function(t){return new o(t)};function o(t){this.value=t}function r(t,u,c){var l=[],p=[],h=!0;return function r(e){var t=c?f(e):e,i={},n=!0,o={node:t,node_:e,path:[].concat(l),parent:p[p.length-1],parents:p,key:l.slice(-1)[0],isRoot:0===l.length,level:l.length,circular:null,update:function(t,e){o.isRoot||(o.parent.node[o.key]=t),o.node=t,e&&(n=!1)},delete:function(t){delete o.parent.node[o.key],t&&(n=!1)},remove:function(t){g(o.parent.node)?o.parent.node.splice(o.key,1):delete o.parent.node[o.key],t&&(n=!1)},keys:null,before:function(t){i.before=t},after:function(t){i.after=t},pre:function(t){i.pre=t},post:function(t){i.post=t},stop:function(){h=!1},block:function(){n=!1}};if(!h)return o;function s(){if("object"==typeof o.node&&null!==o.node){o.keys&&o.node_===o.node||(o.keys=d(o.node)),o.isLeaf=0==o.keys.length;for(var t=0;t<p.length;t++)if(p[t].node_===e){o.circular=p[t];break}}else o.isLeaf=!0,o.keys=null;o.notLeaf=!o.isLeaf,o.notRoot=!o.isRoot}s();var a=u.call(o,o.node);return void 0!==a&&o.update&&o.update(a),i.before&&i.before.call(o,o.node),n&&("object"!=typeof o.node||null===o.node||o.circular||(p.push(o),s(),y(o.keys,function(t,e){l.push(t),i.pre&&i.pre.call(o,o.node[t],t);var n=r(o.node[t]);c&&_.call(o.node,t)&&(o.node[t]=n.node),n.isLast=e==o.keys.length-1,n.isFirst=0==e,i.post&&i.post.call(o,n),l.pop()}),p.pop()),i.after&&i.after.call(o,o.node)),o}(t).node}function f(e){if("object"==typeof e&&null!==e){var n;if(g(e))n=[];else if("[object Date]"===s(e))n=new Date(e.getTime?e.getTime():e);else if("[object RegExp]"===s(e))n=new RegExp(e);else if("[object Error]"===s(e))n={message:e.message};else if("[object Boolean]"===s(e))n=new Boolean(e);else if("[object Number]"===s(e))n=new Number(e);else if("[object String]"===s(e))n=new String(e);else if(Object.create&&Object.getPrototypeOf)n=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)n={};else{var t=e.constructor&&e.constructor.prototype||e.__proto__||{},r=function(){};r.prototype=t,n=new r}return y(d(e),function(t){n[t]=e[t]}),n}return e}o.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!_.call(e,r)){e=void 0;break}e=e[r]}return e},o.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!_.call(e,r))return!1;e=e[r]}return!0},o.prototype.set=function(t,e){for(var n=this.value,r=0;r<t.length-1;r++){var i=t[r];_.call(n,i)||(n[i]={}),n=n[i]}return n[t[r]]=e},o.prototype.map=function(t){return r(this.value,t,!0)},o.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},o.prototype.reduce=function(e,t){var n=1===arguments.length,r=n?this.value:t;return this.forEach(function(t){this.isRoot&&n||(r=e.call(this,r,t))}),r},o.prototype.paths=function(){var e=[];return this.forEach(function(t){e.push(this.path)}),e},o.prototype.nodes=function(){var e=[];return this.forEach(function(t){e.push(this.node)}),e},o.prototype.clone=function(){var i=[],o=[];return function e(n){for(var t=0;t<i.length;t++)if(i[t]===n)return o[t];if("object"==typeof n&&null!==n){var r=f(n);return i.push(n),o.push(r),y(d(n),function(t){r[t]=e(n[t])}),i.pop(),o.pop(),r}return n}(this.value)};var d=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function s(t){return Object.prototype.toString.call(t)}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},y=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};y(d(o.prototype),function(r){i[r]=function(t){var e=[].slice.call(arguments,1),n=new o(t);return n[r].apply(n,e)}});var _=Object.hasOwnProperty||function(t,e){return e in t}},{}],63:[function(t,e,n){var r;r=this,function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function s(t){return null===t?Rt:t.color}function a(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function l(t){return null===t?null:t.right}function p(){this.root_=null,this.size_=0}function h(){}function f(){this.array_=[],arguments[0]instanceof Et&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var _=function(){};_.prototype.interfaces_=function(){return[]},_.prototype.getClass=function(){return _},_.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var m=function(e){function t(t){e.call(this,t),this.name="IllegalArgumentException",this.message=t,this.stack=(new e).stack}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(Error),v=function(){},E={MAX_VALUE:{configurable:!0}};v.isNaN=function(t){return Number.isNaN(t)},v.doubleToLongBits=function(t){return t},v.longBitsToDouble=function(t){return t},v.isInfinite=function(t){return!Number.isFinite(t)},E.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(v,E);var I=function(){},x=function(){},b=function(){},C=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},w={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};C.prototype.setOrdinate=function(t,e){switch(t){case C.X:this.x=e;break;case C.Y:this.y=e;break;case C.Z:this.z=e;break;default:throw new m("Invalid ordinate index: "+t)}},C.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!_.equalsWithTolerance(this.x,e.x,n)&&!!_.equalsWithTolerance(this.y,e.y,n)}},C.prototype.getOrdinate=function(t){switch(t){case C.X:return this.x;case C.Y:return this.y;case C.Z:return this.z}throw new m("Invalid ordinate index: "+t)},C.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||v.isNaN(this.z))&&v.isNaN(t.z)},C.prototype.equals=function(t){return t instanceof C&&this.equals2D(t)},C.prototype.equalInZ=function(t,e){return _.equalsWithTolerance(this.z,t.z,e)},C.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},C.prototype.clone=function(){},C.prototype.copy=function(){return new C(this)},C.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},C.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},C.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},C.prototype.hashCode=function(){var t=17;return 37*(t=37*t+C.hashCode(this.x))+C.hashCode(this.y)},C.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},C.prototype.interfaces_=function(){return[I,x,e]},C.prototype.getClass=function(){return C},C.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=v.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},w.DimensionalComparator.get=function(){return S},w.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},w.NULL_ORDINATE.get=function(){return v.NaN},w.X.get=function(){return 0},w.Y.get=function(){return 1},w.Z.get=function(){return 2},Object.defineProperties(C,w);var S=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=t;if(2!==e&&3!==e)throw new m("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};S.prototype.compare=function(t,e){var n=t,r=e,i=S.compare(n.x,r.x);if(0!==i)return i;var o=S.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:S.compare(n.z,r.z)},S.prototype.interfaces_=function(){return[b]},S.prototype.getClass=function(){return S},S.compare=function(t,e){return t<e?-1:e<t?1:v.isNaN(t)?v.isNaN(e)?0:-1:v.isNaN(e)?1:0};var N=function(){};N.prototype.create=function(){},N.prototype.interfaces_=function(){return[]},N.prototype.getClass=function(){return N};var T=function(){},L={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T},T.toLocationSymbol=function(t){switch(t){case T.EXTERIOR:return"e";case T.BOUNDARY:return"b";case T.INTERIOR:return"i";case T.NONE:return"-"}throw new m("Unknown location value: "+t)},L.INTERIOR.get=function(){return 0},L.BOUNDARY.get=function(){return 1},L.EXTERIOR.get=function(){return 2},L.NONE.get=function(){return-1},Object.defineProperties(T,L);var O=function(t,e){return t.interfaces_&&-1<t.interfaces_().indexOf(e)},M=function(){},P={LOG_10:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.log10=function(t){var e=Math.log(t);return v.isInfinite(e)?e:v.isNaN(e)?e:e/M.LOG_10},M.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},M.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:n<t?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:o<r?o:r}},M.wrap=function(t,e){return t<0?e- -t%e:t%e},M.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return r<e&&(r=e),r<n&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return u<o&&(u=o),u<s&&(u=s),u<a&&(u=a),u}},M.average=function(t,e){return(t+e)/2},P.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(M,P);var A=function(t){this.str=t};A.prototype.append=function(t){this.str+=t},A.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},A.prototype.toString=function(t){return this.str};var R=function(t){this.value=t};R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},R.isNaN=function(t){return Number.isNaN(t)};var F=function(){};F.isWhitespace=function(t){return t<=32&&0<=t||127===t},F.toUpperCase=function(t){return t.toUpperCase()};var D=function t(){if(this._hi=0,(this._lo=0)===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},j={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};D.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},D.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=D.magnitude(n._hi),i=D.TEN.pow(r);(n=n.divide(i)).gt(D.TEN)?(n=n.divide(D.TEN),r+=1):n.lt(D.ONE)&&(n=n.multiply(D.TEN),r-=1);for(var o=r+1,s=new A,a=D.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,p=0;9<c?(l=!0,p="9"):p="0"+c,s.append(p),n=n.subtract(D.valueOf(c)).multiply(D.TEN),l&&n.selfAdd(D.TEN);var h=!0,f=D.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(h=!1),!h)break}return e[0]=r,s.toString()},D.prototype.sqr=function(){return this.multiply(this)},D.prototype.doubleValue=function(){return this._hi+this._lo},D.prototype.subtract=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},D.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},D.prototype.isZero=function(){return 0===this._hi&&0===this._lo},D.prototype.selfSubtract=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},D.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},D.prototype.min=function(t){return this.le(t)?this:t},D.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n,r,i,o,s=arguments[0],a=arguments[1],u=null,c=null,l=null,p=null;return i=this._hi/s,p=(u=(l=D.SPLIT*i)-(u=l-i))*(c=(p=D.SPLIT*s)-(c=p-s))-(o=i*s)+u*(r=s-c)+(n=i-u)*c+n*r,p=i+(l=(this._hi-o-p+this._lo-i*a)/s),this._hi=p,this._lo=i-p+l,this}},D.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},D.prototype.divide=function(){if(arguments[0]instanceof D){var t,e,n,r,i=arguments[0],o=null,s=null,a=null,u=null;return t=(n=this._hi/i._hi)-(o=(a=D.SPLIT*n)-(o=a-n)),u=o*(s=(u=D.SPLIT*i._hi)-(s=u-i._hi))-(r=n*i._hi)+o*(e=i._hi-s)+t*s+t*e,a=(this._hi-r-u+this._lo-n*i._lo)/i._hi,new D(u=n+a,n-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return v.isNaN(c)?D.createNaN():D.copy(this).selfDivide(c,0)}},D.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},D.prototype.pow=function(t){if(0===t)return D.valueOf(1);var e=new D(this),n=D.valueOf(1),r=Math.abs(t);if(1<r)for(;0<r;)r%2==1&&n.selfMultiply(e),0<(r/=2)&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},D.prototype.ceil=function(){if(this.isNaN())return D.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new D(t,e)},D.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},D.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},D.prototype.setValue=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},D.prototype.max=function(t){return this.ge(t)?this:t},D.prototype.sqrt=function(){if(this.isZero())return D.valueOf(0);if(this.isNegative())return D.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=D.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},D.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,n,r,i,o,s=arguments[0],a=null;return a=(r=this._hi+s)-(i=r-this._hi),n=(o=(a=s-i+(this._hi-a))+this._lo)+(r-(e=r+o)),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(2===arguments.length){var u,c,l,p,h=arguments[0],f=arguments[1],d=null,g=null,y=null;l=this._hi+h,c=this._lo+f,g=l-(y=l-this._hi),d=c-(p=c-this._lo);var _=(u=l+(y=(g=h-y+(this._hi-g))+c))+(y=(d=f-p+(this._lo-d))+(y+(l-u))),m=y+(u-_);return this._hi=_,this._lo=m,this}},D.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n,r,i=arguments[0],o=arguments[1],s=null,a=null,u=null,c=null;s=(u=D.SPLIT*this._hi)-this._hi,c=D.SPLIT*i,s=u-s,n=this._hi-s,a=c-i;var l=(u=this._hi*i)+(c=s*(a=c-a)-u+s*(r=i-a)+n*a+n*r+(this._hi*o+this._lo*i)),p=c+(s=u-l);return this._hi=l,this._lo=p,this}},D.prototype.selfSqr=function(){return this.selfMultiply(this)},D.prototype.floor=function(){if(this.isNaN())return D.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new D(t,e)},D.prototype.negate=function(){return this.isNaN()?this:new D(-this._hi,-this._lo)},D.prototype.clone=function(){},D.prototype.multiply=function(){if(arguments[0]instanceof D){var t=arguments[0];return t.isNaN()?D.createNaN():D.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return v.isNaN(e)?D.createNaN():D.copy(this).selfMultiply(e,0)}},D.prototype.isNaN=function(){return v.isNaN(this._hi)},D.prototype.intValue=function(){return Math.trunc(this._hi)},D.prototype.toString=function(){var t=D.magnitude(this._hi);return-3<=t&&t<=20?this.toStandardNotation():this.toSciNotation()},D.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+D.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+D.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},D.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=D.SPLIT*n)-(i=s-n)),o=(a=D.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new D(u,n-u+s)},D.prototype.toSciNotation=function(){if(this.isZero())return D.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=D.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";1<n.length&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},D.prototype.abs=function(){return this.isNaN()?D.NaN:this.isNegative()?this.negate():new D(this)},D.prototype.isPositive=function(){return(0<this._hi||0===this._hi)&&0<this._lo},D.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},D.prototype.add=function(){if(arguments[0]instanceof D){var t=arguments[0];return D.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return D.copy(this).selfAdd(e)}},D.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof D){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},D.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},D.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},D.prototype.trunc=function(){return this.isNaN()?D.NaN:this.isPositive()?this.floor():this.ceil()},D.prototype.signum=function(){return 0<this._hi?1:this._hi<0?-1:0<this._lo?1:this._lo<0?-1:0},D.prototype.interfaces_=function(){return[e,I,x]},D.prototype.getClass=function(){return D},D.sqr=function(t){return D.valueOf(t).selfMultiply(t)},D.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return D.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new D(e)}},D.sqrt=function(t){return D.valueOf(t).sqrt()},D.parse=function(t){for(var e=0,n=t.length;F.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new D,s=0,a=0,u=0;!(n<=e);){var c=t.charAt(e);if(e++,F.isDigit(c)){var l=c-"0";o.selfMultiply(D.TEN),o.selfAdd(l),s++}else{if("."!==c){if("e"===c||"E"===c){var p=t.substring(e);try{u=R.parseInt(p)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+p+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}a=s}}var h=o,f=s-a-u;if(0===f)h=o;else if(0<f){var d=D.TEN.pow(f);h=o.divide(d)}else if(f<0){var g=D.TEN.pow(-f);h=o.multiply(g)}return r?h.negate():h},D.createNaN=function(){return new D(v.NaN,v.NaN)},D.copy=function(t){return new D(t)},D.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},D.stringOfChar=function(t,e){for(var n=new A,r=0;r<e;r++)n.append(t);return n.toString()},j.PI.get=function(){return new D(3.141592653589793,12246467991473532e-32)},j.TWO_PI.get=function(){return new D(6.283185307179586,24492935982947064e-32)},j.PI_2.get=function(){return new D(1.5707963267948966,6123233995736766e-32)},j.E.get=function(){return new D(2.718281828459045,14456468917292502e-32)},j.NaN.get=function(){return new D(v.NaN,v.NaN)},j.EPS.get=function(){return 123259516440783e-46},j.SPLIT.get=function(){return 134217729},j.MAX_PRINT_DIGITS.get=function(){return 32},j.TEN.get=function(){return D.valueOf(10)},j.ONE.get=function(){return D.valueOf(1)},j.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},j.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(D,j);var G=function(){},k={DP_SAFE_EPSILON:{configurable:!0}};G.prototype.interfaces_=function(){return[]},G.prototype.getClass=function(){return G},G.orientationIndex=function(t,e,n){var r=G.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=D.valueOf(e.x).selfAdd(-t.x),o=D.valueOf(e.y).selfAdd(-t.y),s=D.valueOf(n.x).selfAdd(-e.x),a=D.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},G.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},G.intersection=function(t,e,n,r){var i=D.valueOf(r.y).selfSubtract(n.y).selfMultiply(D.valueOf(e.x).selfSubtract(t.x)),o=D.valueOf(r.x).selfSubtract(n.x).selfMultiply(D.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=D.valueOf(r.x).selfSubtract(n.x).selfMultiply(D.valueOf(t.y).selfSubtract(n.y)),u=D.valueOf(r.y).selfSubtract(n.y).selfMultiply(D.valueOf(t.x).selfSubtract(n.x)),c=a.subtract(u).selfDivide(s).doubleValue(),l=D.valueOf(t.x).selfAdd(D.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),p=D.valueOf(e.x).selfSubtract(t.x).selfMultiply(D.valueOf(t.y).selfSubtract(n.y)),h=D.valueOf(e.y).selfSubtract(t.y).selfMultiply(D.valueOf(t.x).selfSubtract(n.x)),f=p.subtract(h).selfDivide(s).doubleValue(),d=D.valueOf(n.y).selfAdd(D.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new C(l,d)},G.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(0<i){if(o<=0)return G.signum(s);r=i+o}else{if(!(i<0))return G.signum(s);if(0<=o)return G.signum(s);r=-i-o}var a=G.DP_SAFE_EPSILON*r;return a<=s||a<=-s?G.signum(s):2},G.signum=function(t){return 0<t?1:t<0?-1:0},k.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(G,k);var U=function(){},V={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};V.X.get=function(){return 0},V.Y.get=function(){return 1},V.Z.get=function(){return 2},V.M.get=function(){return 3},U.prototype.setOrdinate=function(t,e,n){},U.prototype.size=function(){},U.prototype.getOrdinate=function(t,e){},U.prototype.getCoordinate=function(){},U.prototype.getCoordinateCopy=function(t){},U.prototype.getDimension=function(){},U.prototype.getX=function(t){},U.prototype.clone=function(){},U.prototype.expandEnvelope=function(t){},U.prototype.copy=function(){},U.prototype.getY=function(t){},U.prototype.toCoordinateArray=function(){},U.prototype.interfaces_=function(){return[x]},U.prototype.getClass=function(){return U},Object.defineProperties(U,V);var B=function(){},q=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(B),z=function(){};z.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},z.getProperty=function(t){return{"line.separator":"\n"}[t]};var Y=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof C&&arguments[1]instanceof C){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var p=arguments[0],h=arguments[1],f=arguments[2],d=arguments[3],g=p.y-h.y,y=h.x-p.x,_=p.x*h.y-h.x*p.y,m=f.y-d.y,v=d.x-f.x,E=f.x*d.y-d.x*f.y;this.x=y*E-v*_,this.y=m*_-g*E,this.w=g*v-m*y}};Y.prototype.getY=function(){var t=this.y/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new q;return t},Y.prototype.getX=function(){var t=this.x/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new q;return t},Y.prototype.getCoordinate=function(){var t=new C;return t.x=this.getX(),t.y=this.getY(),t},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-a*o,p=(o*c-u*s)/l,h=(a*s-i*c)/l;if(v.isNaN(p)||v.isInfinite(p)||v.isNaN(h)||v.isInfinite(h))throw new q;return new C(p,h)};var X=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof C){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},W={serialVersionUID:{configurable:!0}};X.prototype.getArea=function(){return this.getWidth()*this.getHeight()},X.prototype.equals=function(t){if(!(t instanceof X))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},X.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new X;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new X(e,r,n,i)},X.prototype.isNull=function(){return this._maxx<this._minx},X.prototype.getMaxX=function(){return this._maxx},X.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof X){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},X.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof C){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},X.prototype.getMinY=function(){return this._miny},X.prototype.getMinX=function(){return this._minx},X.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},X.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},X.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},X.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},X.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},X.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},X.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},X.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},X.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e<t?t:e},X.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},X.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof C){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},X.prototype.centre=function(){return this.isNull()?null:new C((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},X.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},X.prototype.getMaxY=function(){return this._maxy},X.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},X.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+C.hashCode(this._minx))+C.hashCode(this._maxx))+C.hashCode(this._miny))+C.hashCode(this._maxy)},X.prototype.interfaces_=function(){return[I,e]},X.prototype.getClass=function(){return X},X.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(u<c||l<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),u<c||l<a))}},W.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(X,W);var J={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},H=function(t){this.geometryFactory=t||new _e};H.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=J.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=J.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],$[n]&&(e=$[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},H.prototype.write=function(t){return this.extractGeometry(t)},H.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!K[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+K[e].apply(this,[t])+")"};var K={coordinate:function(t){return t.x+" "+t.y},point:function(t){return K.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+K.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+K.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},$={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(J.spaces);return this.geometryFactory.createPoint(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(J.trimParens,"$1"),r.push($.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(J.spaces),r.push(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(J.spaces),r.push(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(J.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(J.trimParens,"$1"),r.push($.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(J.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(J.trimParens,"$1"),n=$.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(J.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(J.trimParens,"$1"),r.push($.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Z=function(t){this.parser=new H(t)};Z.prototype.write=function(t){return this.parser.write(t)},Z.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(e){function t(t){e.call(this,t),this.name="RuntimeException",this.message=t,this.stack=(new e).stack}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(Error),tt=function(e){function t(){if(e.call(this),0===arguments.length)e.call(this);else if(1===arguments.length){var t=arguments[0];e.call(this,t)}}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new C,this._intPt[1]=new C,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new A;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return Z.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Z.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i<r?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i<r?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(u){function s(){u.apply(this,arguments)}return u&&(s.__proto__=u),((s.prototype=Object.create(u&&u.prototype)).constructor=s).prototype.isInSegmentEnvelopes=function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),n=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},s.prototype.computeIntersection=function(){if(3!==arguments.length)return u.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,X.intersects(e,n,t)&&0===at.orientationIndex(e,n,t)&&0===at.orientationIndex(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=u.POINT_INTERSECTION,null;this._result=u.NO_INTERSECTION},s.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},s.prototype.safeHCoordinateIntersection=function(e,n,r,i){var o=null;try{o=Y.intersection(e,n,r,i)}catch(t){if(!(t instanceof q))throw t;o=s.nearestEndpoint(e,n,r,i)}return o},s.prototype.intersection=function(t,e,n,r){var i=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(i)||(i=new C(s.nearestEndpoint(t,e,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i},s.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},s.prototype.checkDD=function(t,e,n,r,i){var o=G.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);z.out.println("DD in env = "+s+"  --------------------- "+o),1e-4<i.distance(o)&&z.out.println("Distance = "+i.distance(o))},s.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new C(t),o=new C(e),s=new C(n),a=new C(r),u=new C;this.normalizeToEnvCentre(i,o,s,a,u);var c=this.safeHCoordinateIntersection(i,o,s,a);return c.x+=u.x,c.y+=u.y,c},s.prototype.computeCollinearIntersection=function(t,e,n,r){var i=X.intersects(t,e,n),o=X.intersects(t,e,r),s=X.intersects(n,r,t),a=X.intersects(n,r,e);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,u.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=t,this._intPt[1]=e,u.COLLINEAR_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||a?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||s?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):u.NO_INTERSECTION},s.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,p=n.x>r.x?n.x:r.x,h=n.y>r.y?n.y:r.y,f=((c<o?o:c)+(a<p?a:p))/2,d=((l<s?s:l)+(u<h?u:h))/2;i.x=f,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},s.prototype.computeIntersect=function(t,e,n,r){if(this._isProper=!1,!X.intersects(t,e,n,r))return u.NO_INTERSECTION;var i=at.orientationIndex(t,e,n),o=at.orientationIndex(t,e,r);if(0<i&&0<o||i<0&&o<0)return u.NO_INTERSECTION;var s=at.orientationIndex(n,r,t),a=at.orientationIndex(n,r,e);return 0<s&&0<a||s<0&&a<0?u.NO_INTERSECTION:0===i&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,r):(0===i||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:0===i?this._intPt[0]=new C(n):0===o?this._intPt[0]=new C(r):0===s?this._intPt[0]=new C(t):0===a&&(this._intPt[0]=new C(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,r)),u.POINT_INTERSECTION)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.nearestEndpoint=function(t,e,n,r){var i=t,o=at.distancePointLine(t,n,r),s=at.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=at.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=at.distancePointLine(r,t,e))<o&&(o=s,i=r),i},s}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ot.signOfDet2x2(r,i,o,s)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:0<e?0<n?-i:i:0<n?i:-i;if(0===e||0===n)return 0<r?0<t?i:-i:0<t?-i:i;if(0<e?0<r?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):0<r?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):r<=e?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),0<t){if(!(0<n))return i;if(!(t<=n))return i}else{if(0<n)return-i;if(!(n<=t))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(e<r)return i;if((n-=s*t)+n<t){if(e<r+r)return i}else{if(r+r<e)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(r<e)return-i;if((t-=s*n)+t<n){if(r<e+e)return-i}else{if(e+e<r)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return r<n&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=ot.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),0<u&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==T.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?T.BOUNDARY:this._crossingCount%2==1?T.INTERIOR:T.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof C&&O(arguments[1],U)){for(var t=arguments[0],e=arguments[1],n=new st(t),r=new C,i=new C,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof C&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new st(s),c=1;c<a.length;c++){var l=a[c],p=a[c-1];if(u.countSegment(l,p),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var at=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,n){return G.orientationIndex(t,e,n)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(O(arguments[0],U)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new C,c=new C,l=new C;s.getCoordinate(0,c),s.getCoordinate(1,l);var p=c.x;l.x-=p;for(var h=0,f=1;f<a-1;f++)u.y=c.y,c.x=l.x,c.y=l.y,s.getCoordinate(f+1,l),l.x-=p,h+=c.x*(u.y-l.y);return h/2}},at.distanceLineLine=function(t,e,n,r){if(t.equals(e))return at.distancePointLine(t,n,r);if(n.equals(r))return at.distancePointLine(r,t,e);var i=!1;if(X.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||1<u||a<0||1<a)&&(i=!0)}}else i=!0;return i?M.min(at.distancePointLine(t,n,r),at.distancePointLine(e,n,r),at.distancePointLine(n,t,e),at.distancePointLine(r,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==T.EXTERIOR},at.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new C;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,c=a-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=a,o=u}return n},at.isCCW=function(t){var e=t.length-1;if(e<3)throw new m("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}for(var s=r;(s-=1)<0&&(s=e),t[s].equals2D(n)&&s!==r;);for(var a=r;t[a=(a+1)%e].equals2D(n)&&a!==r;);var u=t[s],c=t[a];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=at.computeOrientation(u,n,c);return 0===l?u.x>c.x:0<l},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},at.computeOrientation=function(t,e,n){return at.orientationIndex(t,e,n)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new m("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=at.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),c=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(c<=0)return o.distance(s);if(1<=c)return o.distance(a);var l=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(l)*Math.sqrt(u)}},at.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return at.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return at.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,ut);var ct=function(){};ct.prototype.filter=function(t){},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct};var lt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},pt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};lt.prototype.isGeometryCollection=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION},lt.prototype.getFactory=function(){return this._factory},lt.prototype.getGeometryN=function(t){return this},lt.prototype.getArea=function(){return 0},lt.prototype.isRectangle=function(){return!1},lt.prototype.equals=function(){if(arguments[0]instanceof lt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof lt))return!1;var n=e;return this.equalsExact(n)}},lt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},lt.prototype.geometryChanged=function(){this.apply(lt.geometryChangedFilter)},lt.prototype.geometryChangedAction=function(){this._envelope=null},lt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},lt.prototype.getLength=function(){return 0},lt.prototype.getNumGeometries=function(){return 1},lt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},lt.prototype.getUserData=function(){return this._userData},lt.prototype.getSRID=function(){return this._SRID},lt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},lt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION)throw new m("This method does not support GeometryCollection arguments")},lt.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},lt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},lt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},lt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)},lt.prototype.setSRID=function(t){this._SRID=t},lt.prototype.setUserData=function(t){this._userData=t},lt.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},lt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},lt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===lt.SORTINDEX_MULTIPOINT||this.getSortIndex()===lt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===lt.SORTINDEX_MULTIPOLYGON},lt.prototype.interfaces_=function(){return[x,I,e]},lt.prototype.getClass=function(){return lt},lt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},lt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},pt.serialVersionUID.get=function(){return 0x799ea46522854c00},pt.SORTINDEX_POINT.get=function(){return 0},pt.SORTINDEX_MULTIPOINT.get=function(){return 1},pt.SORTINDEX_LINESTRING.get=function(){return 2},pt.SORTINDEX_LINEARRING.get=function(){return 3},pt.SORTINDEX_MULTILINESTRING.get=function(){return 4},pt.SORTINDEX_POLYGON.get=function(){return 5},pt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},pt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},pt.geometryChangedFilter.get=function(){return ht},Object.defineProperties(lt,pt);var ht=function(){};ht.interfaces_=function(){return[ct]},ht.filter=function(t){t.geometryChangedAction()};var ft=function(){};ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return yt},gt.EndPointBoundaryNodeRule.get=function(){return _t},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return mt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MOD2_BOUNDARY_RULE.get=function(){return new yt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 0<t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var mt=function(){};mt.prototype.isInBoundary=function(t){return 1<t},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var vt=function(){};vt.prototype.isInBoundary=function(t){return 1===t},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var Et=function(){};Et.prototype.add=function(){},Et.prototype.addAll=function(){},Et.prototype.isEmpty=function(){},Et.prototype.iterator=function(){},Et.prototype.size=function(){},Et.prototype.toArray=function(){},Et.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var It=function(){};It.prototype.hasNext=function(){},It.prototype.next=function(){},It.prototype.remove=function(){};var xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Et);(r.prototype=new Error).name="NoSuchElementException";var bt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Et&&this.addAll(arguments[0])}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Et]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(t,arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Ct(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(xt),Ct=function(e){function t(t){e.call(this),this.arrayList_=t,this.position_=0}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(It),wt=function(v){function t(){if(v.call(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}v&&(t.__proto__=v),(t.prototype=Object.create(v&&v.prototype)).constructor=t;var e={coordArrayType:{configurable:!0}};return e.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(t){return this.get(t)},t.prototype.addAll=function(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=!1,r=t.iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return v.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var t=v.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){if(1===arguments.length){var t=arguments[0];v.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof C&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&1<=this.size()&&this.get(this.size()-1).equals2D(r))return null;v.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1];return this.add(i,o),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];if(arguments[2])for(var u=0;u<s.length;u++)this.add(s[u],a);else for(var c=s.length-1;0<=c;c--)this.add(s[c],a);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof C){var l=arguments[0],p=arguments[1];if(!arguments[2]){var h=this.size();if(0<h){if(0<l&&this.get(l-1).equals2D(p))return null;if(l<h&&this.get(l).equals2D(p))return null}}v.prototype.add.call(this,l,p)}}else if(4===arguments.length){var f=arguments[0],d=arguments[1],g=arguments[2],y=arguments[3],_=1;y<g&&(_=-1);for(var m=g;m!==y;m+=_)this.add(f[m],d);return!0}},t.prototype.closeRing=function(){0<this.size()&&this.add(new C(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,e),t}(bt),St=function(){},Nt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Nt.ForwardComparator.get=function(){return Tt},Nt.BidirectionalComparator.get=function(){return Lt},Nt.coordArrayType.get=function(){return new Array(0).fill(null)},St.prototype.interfaces_=function(){return[]},St.prototype.getClass=function(){return St},St.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},St.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(St.indexOf(r,e)<0)return r}return null},St.scroll=function(t,e){var n=St.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);z.arraycopy(t,n,r,0,t.length-n),z.arraycopy(t,0,r,t.length-n,n),z.arraycopy(r,0,t,0,t.length)},St.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},St.intersection=function(t,e){for(var n=new wt,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},St.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},St.removeRepeatedPoints=function(t){return St.hasRepeatedPoints(t)?new wt(t,!1).toCoordinateArray():t},St.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},St.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},St.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new C(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new C(r[i+u])},St.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},St.envelope=function(t){for(var e=new X,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},St.toCoordinateArray=function(t){return t.toArray(St.coordArrayType)},St.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},St.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},St.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},St.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},St.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||0<e.compareTo(t[n]))&&(e=t[n]);return e},St.extract=function(t,e,n){e=M.clamp(e,0,t.length);var r=(n=M.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(St,Nt);var Tt=function(){};Tt.prototype.compare=function(t,e){return St.compare(t,e)},Tt.prototype.interfaces_=function(){return[b]},Tt.prototype.getClass=function(){return Tt};var Lt=function(){};Lt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=St.compare(n,r);return St.isEqualReversed(n,r)?0:i},Lt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=St.increasingDirection(n),o=St.increasingDirection(r),s=0<i?0:n.length-1,a=0<o?0:n.length-1,u=0;u<n.length;u++){var c=n[s].compareTo(r[a]);if(0!==c)return c;s+=i,a+=o}return 0},Lt.prototype.interfaces_=function(){return[b]},Lt.prototype.getClass=function(){return Lt};var Ot=function(){};Ot.prototype.get=function(){},Ot.prototype.put=function(){},Ot.prototype.size=function(){},Ot.prototype.values=function(){},Ot.prototype.entrySet=function(){};var Mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Ot);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new Et).contains=function(){};var Pt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Et&&this.addAll(arguments[0])}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new At(this)},e}(o),At=function(e){function t(t){e.call(this),this.hashSet_=t,this.position_=0}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new i},t}(It),Rt=0;(p.prototype=new Mt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(0<n))return e.value;e=e.right}}return null},p.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(0<r)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},p.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===c(a(a(t)))){var e=l(a(a(t)));1===s(e)?(u(a(t),Rt),u(e,Rt),u(a(a(t)),1),t=a(a(t))):(t===l(a(t))&&(t=a(t),this.rotateLeft(t)),u(a(t),Rt),u(a(a(t)),1),this.rotateRight(a(a(t))))}else{var n=c(a(a(t)));1===s(n)?(u(a(t),Rt),u(n,Rt),u(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateRight(t)),u(a(t),Rt),u(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=Rt},p.prototype.values=function(){var t=new bt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=p.successor(e));)t.add(e.value);return t},p.prototype.entrySet=function(){var t=new Pt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=p.successor(e));)t.add(e);return t},p.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e}},p.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e}},p.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},p.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)n=(r=n).parent;return n},p.prototype.size=function(){return this.size_};var Ft=function(){};Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},h.prototype=new o,(f.prototype=new h).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new i},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new Dt(this)};var Dt=function(t){this.treeSet_=t,this.position_=0};Dt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Dt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Dt.prototype.remove=function(){throw new i};var jt=function(){};jt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},jt.asList=function(t){for(var e=new bt,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Gt=function(){},kt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};kt.P.get=function(){return 0},kt.L.get=function(){return 1},kt.A.get=function(){return 2},kt.FALSE.get=function(){return-1},kt.TRUE.get=function(){return-2},kt.DONTCARE.get=function(){return-3},kt.SYM_FALSE.get=function(){return"F"},kt.SYM_TRUE.get=function(){return"T"},kt.SYM_DONTCARE.get=function(){return"*"},kt.SYM_P.get=function(){return"0"},kt.SYM_L.get=function(){return"1"},kt.SYM_A.get=function(){return"2"},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt},Gt.toDimensionSymbol=function(t){switch(t){case Gt.FALSE:return Gt.SYM_FALSE;case Gt.TRUE:return Gt.SYM_TRUE;case Gt.DONTCARE:return Gt.SYM_DONTCARE;case Gt.P:return Gt.SYM_P;case Gt.L:return Gt.SYM_L;case Gt.A:return Gt.SYM_A}throw new m("Unknown dimension value: "+t)},Gt.toDimensionValue=function(t){switch(F.toUpperCase(t)){case Gt.SYM_FALSE:return Gt.FALSE;case Gt.SYM_TRUE:return Gt.TRUE;case Gt.SYM_DONTCARE:return Gt.DONTCARE;case Gt.SYM_P:return Gt.P;case Gt.SYM_L:return Gt.L;case Gt.SYM_A:return Gt.A}throw new m("Unknown dimension symbol: "+t)},Object.defineProperties(Gt,kt);var Ut=function(){};Ut.prototype.filter=function(t){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var Vt=function(){};Vt.prototype.filter=function(t,e){},Vt.prototype.isDone=function(){},Vt.prototype.isGeometryChanged=function(){},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var Bt=function(i){function n(t,e){if(i.call(this,e),this._geometries=t||[],i.hasNullElements(this._geometries))throw new m("geometries must not contain null elements")}i&&(n.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.computeEnvelopeInternal=function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},n.prototype.getGeometryN=function(t){return this._geometries[t]},n.prototype.getSortIndex=function(){return i.SORTINDEX_GEOMETRYCOLLECTION},n.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},n.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},n.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],e))return!1;return!0}return i.prototype.equalsExact.apply(this,arguments)},n.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();jt.sort(this._geometries)},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},n.prototype.getBoundaryDimension=function(){for(var t=Gt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},n.prototype.getDimension=function(){for(var t=Gt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},n.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},n.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},n.prototype.getNumGeometries=function(){return this._geometries.length},n.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},n.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(jt.asList(this._geometries)),n=new f(jt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var c=this.getGeometryN(u),l=o.getGeometryN(u),p=c.compareToSameClass(l,i);if(0!==p)return p;u++}return u<s?1:u<a?-1:0}},n.prototype.apply=function(){if(O(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(O(arguments[0],Vt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(O(arguments[0],Ut)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(O(arguments[0],ct)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},n.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},n.prototype.clone=function(){var t=i.prototype.clone.call(this);t._geometries=new Array(this._geometries.length).fill(null);for(var e=0;e<this._geometries.length;e++)t._geometries[e]=this._geometries[e].clone();return t},n.prototype.getGeometryType=function(){return"GeometryCollection"},n.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)},n.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},t.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(n,t),n}(lt),qt=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return lt.SORTINDEX_MULTILINESTRING},r.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)}return n.prototype.equalsExact.apply(this,arguments)},r.prototype.getBoundaryDimension=function(){return this.isClosed()?Gt.FALSE:0},r.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},r.prototype.getDimension=function(){return 1},r.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},r.prototype.getBoundary=function(){return new zt(this).getBoundary()},r.prototype.getGeometryType=function(){return"MultiLineString"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[Ft]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(r,t),r}(Bt),zt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};zt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},zt.prototype.getBoundary=function(){return this._geom instanceof Ht?this.boundaryLineString(this._geom):this._geom instanceof qt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},zt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},zt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},zt.prototype.computeBoundaryCoordinates=function(t){var e=new bt;this._endpointMap=new p;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return St.toCoordinateArray(e)},zt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yt,this._endpointMap.put(t,e)),e.count++},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt},zt.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new zt(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new zt(e,n).getBoundary()}};var Yt=function(){this.count=null};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var Xt=function(){},Wt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new function(){}(new function(){}(Xt.getStackTrace(r))),a=0;a<i;a++)try{o+=s.readLine()+Xt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Xt.split=function(t,e){for(var n=e.length,r=new bt,i=""+t,o=i.indexOf(e);0<=o;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}0<i.length&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Xt.toString=function(){if(1===arguments.length){var t=arguments[0];return Xt.SIMPLE_ORDINATE_FORMAT.format(t)}},Xt.spaces=function(t){return Xt.chars(" ",t)},Wt.NEWLINE.get=function(){return z.getProperty("line.separator")},Wt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Xt,Wt);var Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt},Jt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Jt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,U.X)===t.getOrdinate(e-1,U.X)&&t.getOrdinate(0,U.Y)===t.getOrdinate(e-1,U.Y)},Jt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||v.isNaN(s)&&v.isNaN(a)))return!1}return!0},Jt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Jt.copy(e,0,r,0,i),0<i)for(var o=i;o<n;o++)Jt.copy(e,i-1,r,o,1);return r},Jt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Jt.swap(t,r,e-r)},Jt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Jt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Jt.copyCoord(t,e+o,n,r+o)},Jt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new A;r.append("(");for(var i=0;i<e;i++){0<i&&r.append(" ");for(var o=0;o<n;o++)0<o&&r.append(","),r.append(Xt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Jt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Jt.createClosedRing(t,e,4):e.getOrdinate(0,U.X)===e.getOrdinate(n-1,U.X)&&e.getOrdinate(0,U.Y)===e.getOrdinate(n-1,U.Y)?e:Jt.createClosedRing(t,e,n+1)},Jt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Jt.copy(e,0,r,0,i);for(var o=i;o<n;o++)Jt.copy(e,0,r,o,1);return r};var Ht=function(i){function e(t,e){i.call(this,e),this._points=null,this.init(t)}i&&(e.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return i.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),e))return!1;return!0}return i.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return 0<this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))&&Jt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Gt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Jt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(O(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(O(arguments[0],Vt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else O(arguments[0],Ut)?arguments[0].filter(this):O(arguments[0],ct)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new zt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var t=i.prototype.clone.call(this);return t._points=this._points.clone(),t},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Ft]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,t),e}(lt),Kt=function(){};Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var $t=function(n){function t(t,e){n.call(this,e),this._coordinates=t||null,this.init(this._coordinates)}n&&(t.__proto__=n);var e={serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},t.prototype.getSortIndex=function(){return n.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return Gt.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},t.prototype.apply=function(){if(O(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(O(arguments[0],Vt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else O(arguments[0],Ut)?arguments[0].filter(this):O(arguments[0],ct)&&arguments[0].filter(this)},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var t=n.prototype.clone.call(this);return t._coordinates=this._coordinates.clone(),t},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return 0===this._coordinates.size()},t.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[Kt]},t.prototype.getClass=function(){return t},e.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(t,e),t}(lt),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Qt=function(s){function r(t,e,n){if(s.call(this,n),this._shell=null,(this._holes=null)===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),s.hasNullElements(e))throw new m("holes must not contain null elements");if(t.isEmpty()&&s.hasNonEmptyElements(e))throw new m("shell is empty but holes are not");this._shell=t,this._holes=e}s&&(r.__proto__=s);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(s&&s.prototype)).constructor=r).prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},r.prototype.getSortIndex=function(){return s.SORTINDEX_POLYGON},r.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},r.prototype.getArea=function(){var t=0;t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()));return t},r.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),c=t.getY(a);if(u!==o==(c!==s))return!1;o=u,s=c}return!0},r.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this._shell,i=n._shell;if(!r.equalsExact(i,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var o=0;o<this._holes.length;o++)if(!this._holes[o].equalsExact(n._holes[o],e))return!1;return!0}return s.prototype.equalsExact.apply(this,arguments)},r.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);jt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);z.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=St.minCoordinate(e.getCoordinates());St.scroll(r,i),z.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],at.isCCW(e.getCoordinates())===n&&St.reverse(e.getCoordinates())}},r.prototype.getCoordinate=function(){return this._shell.getCoordinate()},r.prototype.getNumInteriorRing=function(){return this._holes.length},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},r.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},r.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},r.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},r.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,s=this._shell,a=o._shell,u=s.compareToSameClass(a,i);if(0!==u)return u;for(var c=this.getNumInteriorRing(),l=o.getNumInteriorRing(),p=0;p<c&&p<l;){var h=this.getInteriorRingN(p),f=o.getInteriorRingN(p),d=h.compareToSameClass(f,i);if(0!==d)return d;p++}return p<c?1:p<l?-1:0}},r.prototype.apply=function(t){if(O(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(O(t,Vt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(O(t,Ut))t.filter(this);else if(O(t,ct)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},r.prototype.clone=function(){var t=s.prototype.clone.call(this);t._shell=this._shell.clone(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].clone();return t},r.prototype.getGeometryType=function(){return"Polygon"},r.prototype.copy=function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<e.length;n++)e[n]=this._holes[n].copy();return new r(t,e,this._factory)},r.prototype.getExteriorRing=function(){return this._shell},r.prototype.isEmpty=function(){return this._shell.isEmpty()},r.prototype.getInteriorRingN=function(t){return this._holes[t]},r.prototype.interfaces_=function(){return[Zt]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(r,t),r}(lt),te=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOINT},r.prototype.isValid=function(){return!0},r.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)}return n.prototype.equalsExact.apply(this,arguments)},r.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._geometries[t].getCoordinate()}return n.prototype.getCoordinate.apply(this,arguments)},r.prototype.getBoundaryDimension=function(){return Gt.FALSE},r.prototype.getDimension=function(){return 0},r.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},r.prototype.getGeometryType=function(){return"MultiPoint"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[Kt]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(r,t),r}(Bt),ee=function(n){function t(t,e){t instanceof C&&e instanceof _e&&(t=e.getCoordinateSequenceFactory().create(t)),n.call(this,t,e),this.validateConstruction()}n&&(t.__proto__=n);var e={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getSortIndex=function(){return lt.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return Gt.FALSE},t.prototype.isClosed=function(){return!!this.isEmpty()||n.prototype.isClosed.call(this)},t.prototype.reverse=function(){var t=this._points.copy();return Jt.reverse(t),this.getFactory().createLinearRing(t)},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!n.prototype.isClosed.call(this))throw new m("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new m("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},e.MINIMUM_VALID_SIZE.get=function(){return 4},e.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,e),t}(Ht),ne=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOLYGON},r.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)}return n.prototype.equalsExact.apply(this,arguments)},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new bt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},r.prototype.getGeometryType=function(){return"MultiPolygon"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[Zt]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(r,t),r}(Bt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Bt?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof $t?e.edit(t,this._factory):t instanceof Ht?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new bt,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===qt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new bt,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return se},ie.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var se=function(){};se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Ht?e.createLineString(n):t instanceof $t?0<n.length?e.createPoint(n[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){};ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Ht?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof $t?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new C}else if(O(arguments[0],U)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new C}},ce={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case U.X:this._coordinates[t].x=n;break;case U.Y:this._coordinates[t].y=n;break;case U.Z:this._coordinates[t].z=n;break;default:throw new m("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case U.X:return this._coordinates[t].x;case U.Y:return this._coordinates[t].y;case U.Z:return this._coordinates[t].z}return v.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new C(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(0<this._coordinates.length){var t=new A(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[U,e]},ue.prototype.getClass=function(){return ue},ce.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,ce);var le=function(){},pe={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};le.prototype.readResolve=function(){return le.instance()},le.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ue(t)}if(O(arguments[0],U)){var e=arguments[0];return new ue(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return 3<r&&(r=3),r<2?new ue(n):new ue(n,r)}},le.prototype.interfaces_=function(){return[N,e]},le.prototype.getClass=function(){return le},le.instance=function(){return le.instanceObject},pe.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},pe.instanceObject.get=function(){return new le},Object.defineProperties(le,pe);var he=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new bt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var e=new Pt;return this.map_.entries().forEach(function(t){return e.add(t)}),e},e.prototype.size=function(){return this.map_.size()},e}(Ot),fe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];(this._modelType=e)===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new R(n).compareTo(new R(r))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return v.isNaN(t)?t:this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof C){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,I]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return 0<=t.compareTo(e)?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new he},Object.defineProperties(ge,ye),fe.Type=ge,fe.FIXED=new ge("FIXED"),fe.FLOATING=new ge("FLOATING"),fe.FLOATING_SINGLE=new ge("FLOATING SINGLE");var _e=function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?O(arguments[0],N)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},me={serialVersionUID:{configurable:!0}};_e.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new C(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new C(t.getMinX(),t.getMinY()),new C(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new C(t.getMinX(),t.getMinY()),new C(t.getMinX(),t.getMaxY()),new C(t.getMaxX(),t.getMaxY()),new C(t.getMaxX(),t.getMinY()),new C(t.getMinX(),t.getMinY())]),null)},_e.prototype.createLineString=function(t){return t?t instanceof Array?new Ht(this.getCoordinateSequenceFactory().create(t),this):O(t,U)?new Ht(t,this):void 0:new Ht(this.getCoordinateSequenceFactory().create([]),this)},_e.prototype.createMultiLineString=function(){if(0===arguments.length)return new qt(null,this);if(1===arguments.length){var t=arguments[0];return new qt(t,this)}},_e.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(_e.toGeometryArray(t));var a=t.iterator().next();if(1<t.size()){if(a instanceof Qt)return this.createMultiPolygon(_e.toPolygonArray(t));if(a instanceof Ht)return this.createMultiLineString(_e.toLineStringArray(t));if(a instanceof $t)return this.createMultiPoint(_e.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},_e.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_e.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(O(arguments[0],U)){var e=arguments[0];return new $t(e,this)}}},_e.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_e.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(O(arguments[0],U)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new Qt(r,i,this)}},_e.prototype.getSRID=function(){return this._SRID},_e.prototype.createGeometryCollection=function(){if(0===arguments.length)return new Bt(null,this);if(1===arguments.length){var t=arguments[0];return new Bt(t,this)}},_e.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_e.prototype.getPrecisionModel=function(){return this._precisionModel},_e.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(O(arguments[0],U)){var e=arguments[0];return new ee(e,this)}}},_e.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ne(null,this);if(1===arguments.length){var t=arguments[0];return new ne(t,this)}},_e.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new te(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(O(arguments[0],U)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Jt.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},_e.prototype.interfaces_=function(){return[e]},_e.prototype.getClass=function(){return _e},_e.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.getDefaultCoordinateSequenceFactory=function(){return le.instance()},_e.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},me.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_e,me);var ve=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Ee=function(t){this.geometryFactory=t||new _e};Ee.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Ie[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ve.indexOf(n)?Ie[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Ie[n].apply(this,[e.geometries]):Ie[n].apply(this,[e])},Ee.prototype.write=function(t){var e=t.getGeometryType();if(!xe[e])throw new Error("Geometry is not supported");return xe[e].apply(this,[t])};var Ie={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Ie[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Ie.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new C(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new C(t[0],t[1]),new C(t[2],t[1]),new C(t[2],t[3]),new C(t[0],t[3]),new C(t[0],t[1])])},Point:function(t){var e=new C(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ie.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Ie.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ie.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Ie.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=Ie.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Ie.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},xe={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:xe.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xe.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(xe.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xe.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=xe.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=xe.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xe.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(xe[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},be=function(t){this.geometryFactory=t||new _e,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ee(this.geometryFactory)};be.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},be.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ce=function(){this.parser=new Ee(this.geometryFactory)};Ce.prototype.write=function(t){return this.parser.write(t)};var we=function(){},Se={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};we.prototype.interfaces_=function(){return[]},we.prototype.getClass=function(){return we},we.opposite=function(t){return t===we.LEFT?we.RIGHT:t===we.RIGHT?we.LEFT:t},Se.ON.get=function(){return 0},Se.LEFT.get=function(){return 1},Se.RIGHT.get=function(){return 2},Object.defineProperties(we,Se),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new xt).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Ne=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ne.prototype.getCoordinate=function(){return this._minCoord},Ne.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ne.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(0<this._minIndex&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=at.computeOrientation(this._minCoord,n,e),i=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===at.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===at.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ne.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=we.LEFT;return n[e].y<n[e+1].y&&(r=we.RIGHT),r},Ne.prototype.getEdge=function(){return this._orientedDe},Ne.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Ne.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ne.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===we.LEFT&&(this._orientedDe=this._minDe.getSym())},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne};var Te=function(n){function r(t,e){n.call(this,r.msgWithCoord(t,e)),this.pt=e?new C(e):null,this.name="TopologyException"}return n&&(r.__proto__=n),((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getCoordinate=function(){return this.pt},r.prototype.interfaces_=function(){return[]},r.prototype.getClass=function(){return r},r.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},r}(Q),Le=function(){this.array_=[]};Le.prototype.addLast=function(t){this.array_.push(t)},Le.prototype.removeFirst=function(){return this.array_.shift()},Le.prototype.isEmpty=function(){return 0===this.array_.length};var Oe=function(){this._finder=null,this._dirEdgeList=new bt,this._nodes=new bt,this._rightMostCoord=null,this._env=null,this._finder=new Ne};Oe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Oe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Oe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Te("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Oe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(we.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Oe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Oe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();1<=e.getDepth(we.RIGHT)&&e.getDepth(we.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Oe.prototype.computeDepths=function(t){var e=new Pt,n=new Le,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Oe.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Oe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Oe.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Oe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(we.LEFT,t.getDepth(we.RIGHT)),e.setDepth(we.RIGHT,t.getDepth(we.LEFT))},Oe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Oe.prototype.getNodes=function(){return this._nodes},Oe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Oe.prototype.interfaces_=function(){return[I]},Oe.prototype.getClass=function(){return Oe};var Me=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[we.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[we.ON]=o,this.location[we.LEFT]=s,this.location[we.RIGHT]=a}};Me.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Me.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==T.NONE)return!1;return!0},Me.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===T.NONE&&(this.location[e]=t)},Me.prototype.isLine=function(){return 1===this.location.length},Me.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[we.ON]=this.location[we.ON],e[we.LEFT]=T.NONE,e[we.RIGHT]=T.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===T.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Me.prototype.getLocations=function(){return this.location},Me.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[we.LEFT];this.location[we.LEFT]=this.location[we.RIGHT],this.location[we.RIGHT]=t},Me.prototype.toString=function(){var t=new A;return 1<this.location.length&&t.append(T.toLocationSymbol(this.location[we.LEFT])),t.append(T.toLocationSymbol(this.location[we.ON])),1<this.location.length&&t.append(T.toLocationSymbol(this.location[we.RIGHT])),t.toString()},Me.prototype.setLocations=function(t,e,n){this.location[we.ON]=t,this.location[we.LEFT]=e,this.location[we.RIGHT]=n},Me.prototype.get=function(t){return t<this.location.length?this.location[t]:T.NONE},Me.prototype.isArea=function(){return 1<this.location.length},Me.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===T.NONE)return!0;return!1},Me.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(we.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Me.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(T.NONE)},Me.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Me.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me};var Pe=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Me(e),this.elt[1]=new Me(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Me(n.elt[0]),this.elt[1]=new Me(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Me(T.NONE),this.elt[1]=new Me(T.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Me(o,s,a),this.elt[1]=new Me(o,s,a)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],p=arguments[3];this.elt[0]=new Me(T.NONE,T.NONE,T.NONE),this.elt[1]=new Me(T.NONE,T.NONE,T.NONE),this.elt[u].setLocations(c,l,p)}};Pe.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Pe.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Pe.prototype.isNull=function(t){return this.elt[t].isNull()},Pe.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Pe.prototype.isLine=function(t){return this.elt[t].isLine()},Pe.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Me(t.elt[e]):this.elt[e].merge(t.elt[e])},Pe.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Pe.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(we.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Pe.prototype.toString=function(){var t=new A;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Pe.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Pe.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Pe.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(we.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Pe.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Pe.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Pe.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Me(this.elt[t].location[0]))},Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe},Pe.toLineLabel=function(t){for(var e=new Pe(T.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Ae=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new bt,this._pts=new bt,this._label=new Pe(T.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new bt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Ae.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},Ae.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Ae.prototype.computePoints=function(t){var e=this._startDe=t,n=!0;do{if(null===e)throw new Te("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Te("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Ae.prototype.getLinearRing=function(){return this._ring},Ae.prototype.getCoordinate=function(t){return this._pts.get(t)},Ae.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Ae.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;0<=a;a--)this._pts.add(r[a])}},Ae.prototype.isHole=function(){return this._isHole},Ae.prototype.setInResult=function(){for(var t=this._startDe;t.getEdge().setInResult(!0),(t=t.getNext())!==this._startDe;);},Ae.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!at.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Ae.prototype.addHole=function(t){this._holes.add(t)},Ae.prototype.isShell=function(){return null===this._shell},Ae.prototype.getLabel=function(){return this._label},Ae.prototype.getEdges=function(){return this._edges},Ae.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ae.prototype.getShell=function(){return this._shell},Ae.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,we.RIGHT);if(r===T.NONE)return null;if(this._label.getLocation(n)===T.NONE)return this._label.setLocation(n,r),null}},Ae.prototype.setShell=function(t){null!==(this._shell=t)&&t.addHole(this)},Ae.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae};var Re=function(n){function t(){var t=arguments[0],e=arguments[1];n.call(this,t,e)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},t.prototype.getNext=function(t){return t.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ae),Fe=function(n){function t(){var t=arguments[0],e=arguments[1];n.call(this,t,e)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.buildMinimalRings=function(){var t=new bt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Re(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},t.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){for(var t=this._startDe;t.getNode().getEdges().linkMinimalDirectedEdges(this),(t=t.getNext())!==this._startDe;);},t.prototype.getNext=function(t){return t.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ae),De=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};De.prototype.setVisited=function(t){this._isVisited=t},De.prototype.setInResult=function(t){this._isInResult=t},De.prototype.isCovered=function(){return this._isCovered},De.prototype.isCoveredSet=function(){return this._isCoveredSet},De.prototype.setLabel=function(t){this._label=t},De.prototype.getLabel=function(){return this._label},De.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},De.prototype.updateIM=function(t){et.isTrue(2<=this._label.getGeometryCount(),"found partial label"),this.computeIM(t)},De.prototype.isInResult=function(){return this._isInResult},De.prototype.isVisited=function(){return this._isVisited},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var je=function(n){function i(){n.call(this),this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new Pe(0,T.NONE)}return n&&(i.__proto__=n),((i.prototype=Object.create(n&&n.prototype)).constructor=i).prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},i.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},i.prototype.getCoordinate=function(){return this._coord},i.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},i.prototype.computeIM=function(t){},i.prototype.computeMergedLocation=function(t,e){var n=T.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==T.BOUNDARY&&(n=r)}return n},i.prototype.setLabel=function(){if(2!==arguments.length)return n.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new Pe(t,e):this._label.setLocation(t,e)},i.prototype.getEdges=function(){return this._edges},i.prototype.mergeLabel=function(){if(arguments[0]instanceof i){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Pe)for(var e=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(e,n);this._label.getLocation(n)===T.NONE&&this._label.setLocation(n,r)}},i.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},i.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=T.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case T.BOUNDARY:n=T.INTERIOR;break;case T.INTERIOR:default:n=T.BOUNDARY}this._label.setLocation(t,n)},i.prototype.interfaces_=function(){return[]},i.prototype.getClass=function(){return i},i}(De),Ge=function(){this.nodeMap=new p,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Ge.prototype.find=function(t){return this.nodeMap.get(t)},Ge.prototype.addNode=function(){if(arguments[0]instanceof C){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof je){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Ge.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ge.prototype.iterator=function(){return this.nodeMap.values().iterator()},Ge.prototype.values=function(){return this.nodeMap.values()},Ge.prototype.getBoundaryNodes=function(t){for(var e=new bt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===T.BOUNDARY&&e.add(r)}return e},Ge.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge};var ke=function(){},Ue={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.isNorthern=function(t){return t===ke.NE||t===ke.NW},ke.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},ke.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(e<t?t:e)?3:n},ke.isInHalfPlane=function(t,e){return e===ke.SE?t===ke.SE||t===ke.SW:t===e||t===e+1},ke.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the quadrant for point ( "+t+", "+e+" )");return 0<=t?0<=e?ke.NE:ke.SE:0<=e?ke.NW:ke.SW}if(arguments[0]instanceof C&&arguments[1]instanceof C){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new m("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?ke.NE:ke.SE:r.y>=n.y?ke.NW:ke.SW}},Ue.NE.get=function(){return 0},Ue.NW.get=function(){return 1},Ue.SW.get=function(){return 2},Ue.SE.get=function(){return 3},Object.defineProperties(ke,Ue);var Ve=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=i,this.init(o,s),this._label=a}};Ve.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},Ve.prototype.getDy=function(){return this._dy},Ve.prototype.getCoordinate=function(){return this._p0},Ve.prototype.setNode=function(t){this._node=t},Ve.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ve.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ve.prototype.getDirectedCoordinate=function(){return this._p1},Ve.prototype.getDx=function(){return this._dx},Ve.prototype.getLabel=function(){return this._label},Ve.prototype.getEdge=function(){return this._edge},Ve.prototype.getQuadrant=function(){return this._quadrant},Ve.prototype.getNode=function(){return this._node},Ve.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ve.prototype.computeLabel=function(t){},Ve.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ke.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ve.prototype.interfaces_=function(){return[I]},Ve.prototype.getClass=function(){return Ve};var Be=function(r){function t(){var t=arguments[0],e=arguments[1];if(r.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(t){return this._depth[t]},t.prototype.setVisited=function(t){this._isVisited=t},t.prototype.computeDirectedLabel=function(){this._label=new Pe(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Te("assigned depths do not match",this.getCoordinate());this._depth[t]=e},t.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,we.LEFT)===T.INTERIOR&&this._label.getLocation(e,we.RIGHT)===T.INTERIOR||(t=!1);return t},t.prototype.setNextMin=function(t){this._nextMin=t},t.prototype.print=function(t){r.prototype.print.call(this,t),t.print(" "+this._depth[we.LEFT]+"/"+this._depth[we.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},t.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},t.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,T.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,T.EXTERIOR);return t&&e&&n},t.prototype.setEdgeRing=function(t){this._edgeRing=t},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},t.prototype.setInResult=function(t){this._isInResult=t},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},t.prototype.setSym=function(t){this._sym=t},t.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},t.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===we.LEFT&&(r=-1);var i=we.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(t){this._next=t},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(t,e){return t===T.EXTERIOR&&e===T.INTERIOR?1:t===T.INTERIOR&&e===T.EXTERIOR?-1:0},t}(Ve),qe=function(){};qe.prototype.createNode=function(t){return new je(t,null)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var ze=function(){if(this._edges=new bt,this._nodes=null,this._edgeEndList=new bt,0===arguments.length)this._nodes=new Ge(new qe);else if(1===arguments.length){var t=arguments[0];this._nodes=new Ge(t)}};ze.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},ze.prototype.find=function(t){return this._nodes.find(t)},ze.prototype.addNode=function(){if(arguments[0]instanceof je){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof C){var e=arguments[0];return this._nodes.addNode(e)}},ze.prototype.getNodeIterator=function(){return this._nodes.iterator()},ze.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},ze.prototype.debugPrintln=function(t){z.out.println(t)},ze.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===T.BOUNDARY},ze.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},ze.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&at.computeOrientation(t,e,r)===at.COLLINEAR&&ke.quadrant(t,e)===ke.quadrant(n,r)},ze.prototype.getEdgeEnds=function(){return this._edgeEndList},ze.prototype.debugPrint=function(t){z.out.print(t)},ze.prototype.getEdgeIterator=function(){return this._edges.iterator()},ze.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},ze.prototype.insertEdge=function(t){this._edges.add(t)},ze.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},ze.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Be(n,!0),i=new Be(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},ze.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},ze.prototype.getNodes=function(){return this._nodes.values()},ze.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze},ze.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ye=function(){this._geometryFactory=null,this._shellList=new bt;var t=arguments[0];this._geometryFactory=t};Ye.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ye.prototype.computePolygons=function(t){for(var e=new bt,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ye.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Te("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ye.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new bt,i=t.iterator();i.hasNext();){var o=i.next();if(2<o.getMaxNodeDegree()){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Ye.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ye.prototype.buildMaximalEdgeRings=function(t){for(var e=new bt,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Fe(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ye.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ye.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ye.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var p=!1;l.contains(r)&&at.isPointInRing(i,c.getCoordinates())&&(p=!0),p&&(null===o||s.contains(l))&&(o=u)}return o},Ye.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ye.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ze.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new bt,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Xe=function(){};Xe.prototype.getBounds=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var We=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};We.prototype.getItem=function(){return this._item},We.prototype.getBounds=function(){return this._bounds},We.prototype.interfaces_=function(){return[Xe,e]},We.prototype.getClass=function(){return We};var Je=function(){this._size=null,this._items=null,this._size=0,this._items=new bt,this._items.add(null)};Je.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Je.prototype.size=function(){return this._size},Je.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Je.prototype.clear=function(){this._size=0,this._items.clear()},Je.prototype.isEmpty=function(){return 0===this._size},Je.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je};var He=function(){};He.prototype.visitItem=function(t){},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Ke=function(){};Ke.prototype.insert=function(t,e){},Ke.prototype.remove=function(t,e){},Ke.prototype.query=function(){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var $e=function(){if(this._childBoundables=new bt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ze={serialVersionUID:{configurable:!0}};$e.prototype.getLevel=function(){return this._level},$e.prototype.size=function(){return this._childBoundables.size()},$e.prototype.getChildBoundables=function(){return this._childBoundables},$e.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},$e.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},$e.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},$e.prototype.interfaces_=function(){return[Xe,e]},$e.prototype.getClass=function(){return $e},Ze.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties($e,Ze);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?jt.sort(n,e):jt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qe.singletonList=function(t){var e=new bt;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,t,e):this.expand(this._boundable2,this._boundable1,t,e),null;if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new m("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new tn(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[I]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof $e};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new bt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(1<n,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof $e?t+=this.size(n):n instanceof We&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof We&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new bt:t}if(1===arguments.length){for(var e=arguments[0],n=new bt,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof $e){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof We?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new We(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new bt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(-2<n),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof $e?this.boundablesAtLevel(n,s,i):(et.isTrue(s instanceof We),-1===n&&i.add(s))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new bt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(O(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof $e)for(var i=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var c=a.get(u);this.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof $e?this.query(i,c,s):c instanceof We?s.visitItem(c.getItem()):et.shouldNeverReachHere())}else if(O(arguments[2],xt)&&arguments[0]instanceof Object&&arguments[1]instanceof $e)for(var l=arguments[0],p=arguments[1],h=arguments[2],f=p.getChildBoundables(),d=0;d<f.size();d++){var g=f.get(d);this.getIntersectsOp().intersects(g.getBounds(),l)&&(g instanceof $e?this.query(l,g,h):g instanceof We?h.add(g.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof $e&&(o=this.remove(n,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof $e){var r=this.depth(n);t<r&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new bt;n.add(this.createNode(e));var r=new bt(t);Qe.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return e<t?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var sn=function(c){function _(t){t=t||_.DEFAULT_NODE_CAPACITY,c.call(this,t)}c&&(_.__proto__=c);var t={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return((_.prototype=Object.create(c&&c.prototype)).constructor=_).prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(0<t.length);for(var n=new bt,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},_.prototype.createNode=function(t){return new an(t)},_.prototype.size=function(){return 0===arguments.length?c.prototype.size.call(this):c.prototype.size.apply(this,arguments)},_.prototype.insert=function(){if(2!==arguments.length)return c.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;c.prototype.insert.call(this,t,e)},_.prototype.getIntersectsOp=function(){return _.intersectsOp},_.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new bt;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},_.prototype.query=function(){if(1===arguments.length){var t=arguments[0];return c.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];c.prototype.query.call(this,e,n)}else if(3===arguments.length)if(O(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof $e){var r=arguments[0],i=arguments[1],o=arguments[2];c.prototype.query.call(this,r,i,o)}else if(O(arguments[2],xt)&&arguments[0]instanceof Object&&arguments[1]instanceof $e){var s=arguments[0],a=arguments[1],u=arguments[2];c.prototype.query.call(this,s,a,u)}},_.prototype.getComparator=function(){return _.yComparator},_.prototype.createParentBoundablesFromVerticalSlice=function(t,e){return c.prototype.createParentBoundables.call(this,t,e)},_.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return c.prototype.remove.call(this,t,e)}return c.prototype.remove.apply(this,arguments)},_.prototype.depth=function(){return 0===arguments.length?c.prototype.depth.call(this):c.prototype.depth.apply(this,arguments)},_.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new bt(t);Qe.sort(r,_.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,e)},_.prototype.nearestNeighbour=function(){if(1===arguments.length){if(O(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var n=arguments[0];return this.nearestNeighbour(n,v.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof _&&O(arguments[1],on)){var r=arguments[0],i=arguments[1],o=new tn(this.getRoot(),r.getRoot(),i);return this.nearestNeighbour(o)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=null,c=new Je;for(c.add(s);!c.isEmpty()&&0<a;){var l=c.poll(),p=l.getDistance();if(a<=p)break;l.isLeaves()?(a=p,u=l):l.expandToQueue(c,a)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var h=arguments[0],f=arguments[1],d=arguments[2],g=new We(h,f),y=new tn(this.getRoot(),g,d);return this.nearestNeighbour(y)[0]}},_.prototype.interfaces_=function(){return[Ke,e]},_.prototype.getClass=function(){return _},_.centreX=function(t){return _.avg(t.getMinX(),t.getMaxX())},_.avg=function(t,e){return(t+e)/2},_.centreY=function(t){return _.avg(t.getMinY(),t.getMaxY())},t.STRtreeNode.get=function(){return an},t.serialVersionUID.get=function(){return 0x39920f7d5f261e0},t.xComparator.get=function(){return{interfaces_:function(){return[b]},compare:function(t,e){return c.compareDoubles(_.centreX(t.getBounds()),_.centreX(e.getBounds()))}}},t.yComparator.get=function(){return{interfaces_:function(){return[b]},compare:function(t,e){return c.compareDoubles(_.centreY(t.getBounds()),_.centreY(e.getBounds()))}}},t.intersectsOp.get=function(){return{interfaces_:function(){return[c.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},t.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(_,t),_}(en),an=function(e){function t(){var t=arguments[0];e.call(this,t)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new X(n.getBounds()):t.expandToInclude(n.getBounds())}return t},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}($e),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:e<t?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=un.relativeSign(e.x,n.x),i=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(r,i);case 1:return un.compareValue(i,r);case 2:return un.compareValue(i,-r);case 3:return un.compareValue(-r,i);case 4:return un.compareValue(-r,-i);case 5:return un.compareValue(-i,-r);case 6:return un.compareValue(-i,r);case 7:return un.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:0<t?1:e<0?-1:0<e?1:0};var cn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new C(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};cn.prototype.getCoordinate=function(){return this.coord},cn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},cn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cn.prototype.isInterior=function(){return this._isInterior},cn.prototype.interfaces_=function(){return[I]},cn.prototype.getClass=function(){return cn};var ln=function(){this._nodeMap=new p,this._edge=null;var t=arguments[0];this._edge=t};ln.prototype.getSplitCoordinates=function(){var t=new wt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},ln.prototype.addCollapsedNodes=function(){var t=new bt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},ln.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ln.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new R(e+1))}},ln.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new C(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new C(e.coord))},ln.prototype.iterator=function(){return this._nodeMap.values().iterator()},ln.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},ln.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},ln.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new R(e[0])),r=i}},ln.prototype.getEdge=function(){return this._edge},ln.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ln.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new C(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new C(e.coord)),new dn(o,this._edge.getData())},ln.prototype.add=function(t,e){var n=new cn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},ln.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+i)},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln};var pn=function(){};pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn},pn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return 0<=t?0<=e?r<=n?0:1:r<=n?7:6:0<=e?r<=n?3:2:r<=n?4:5}if(arguments[0]instanceof C&&arguments[1]instanceof C){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new m("Cannot compute the octant for two identical points "+i);return pn.octant(s,a)}};var hn=function(){};hn.prototype.getCoordinates=function(){},hn.prototype.size=function(){},hn.prototype.getCoordinate=function(t){},hn.prototype.isClosed=function(){},hn.prototype.setData=function(t){},hn.prototype.getData=function(){},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn};var fn=function(){};fn.prototype.addIntersection=function(t,e){},fn.prototype.interfaces_=function(){return[hn]},fn.prototype.getClass=function(){return fn};var dn=function(){this._nodeList=new ln(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:pn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new C(n.getIntersection(i));this.addIntersection(o,r)}},dn.prototype.toString=function(){return Z.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[fn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new bt;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new C,this.p1=new C;else if(1===arguments.length){var t=arguments[0];this.p0=new C(t.p0),this.p1=new C(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new C(e,n),this.p1=new C(r,i)}},yn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),n=at.orientationIndex(this.p0,this.p1,t.p1);return 0<=e&&0<=n?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof C){var r=arguments[0];return at.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof C){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new C(t);var e=this.projectionFactor(t),n=new C;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(1<=i&&1<=o)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),1<i&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),1<o&&(a=this.p1),new gn(s,a)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?v.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=v.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return 0<e&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return Y.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof q))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new C(n-u,r+a)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(1<e||v.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof C){var e=arguments[0];return at.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new C;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=v.doubleToLongBits(this.p0.x);t^=31*v.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=v.doubleToLongBits(this.p1.x);return n^=31*v.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[I,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new C((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,yn);var _n=function(){this.tempEnv1=new X,this.tempEnv2=new X,this._overlapSeg1=new gn,this._overlapSeg2=new gn};_n.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var mn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};mn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},mn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},mn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},mn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},mn.prototype.setId=function(t){this._id=t},mn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},mn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new X(t,e)}return this._env},mn.prototype.getEndIndex=function(){return this._end},mn.prototype.getStartIndex=function(){return this._start},mn.prototype.getContext=function(){return this._context},mn.prototype.getId=function(){return this._id},mn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),p=Math.trunc((r+i)/2);t<l&&(r<p&&this.computeOverlapsInternal(t,l,n,r,p,o),p<i&&this.computeOverlapsInternal(t,l,n,p,i,o)),l<e&&(r<p&&this.computeOverlapsInternal(l,e,n,r,p,o),p<i&&this.computeOverlapsInternal(l,e,n,p,i,o))},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var vn=function(){};vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},vn.getChainStartIndices=function(t){var e=0,n=new bt;n.add(new R(e));do{var r=vn.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return vn.toIntArray(n)},vn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=ke.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||ke.quadrant(t[i-1],t[i])===r);)i++;return i-1},vn.getChains=function(){if(1===arguments.length){var t=arguments[0];return vn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new bt,i=vn.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new mn(e,i[o],i[o+1],n);r.add(s)}return r}},vn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var En=function(){};En.prototype.computeNodes=function(t){},En.prototype.getNodedSubstrings=function(){},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En};var In=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};In.prototype.setSegmentIntersector=function(t){this._segInt=t},In.prototype.interfaces_=function(){return[En]},In.prototype.getClass=function(){return In};var xn=function(e){function t(t){t?e.call(this,t):e.call(this),this._monoChains=new bt,this._index=new sn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e);var n={SegmentOverlapAction:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(t){for(var e=vn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},t.prototype.computeNodes=function(t){for(var e=(this._nodedSegStrings=t).iterator();e.hasNext();)this.add(e.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var t=new bn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return bn},Object.defineProperties(t,n),t}(In),bn=function(s){function t(){s.call(this),this._si=null;var t=arguments[0];this._si=t}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.overlap=function(){if(4!==arguments.length)return s.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],i=t.getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(_n),Cn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},wn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Cn.prototype.getEndCapStyle=function(){return this._endCapStyle},Cn.prototype.isSingleSided=function(){return this._isSingleSided},Cn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Cn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Cn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Cn.JOIN_ROUND&&(this._quadrantSegments=Cn.DEFAULT_QUADRANT_SEGMENTS)},Cn.prototype.getJoinStyle=function(){return this._joinStyle},Cn.prototype.setJoinStyle=function(t){this._joinStyle=t},Cn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Cn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Cn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Cn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Cn.prototype.getMitreLimit=function(){return this._mitreLimit},Cn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Cn.prototype.setSingleSided=function(t){this._isSingleSided=t},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},wn.CAP_ROUND.get=function(){return 1},wn.CAP_FLAT.get=function(){return 2},wn.CAP_SQUARE.get=function(){return 3},wn.JOIN_ROUND.get=function(){return 1},wn.JOIN_MITRE.get=function(){return 2},wn.JOIN_BEVEL.get=function(){return 3},wn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},wn.DEFAULT_MITRE_LIMIT.get=function(){return 5},wn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Cn,wn);var Sn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},Nn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Sn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Sn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Sn.DELETE,r=i=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Sn.prototype.isShallowConcavity=function(t,e,n,r){return at.computeOrientation(t,e,n)===this._angleOrientation&&at.distancePointLine(e,t,n)<r},Sn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Sn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Sn.prototype.isConcave=function(t,e,n){return at.computeOrientation(t,e,n)===this._angleOrientation},Sn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);for(;this.deleteShallowConcavities(););return this.collapseLine()},Sn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Sn.DELETE;)e++;return e},Sn.prototype.isShallow=function(t,e,n,r){return at.distancePointLine(e,t,n)<r},Sn.prototype.collapseLine=function(){for(var t=new wt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Sn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.simplify=function(t,e){return new Sn(t).simplify(e)},Nn.INIT.get=function(){return 0},Nn.DELETE.get=function(){return 1},Nn.KEEP.get=function(){return 1},Nn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Sn,Nn);var Tn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new bt},Ln={COORDINATE_ARRAY_TYPE:{configurable:!0}};Tn.prototype.getCoordinates=function(){return this._ptList.toArray(Tn.COORDINATE_ARRAY_TYPE)},Tn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Tn.prototype.addPt=function(t){var e=new C(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Tn.prototype.revere=function(){},Tn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;0<=r;r--)this.addPt(t[r])},Tn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Tn.prototype.toString=function(){return(new _e).createLineString(this.getCoordinates()).toString()},Tn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new C(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Tn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Ln.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Tn,Ln);var On=function(){},Mn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.toDegrees=function(t){return 180*t/Math.PI},On.normalize=function(t){for(;t>Math.PI;)t-=On.PI_TIMES_2;for(;t<=-Math.PI;)t+=On.PI_TIMES_2;return t},On.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},On.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return 0<r*(n.x-e.x)+i*(n.y-e.y)},On.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},On.interiorAngle=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n);return Math.abs(i-r)},On.normalizePositive=function(t){if(t<0){for(;t<0;)t+=On.PI_TIMES_2;On.PI_TIMES_2<=t&&(t=0)}else{for(;On.PI_TIMES_2<=t;)t-=On.PI_TIMES_2;t<0&&(t=0)}return t},On.angleBetween=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n);return On.diff(r,i)},On.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},On.toRadians=function(t){return t*Math.PI/180},On.getTurn=function(t,e){var n=Math.sin(e-t);return 0<n?On.COUNTERCLOCKWISE:n<0?On.CLOCKWISE:On.NONE},On.angleBetweenOriented=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n)-r;return i<=-Math.PI?i+On.PI_TIMES_2:i>Math.PI?i-On.PI_TIMES_2:i},Mn.PI_TIMES_2.get=function(){return 2*Math.PI},Mn.PI_OVER_2.get=function(){return Math.PI/2},Mn.PI_OVER_4.get=function(){return Math.PI/4},Mn.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},Mn.CLOCKWISE.get=function(){return at.CLOCKWISE},Mn.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(On,Mn);var Pn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),8<=n.getQuadrantSegments()&&n.getJoinStyle()===Cn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},An={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Pn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=at.computeOrientation(this._s0,this._s1,this._s2),r=n===at.CLOCKWISE&&this._side===we.LEFT||n===at.COUNTERCLOCKWISE&&this._side===we.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Pn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),r=new gn;this.computeOffsetSegment(n,we.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,we.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Cn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Cn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Cn.CAP_SQUARE:var u=new C;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var c=new C(r.p1.x+u.x,r.p1.y+u.y),l=new C(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},Pn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Pn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Y.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof q))throw t;o=new C(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Pn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===at.CLOCKWISE?a<=l&&(a+=2*Math.PI):l<=a&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,l,r,i),this._segList.addPt(n)},Pn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Pn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Cn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Cn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Pn.prototype.createSquare=function(t){this._segList.addPt(new C(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new C(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new C(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new C(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Pn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Pn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Pn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Pn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Pn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=On.angle(i,this._seg0.p0),s=On.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=On.normalize(o+s),u=On.normalize(a+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(s)),p=i.x+c*Math.cos(u),h=i.y+c*Math.sin(u),f=new C(p,h),d=new gn(i,f),g=d.pointAlongOffset(1,l),y=d.pointAlongOffset(1,-l);this._side===we.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Pn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===we.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,c=i*n*s/a;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},Pn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===at.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,c=0,l=new C;c<s;){var p=e+o*c;l.x=t.x+i*Math.cos(p),l.y=t.y+i*Math.sin(p),this._segList.addPt(l),c+=u}},Pn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Pn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),0<this._closingSegLengthFactor){var n=new C((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new C((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Pn.prototype.createCircle=function(t){var e=new C(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Pn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Pn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Tn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Pn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Pn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),2<=this._li.getIntersectionNum()&&(this._bufParams.getJoinStyle()===Cn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Cn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},Pn.prototype.closeRing=function(){this._segList.closeRing()},Pn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},An.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},An.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},An.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},An.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Pn,An);var Rn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Rn.prototype.getOffsetCurve=function(t,e){if(0===(this._distance=e))return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&St.reverse(o),o},Rn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Sn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],we.LEFT),n.addFirstSegment();for(var s=o-2;0<=s;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Sn.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],we.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment(),n.closeRing()},Rn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===we.RIGHT&&(r=-r);var i=Sn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Rn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Sn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],we.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Sn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],we.LEFT);for(var u=a-2;0<=u;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Rn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Cn.CAP_ROUND:e.createCircle(t);break;case Cn.CAP_SQUARE:e.createSquare(t)}},Rn.prototype.getLineCurve=function(t,e){if((this._distance=e)<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Rn.prototype.getBufferParameters=function(){return this._bufParams},Rn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Rn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Rn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Rn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Sn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],we.LEFT),n.addFirstSegment();for(var s=o-2;0<=s;s--)n.addNextSegment(i[s],!0)}else{var a=Sn.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],we.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment()},Rn.prototype.getSegGen=function(t){return new Pn(this._precisionModel,this._bufParams,t)},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new C(t[n]);return e};var Fn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new at;var t=arguments[0];this._subgraphs=t},Dn={DepthSegment:{configurable:!0}};Fn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new bt,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(O(arguments[2],xt)&&arguments[0]instanceof C&&arguments[1]instanceof Be){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var l=s.getDepth(we.LEFT);this._seg.p0.equals(u[c])||(l=s.getDepth(we.RIGHT));var p=new jn(this._seg,l);a.add(p)}}else if(O(arguments[2],xt)&&arguments[0]instanceof C&&O(arguments[1],xt))for(var h=arguments[0],f=arguments[1],d=arguments[2],g=f.iterator();g.hasNext();){var y=g.next();y.isForward()&&this.findStabbedSegments(h,y,d)}},Fn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Dn.DepthSegment.get=function(){return jn},Object.defineProperties(Fn,Dn);var jn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};jn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},jn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},jn.prototype.toString=function(){return this._upwardSeg.toString()},jn.prototype.interfaces_=function(){return[I]},jn.prototype.getClass=function(){return jn};var Gn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Gn.prototype.area=function(){return Gn.area(this.p0,this.p1,this.p2)},Gn.prototype.signedArea=function(){return Gn.signedArea(this.p0,this.p1,this.p2)},Gn.prototype.interpolateZ=function(t){if(null===t)throw new m("Supplied point is null.");return Gn.interpolateZ(t,this.p0,this.p1,this.p2)},Gn.prototype.longestSideLength=function(){return Gn.longestSideLength(this.p0,this.p1,this.p2)},Gn.prototype.isAcute=function(){return Gn.isAcute(this.p0,this.p1,this.p2)},Gn.prototype.circumcentre=function(){return Gn.circumcentre(this.p0,this.p1,this.p2)},Gn.prototype.area3D=function(){return Gn.area3D(this.p0,this.p1,this.p2)},Gn.prototype.centroid=function(){return Gn.centroid(this.p0,this.p1,this.p2)},Gn.prototype.inCentre=function(){return Gn.inCentre(this.p0,this.p1,this.p2)},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn},Gn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Gn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Gn.det=function(t,e,n,r){return t*r-e*n},Gn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,c=r.y-o,l=s*c-a*u,p=t.x-i,h=t.y-o,f=(c*p-a*h)/l,d=(-u*p+s*h)/l;return e.z+f*(n.z-e.z)+d*(r.z-e.z)},Gn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return s<i&&(s=i),s<o&&(s=o),s},Gn.isAcute=function(t,e,n){return!!On.isAcute(t,e,n)&&!!On.isAcute(e,n,t)&&!!On.isAcute(n,t,e)},Gn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,c=2*Gn.det(o,s,a,u),l=Gn.det(s,o*o+s*s,u,a*a+u*u),p=Gn.det(o,o*o+s*s,a,a*a+u*u);return new C(r-l/c,i+p/c)},Gn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Y(t.x+n/2,t.y+r/2,1),o=new Y(t.x-r+n/2,t.y+n+r/2,1);return new Y(i,o)},Gn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new C(t.x+i*o,t.y+i*s)},Gn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,c=i*u-o*a,l=o*s-r*u,p=r*a-i*s,h=c*c+l*l+p*p;return Math.sqrt(h)/2},Gn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new C(r,i)},Gn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new C(a,u)};var kn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new bt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};kn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,T.EXTERIOR,T.INTERIOR)},kn.prototype.addPolygon=function(t){var e=this._distance,n=we.LEFT;this._distance<0&&(e=-this._distance,n=we.RIGHT);var r=t.getExteriorRing(),i=St.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,T.EXTERIOR,T.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=St.removeRepeatedPoints(s.getCoordinates());0<this._distance&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,we.opposite(n),T.INTERIOR,T.EXTERIOR)}},kn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Gn(t[0],t[1],t[2]),r=n.inCentre();return at.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},kn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=St.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,T.EXTERIOR,T.INTERIOR)},kn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Pe(0,T.BOUNDARY,e,n));this._curveList.add(r)},kn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},kn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=i,s=r,n=we.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},kn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof Ht?this.addLineString(t):t instanceof $t?this.addPoint(t):t instanceof te?this.addCollection(t):t instanceof qt?this.addCollection(t):t instanceof ne?this.addCollection(t):t instanceof Bt&&this.addCollection(t)},kn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},kn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn};var Un=function(){};Un.prototype.locate=function(t){},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var Vn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Vn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Vn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof Bt?(this._subcollectionIterator=new Vn(t),this._subcollectionIterator.next()):t},Vn.prototype.remove=function(){throw new Error(this.getClass().getName())},Vn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Vn.prototype.interfaces_=function(){return[It]},Vn.prototype.getClass=function(){return Vn},Vn.isAtomic=function(t){return!(t instanceof Bt)};var Bn=function(){this._geom=null;var t=arguments[0];this._geom=t};Bn.prototype.locate=function(t){return Bn.locate(t,this._geom)},Bn.prototype.interfaces_=function(){return[Un]},Bn.prototype.getClass=function(){return Bn},Bn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},Bn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Bn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Bn.isPointInRing(t,i))return!1}return!0},Bn.containsPoint=function(t,e){if(e instanceof Qt)return Bn.containsPointInPolygon(t,e);if(e instanceof Bt)for(var n=new Vn(e);n.hasNext();){var r=n.next();if(r!==e&&Bn.containsPoint(t,r))return!0}return!1},Bn.locate=function(t,e){return e.isEmpty()?T.EXTERIOR:Bn.containsPoint(t,e)?T.INTERIOR:T.EXTERIOR};var qn=function(){this._edgeMap=new p,this._edgeList=null,this._ptInAreaLocation=[T.NONE,T.NONE]};qn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},qn.prototype.propagateSideLabels=function(t){for(var e=T.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,we.LEFT)!==T.NONE&&(e=r.getLocation(t,we.LEFT))}if(e===T.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,we.ON)===T.NONE&&a.setLocation(t,we.ON,i),a.isArea(t)){var u=a.getLocation(t,we.LEFT),c=a.getLocation(t,we.RIGHT);if(c!==T.NONE){if(c!==i)throw new Te("side location conflict",s.getCoordinate());u===T.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else et.isTrue(a.getLocation(t,we.LEFT)===T.NONE,"found single null side"),a.setLocation(t,we.RIGHT,i),a.setLocation(t,we.LEFT,i)}}},qn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},qn.prototype.print=function(t){z.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},qn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},qn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,we.LEFT);et.isTrue(r!==T.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();et.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,we.LEFT),u=s.getLocation(t,we.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},qn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},qn.prototype.iterator=function(){return this.getEdges().iterator()},qn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new bt(this._edgeMap.values())),this._edgeList},qn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===T.NONE&&(this._ptInAreaLocation[t]=Bn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},qn.prototype.toString=function(){var t=new A;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},qn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},qn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===T.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var c=T.NONE;if(e[u])c=T.EXTERIOR;else{var l=s.getCoordinate();c=this.getLocation(u,l,t)}a.setAllLocationsIfNull(u,c)}},qn.prototype.getDegree=function(){return this._edgeMap.size()},qn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var zn=function(o){function t(){o.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Te("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},t.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},t.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return ke.isNorthern(i)&&ke.isNorthern(o)?n:ke.isNorthern(i)||ke.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},t.prototype.print=function(t){z.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},t.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new bt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;0<=n;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},t.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(we.LEFT),r=t.getDepth(we.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Te("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=o;u<s;u++){var c=this._edgeList.get(u);c.setEdgeDepths(we.RIGHT,a),a=c.getDepth(we.LEFT)}return a}},t.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;0<=i;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},t.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var t=T.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=T.INTERIOR;break}if(r.isInResult()){t=T.EXTERIOR;break}}}if(t===T.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===T.INTERIOR):(s.isInResult()&&(i=T.EXTERIOR),a.isInResult()&&(i=T.INTERIOR))}},t.prototype.computeLabelling=function(t){o.prototype.computeLabelling.call(this,t),this._label=new Pe(T.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),r=0;r<2;r++){var i=n.getLocation(r);i!==T.INTERIOR&&i!==T.BOUNDARY||this._label.setLocation(r,T.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(qn),Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createNode=function(t){return new je(t,new zn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qe),Xn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Xn.prototype.compareTo=function(t){var e=t;return Xn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Xn.prototype.interfaces_=function(){return[I]},Xn.prototype.getClass=function(){return Xn},Xn.orientation=function(t){return 1===St.increasingDirection(t)},Xn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var p=(u+=i)===s,h=(c+=o)===a;if(p&&!h)return-1;if(!p&&h)return 1;if(p&&h)return 0}};var Wn=function(){this._edges=new bt,this._ocaMap=new p};Wn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);0<e&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)0<i&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Wn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Wn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Wn.prototype.iterator=function(){return this._edges.iterator()},Wn.prototype.getEdges=function(){return this._edges},Wn.prototype.get=function(t){return this._edges.get(t)},Wn.prototype.findEqualEdge=function(t){var e=new Xn(t.getCoordinates());return this._ocaMap.get(e)},Wn.prototype.add=function(t){this._edges.add(t);var e=new Xn(t.getCoordinates());this._ocaMap.put(e,t)},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Jn=function(){};Jn.prototype.processIntersections=function(t,e,n,r){},Jn.prototype.isDone=function(){},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var Hn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0;var t=arguments[this.numTests=0];this._li=t};Hn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Hn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Hn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Hn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Hn.prototype.getLineIntersector=function(){return this._li},Hn.prototype.hasProperIntersection=function(){return this._hasProper},Hn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Hn.prototype.hasIntersection=function(){return this._hasIntersection},Hn.prototype.isDone=function(){return!1},Hn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Hn.prototype.interfaces_=function(){return[Jn]},Hn.prototype.getClass=function(){return Hn},Hn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Kn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new C(t),this.segmentIndex=e,this.dist=n};Kn.prototype.getSegmentIndex=function(){return this.segmentIndex},Kn.prototype.getCoordinate=function(){return this.coord},Kn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Kn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Kn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Kn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Kn.prototype.getDistance=function(){return this.dist},Kn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Kn.prototype.interfaces_=function(){return[I]},Kn.prototype.getClass=function(){return Kn};var $n=function(){this._nodeMap=new p,this.edge=null;var t=arguments[0];this.edge=t};$n.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},$n.prototype.iterator=function(){return this._nodeMap.values().iterator()},$n.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},$n.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},$n.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=0<e.dist||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new C(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new nr(o,new Pe(this.edge._label))},$n.prototype.add=function(t,e,n){var r=new Kn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},$n.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var Zn=function(){};Zn.prototype.getChainStartIndices=function(t){var e=0,n=new bt;n.add(new R(e));do{var r=this.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return Zn.toIntArray(n)},Zn.prototype.findChainEnd=function(t,e){for(var n=ke.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&ke.quadrant(t[r-1],t[r])===n;)r++;return r-1},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn},Zn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new X,this.env2=new X;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Zn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n<e?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],p=this.pts[o],h=s.pts[a],f=s.pts[u];if(o-i==1&&u-a==1)return c.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(l,p),this.env2.init(h,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((a+u)/2);i<d&&(a<g&&this.computeIntersectsForChain(i,d,s,a,g,c),g<u&&this.computeIntersectsForChain(i,d,s,g,u,c)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,c),g<u&&this.computeIntersectsForChain(d,o,s,g,u,c))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var tr=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][we.RIGHT]-this._depth[t][we.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?T.EXTERIOR:T.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==T.EXTERIOR&&r!==T.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===T.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===T.EXTERIOR?0:t===T.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(r){function s(){if(r.call(this),this.pts=null,this._env=null,this.eiList=new $n(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var t=arguments[0];s.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}}return r&&(s.__proto__=r),((s.prototype=Object.create(r&&r.prototype)).constructor=s).prototype.getDepth=function(){return this._depth},s.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new s(t,Pe.toLineLabel(this._label))},s.prototype.isIsolated=function(){return this._isIsolated},s.prototype.getCoordinates=function(){return this.pts},s.prototype.setIsolated=function(t){this._isIsolated=t},s.prototype.setName=function(t){this._name=t},s.prototype.equals=function(t){if(!(t instanceof s))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--i])||(r=!1),!n&&!r)return!1;return!0},s.prototype.getCoordinate=function(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},s.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},s.prototype.computeIM=function(t){s.updateIM(this._label,t)},s.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},s.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},s.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},s.prototype.getDepthDelta=function(){return this._depthDelta},s.prototype.getNumPoints=function(){return this.pts.length},s.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;0<=e;e--)t.print(this.pts[e]+" ");t.println("")},s.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},s.prototype.getEnvelope=function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},s.prototype.addIntersection=function(t,e,n,r){var i=new C(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},s.prototype.toString=function(){var t=new A;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},s.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},s.prototype.setDepthDelta=function(t){this._depthDelta=t},s.prototype.getEdgeIntersectionList=function(){return this.eiList},s.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.updateIM=function(){if(2!==arguments.length)return r.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,we.ON),t.getLocation(1,we.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,we.LEFT),t.getLocation(1,we.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,we.RIGHT),t.getLocation(1,we.RIGHT),2))},s}(De),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Wn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Pe(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new bt,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Fn(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new bt,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Oe;i.create(r),e.add(i)}}return Qe.sort(e,Qe.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new xn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Hn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Rn(n,this._bufParams),i=new kn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new ze(new Yn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Ye(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new nr(i.getCoordinates(),new Pe(s));this.insertUniqueEdge(a)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,we.LEFT),n=t.getLocation(0,we.RIGHT);return e===T.INTERIOR&&n===T.EXTERIOR?1:e===T.EXTERIOR&&n===T.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new _e,n=new bt;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(O(arguments[0],Et))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&z.out.println(n)}},ir.prototype.scale=function(){if(O(arguments[0],Et)){for(var t=arguments[0],e=new bt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new C(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return St.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[En]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},sr={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var c=0;c<a.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],p=arguments[1],h=arguments[2],f=arguments[3];if(l===h&&p===f)return null;var d=l.getCoordinates()[p],g=l.getCoordinates()[p+1],y=h.getCoordinates()[f],_=h.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,y,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,_)))throw new Q("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+_)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},sr.fact.get=function(){return new _e},Object.defineProperties(or,sr);var ar=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new m("Scale factor must be non-zero");1!==e&&(this._pt=new C(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new C,this._p1Scaled=new C),this.initCorners(this._pt)},ur={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ar.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return et.isTrue(!(s&&a),"Found bad envelope test"),a},ar.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new C(this._maxx,this._maxy),this._corner[1]=new C(this._minx,this._maxy),this._corner[2]=new C(this._minx,this._miny),this._corner[3]=new C(this._maxx,this._miny)},ar.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ar.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ar.prototype.getCoordinate=function(){return this._originalPt},ar.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ar.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ar.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ar.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ar.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},ar.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar},ur.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ar,ur);var cr=function(){this.tempEnv1=new X,this.selectedSegment=new gn};cr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var lr=function(){this._index=null;var t=arguments[0];this._index=t},pr={HotPixelSnapAction:{configurable:!0}};lr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new hr(e,n,r);return this._index.query(i,{interfaces_:function(){return[He]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr},pr.HotPixelSnapAction.get=function(){return hr},Object.defineProperties(lr,pr);var hr=function(r){function t(){r.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(2!==arguments.length)return r.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(cr),fr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new bt};fr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},fr.prototype.isDone=function(){return!1},fr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fr.prototype.interfaces_=function(){return[Jn]},fr.prototype.getClass=function(){return fr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof B))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new fr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(O(arguments[0],Et))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new ar(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new xn,this._pointSnapper=new lr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new ar(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[En]},dr.prototype.getClass=function(){return dr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Cn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new fe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gr.MAX_PRECISION_DIGITS;0<=e;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Te))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new fe(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},gr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new gr(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new gr(n);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof Cn&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=arguments[2];return new gr(s,u).getResultGeometry(a)}}else if(4===arguments.length){var c=arguments[0],l=arguments[1],p=arguments[2],h=arguments[3],f=new gr(c);return f.setQuadrantSegments(p),f.setEndCapStyle(h),f.getResultGeometry(l)}},gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=M.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(0<e?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},yr.CAP_ROUND.get=function(){return Cn.CAP_ROUND},yr.CAP_BUTT.get=function(){return Cn.CAP_FLAT},yr.CAP_FLAT.get=function(){return Cn.CAP_FLAT},yr.CAP_SQUARE.get=function(){return Cn.CAP_SQUARE},yr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,yr);var _r=function(){this._pt=[new C,new C],this._distance=v.NaN,this._isNull=!0};_r.prototype.getCoordinates=function(){return this._pt},_r.prototype.getCoordinate=function(t){return this._pt[t]},_r.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},_r.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},_r.prototype.getDistance=function(){return this._distance},_r.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r};var mr=function(){};mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.computeDistance=function(){if(arguments[2]instanceof _r&&arguments[0]instanceof Ht&&arguments[1]instanceof C)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new gn,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof _r&&arguments[0]instanceof Qt&&arguments[1]instanceof C){var a=arguments[0],u=arguments[1],c=arguments[2];mr.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)mr.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof _r&&arguments[0]instanceof lt&&arguments[1]instanceof C){var p=arguments[0],h=arguments[1],f=arguments[2];if(p instanceof Ht)mr.computeDistance(p,h,f);else if(p instanceof Qt)mr.computeDistance(p,h,f);else if(p instanceof Bt)for(var d=p,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);mr.computeDistance(y,h,f)}else f.setMinimum(p.getCoordinate(),h)}else if(arguments[2]instanceof _r&&arguments[0]instanceof gn&&arguments[1]instanceof C){var _=arguments[0],m=arguments[1],v=arguments[2],E=_.closestPoint(m);v.setMinimum(E,m)}};var vr=function(t){this._maxPtDist=new _r,this._inputGeom=t||null},Er={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};vr.prototype.computeMaxMidpointDistance=function(t){var e=new xr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vr.prototype.computeMaxVertexDistance=function(t){var e=new Ir(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vr.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},vr.prototype.getDistancePoints=function(){return this._maxPtDist},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},Er.MaxPointDistanceFilter.get=function(){return Ir},Er.MaxMidpointDistanceFilter.get=function(){return xr},Object.defineProperties(vr,Er);var Ir=function(t){this._maxPtDist=new _r,this._minPtDist=new _r,this._geom=t||null};Ir.prototype.filter=function(t){this._minPtDist.initialize(),mr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ir.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ir.prototype.interfaces_=function(){return[ft]},Ir.prototype.getClass=function(){return Ir};var xr=function(t){this._maxPtDist=new _r,this._minPtDist=new _r,this._geom=t||null};xr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new C((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),mr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xr.prototype.isDone=function(){return!1},xr.prototype.isGeometryChanged=function(){return!1},xr.prototype.getMaxPointDistance=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[Vt]},xr.prototype.getClass=function(){return xr};var br=function(t){this._comps=t||null};br.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},br.prototype.interfaces_=function(){return[Ut]},br.prototype.getClass=function(){return br},br.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return br.getPolygons(t,new bt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof Bt&&e.apply(new br(n)),n}};var Cr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Cr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Ht&&this._lines.add(t)},Cr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Cr.prototype.interfaces_=function(){return[ct]},Cr.prototype.getClass=function(){return Cr},Cr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Cr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Cr.getLines(e,n))}},Cr.getLines=function(){if(1===arguments.length){var t=arguments[0];return Cr.getLines(t,!1)}if(2===arguments.length){if(O(arguments[0],Et)&&O(arguments[1],Et)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();Cr.getLines(i,n)}return n}if(arguments[0]instanceof lt&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new bt;return o.apply(new Cr(a,s)),a}if(arguments[0]instanceof lt&&O(arguments[1],Et)){var u=arguments[0],c=arguments[1];return u instanceof Ht?c.add(u):u.apply(new Cr(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&O(arguments[0],Et)&&O(arguments[1],Et)){for(var l=arguments[0],p=arguments[1],h=arguments[2],f=l.iterator();f.hasNext();){var d=f.next();Cr.getLines(d,p,h)}return p}if("boolean"==typeof arguments[2]&&arguments[0]instanceof lt&&O(arguments[1],Et)){var g=arguments[0],y=arguments[1],_=arguments[2];return g.apply(new Cr(y,_)),y}}};var wr=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new m("Rule must be non-null");this._boundaryRule=t}};wr.prototype.locateInternal=function(){if(arguments[0]instanceof C&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return T.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===T.EXTERIOR)return T.EXTERIOR;if(r===T.BOUNDARY)return T.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===T.INTERIOR)return T.EXTERIOR;if(s===T.BOUNDARY)return T.BOUNDARY}return T.INTERIOR}if(arguments[0]instanceof C&&arguments[1]instanceof Ht){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return T.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!a.equals(c[0])&&!a.equals(c[c.length-1])?at.isOnLine(a,c)?T.INTERIOR:T.EXTERIOR:T.BOUNDARY}if(arguments[0]instanceof C&&arguments[1]instanceof $t){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?T.INTERIOR:T.EXTERIOR}},wr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):T.EXTERIOR},wr.prototype.intersects=function(t,e){return this.locate(t,e)!==T.EXTERIOR},wr.prototype.updateLocationInfo=function(t){t===T.INTERIOR&&(this._isIn=!0),t===T.BOUNDARY&&this._numBoundaries++},wr.prototype.computeLocation=function(t,e){if(e instanceof $t&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Ht)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof qt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof Bt)for(var u=new Vn(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},wr.prototype.locate=function(t,e){return e.isEmpty()?T.EXTERIOR:e instanceof Ht?this.locateInternal(t,e):e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?T.BOUNDARY:0<this._numBoundaries||this._isIn?T.INTERIOR:T.EXTERIOR)},wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr};var Sr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Nr={INSIDE_AREA:{configurable:!0}};Sr.prototype.isInsideArea=function(){return this._segIndex===Sr.INSIDE_AREA},Sr.prototype.getCoordinate=function(){return this._pt},Sr.prototype.getGeometryComponent=function(){return this._component},Sr.prototype.getSegmentIndex=function(){return this._segIndex},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr},Nr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Sr,Nr);var Tr=function(t){this._pts=t||null};Tr.prototype.filter=function(t){t instanceof $t&&this._pts.add(t)},Tr.prototype.interfaces_=function(){return[Ut]},Tr.prototype.getClass=function(){return Tr},Tr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof $t?Qe.singletonList(t):Tr.getPoints(t,new bt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof Bt&&e.apply(new Tr(n)),n}};var Lr=function(){this._locations=null;var t=arguments[0];this._locations=t};Lr.prototype.filter=function(t){(t instanceof $t||t instanceof Ht||t instanceof Qt)&&this._locations.add(new Sr(t,0,t.getCoordinate()))},Lr.prototype.interfaces_=function(){return[Ut]},Lr.prototype.getClass=function(){return Lr},Lr.getLocations=function(t){var e=new bt;return t.apply(new Lr(e)),e};var Or=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new wr,this._minDistanceLocation=null,this._minDistance=v.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Or.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=br.getPolygons(this._geom[e]);if(0<i.size()){var o=Lr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&O(arguments[0],xt)&&O(arguments[1],xt)){for(var s=arguments[0],a=arguments[1],u=arguments[2],c=0;c<s.size();c++)for(var l=s.get(c),p=0;p<a.size();p++)if(this.computeContainmentDistance(l,a.get(p),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Sr&&arguments[1]instanceof Qt){var h=arguments[0],f=arguments[1],d=arguments[2],g=h.getCoordinate();if(T.EXTERIOR!==this._ptLocator.locate(g,f))return d[this._minDistance=0]=h,d[1]=new Sr(f,g),null}},Or.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Or.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Cr.getLines(this._geom[0]),n=Cr.getLines(this._geom[1]),r=Tr.getPoints(this._geom[0]),i=Tr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Or.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Or.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Or.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Or.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Ht&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var s=at.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new Sr(t,o,a),n[1]=new Sr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ht&&arguments[1]instanceof Ht){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var p=u.getCoordinates(),h=c.getCoordinates(),f=0;f<p.length-1;f++)for(var d=0;d<h.length-1;d++){var g=at.distanceLineLine(p[f],p[f+1],h[d],h[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new gn(p[f],p[f+1]),_=new gn(h[d],h[d+1]),m=y.closestPoints(_);l[0]=new Sr(u,f,m[0]),l[1]=new Sr(c,d,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},Or.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Sr(i,0,i.getCoordinate()),n[1]=new Sr(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Or.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new m("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Or.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.distance=function(t,e){return new Or(t,e).distance()},Or.isWithinDistance=function(t,e,n){return new Or(t,e,n).distance()<=n},Or.nearestPoints=function(t,e){return new Or(t,e).nearestPoints()};var Mr=function(){this._pt=[new C,new C],this._distance=v.NaN,this._isNull=!0};Mr.prototype.getCoordinates=function(){return this._pt},Mr.prototype.getCoordinate=function(t){return this._pt[t]},Mr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Mr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Mr.prototype.toString=function(){return Z.toLineString(this._pt[0],this._pt[1])},Mr.prototype.getDistance=function(){return this._distance},Mr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr};var Pr=function(){};Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.computeDistance=function(){if(arguments[2]instanceof Mr&&arguments[0]instanceof Ht&&arguments[1]instanceof C)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Mr&&arguments[0]instanceof Qt&&arguments[1]instanceof C){var a=arguments[0],u=arguments[1],c=arguments[2];Pr.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)Pr.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Mr&&arguments[0]instanceof lt&&arguments[1]instanceof C){var p=arguments[0],h=arguments[1],f=arguments[2];if(p instanceof Ht)Pr.computeDistance(p,h,f);else if(p instanceof Qt)Pr.computeDistance(p,h,f);else if(p instanceof Bt)for(var d=p,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Pr.computeDistance(y,h,f)}else f.setMinimum(p.getCoordinate(),h)}else if(arguments[2]instanceof Mr&&arguments[0]instanceof gn&&arguments[1]instanceof C){var _=arguments[0],m=arguments[1],v=arguments[2],E=_.closestPoint(m);v.setMinimum(E,m)}};var Ar=function(){this._g0=null,this._g1=null,this._ptDist=new Mr;var t=arguments[this._densifyFrac=0],e=arguments[1];this._g0=t,this._g1=e},Rr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Ar.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Ar.prototype.setDensifyFraction=function(t){if(1<t||t<=0)throw new m("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Ar.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Ar.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Ar.prototype.computeOrientedDistance=function(t,e,n){var r=new Fr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),0<this._densifyFrac){var i=new Dr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Ar.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ar(t,e).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Ar(n,r);return o.setDensifyFraction(i),o.distance()}},Rr.MaxPointDistanceFilter.get=function(){return Fr},Rr.MaxDensifiedByFractionDistanceFilter.get=function(){return Dr},Object.defineProperties(Ar,Rr);var Fr=function(){this._maxPtDist=new Mr,this._minPtDist=new Mr,this._euclideanDist=new Pr,this._geom=null;var t=arguments[0];this._geom=t};Fr.prototype.filter=function(t){this._minPtDist.initialize(),Pr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Fr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fr.prototype.interfaces_=function(){return[ft]},Fr.prototype.getClass=function(){return Fr};var Dr=function(){this._maxPtDist=new Mr,this._minPtDist=new Mr,this._geom=null;var t=arguments[this._numSubSegs=0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Dr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*i,u=n.y+s*o,c=new C(a,u);this._minPtDist.initialize(),Pr.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Dr.prototype.isDone=function(){return!1},Dr.prototype.isGeometryChanged=function(){return!1},Dr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dr.prototype.interfaces_=function(){return[Vt]},Dr.prototype.getClass=function(){return Dr};var jr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Gr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};jr.prototype.checkMaximumDistance=function(t,e,n){var r=new Ar(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Z.toLineString(i[0],i[1])+")"}},jr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=jr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(0<this._bufDistance?this.checkPositiveValid():this.checkNegativeValid(),jr.VERBOSE&&z.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},jr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof Bt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},jr.prototype.getErrorIndicator=function(){return this._errorIndicator},jr.prototype.checkMinimumDistance=function(t,e,n){var r=new Or(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Z.toLineString(i[0],i[1])+" )"}},jr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},jr.prototype.getErrorLocation=function(){return this._errorLocation},jr.prototype.getPolygonLines=function(t){for(var e=new bt,n=new Cr(e),r=br.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},jr.prototype.getErrorMessage=function(){return this._errMsg},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},Gr.VERBOSE.get=function(){return!1},Gr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(jr,Gr);var kr=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Ur={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};kr.prototype.isValid=function(){return this.checkPolygonal(),this._isValid&&(this.checkExpectedEmpty(),this._isValid&&(this.checkEnvelope(),this._isValid&&(this.checkArea(),this._isValid&&this.checkDistance()))),this._isValid},kr.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*kr.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new X(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new X(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},kr.prototype.checkDistance=function(){var t=new jr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},kr.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();0<this._distance&&e<t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},kr.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},kr.prototype.getErrorIndicator=function(){return this._errorIndicator},kr.prototype.getErrorLocation=function(){return this._errorLocation},kr.prototype.checkExpectedEmpty=function(){return 2<=this._input.getDimension()?null:0<this._distance?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},kr.prototype.report=function(t){if(!kr.VERBOSE)return null;z.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},kr.prototype.getErrorMessage=function(){return this._errorMsg},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.isValidMsg=function(t,e,n){var r=new kr(t,e,n);return r.isValid()?null:r.getErrorMessage()},kr.isValid=function(t,e,n){return!!new kr(t,e,n).isValid()},Ur.VERBOSE.get=function(){return!1},Ur.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(kr,Ur);var Vr=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Vr.prototype.getCoordinates=function(){return this._pts},Vr.prototype.size=function(){return this._pts.length},Vr.prototype.getCoordinate=function(t){return this._pts[t]},Vr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Vr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:pn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Vr.prototype.setData=function(t){this._data=t},Vr.prototype.getData=function(){return this._data},Vr.prototype.toString=function(){return Z.toLineString(new ue(this._pts))},Vr.prototype.interfaces_=function(){return[hn]},Vr.prototype.getClass=function(){return Vr};var Br=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new bt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Br.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Br.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Br.prototype.getIntersectionSegments=function(){return this._intSegments},Br.prototype.count=function(){return this._intersectionCount},Br.prototype.getIntersections=function(){return this._intersections},Br.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Br.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Br.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Br.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Br.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Br.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Br.prototype.interfaces_=function(){return[Jn]},Br.prototype.getClass=function(){return Br},Br.createAllIntersectionsFinder=function(t){var e=new Br(t);return e.setFindAllIntersections(!0),e},Br.createAnyIntersectionFinder=function(t){return new Br(t)},Br.createIntersectionCounter=function(t){var e=new Br(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var qr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};qr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},qr.prototype.getIntersections=function(){return this._segInt.getIntersections()},qr.prototype.isValid=function(){return this.execute(),this._isValid},qr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Br(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new xn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},qr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Te(this.getErrorMessage(),this._segInt.getInteriorIntersection())},qr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Z.toLineString(t[0],t[1])+" and "+Z.toLineString(t[2],t[3])},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.computeIntersections=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var zr=function t(){this._nv=null;var e=arguments[0];this._nv=new qr(t.toSegmentStrings(e))};zr.prototype.checkValid=function(){this._nv.checkValid()},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},zr.toSegmentStrings=function(t){for(var e=new bt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Vr(r.getCoordinates(),r))}return e},zr.checkValid=function(t){new zr(t).checkValid()};var Yr=function(t){this._mapOp=t};Yr.prototype.map=function(t){for(var e=new bt,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(_e.toGeometryArray(e))},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.map=function(t,e){return new Yr(e).map(t)};var Xr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new bt,this._resultLineList=new bt;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Xr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Xr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Xr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Xr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Si.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Xr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Xr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Xr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Xr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Si.isResultOfOp(r,e)&&e===Si.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Wr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new bt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Wr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Wr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Si.INTERSECTION)){var r=n.getLabel();Si.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Wr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Jr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Jr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Jr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new bt,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ee||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new bt;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Jr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Jr.prototype.getInputGeometry=function(){return this._inputGeom},Jr.prototype.transformMultiLineString=function(t,e){for(var n=new bt,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Jr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Jr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Jr.prototype.transformMultiPoint=function(t,e){for(var n=new bt,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Jr.prototype.transformMultiPolygon=function(t,e){for(var n=new bt,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Jr.prototype.copy=function(t){return t.copy()},Jr.prototype.transformGeometryCollection=function(t,e){for(var n=new bt,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_e.toGeometryArray(n)):this._factory.buildGeometry(n)},Jr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof $t)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Ht)return this.transformLineString(t,null);if(t instanceof qt)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Bt)return this.transformGeometryCollection(t,null);throw new m("Unknown Geometry subtype: "+t.getClass().getName())},Jr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return 0<r&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr};var Hr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Ht&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Hr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new C(o)),0===r&&this._isClosed&&t.set(t.size()-1,new C(o)))}},Hr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Hr.prototype.snapTo=function(t){var e=new wt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Hr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);0<=o&&t.add(o+1,new C(i),!1)}},Hr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=v.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Hr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr},Hr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Kr=function(t){this._srcGeom=t||null},$r={SNAP_PRECISION_FACTOR:{configurable:!0}};Kr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Zr(e,n).transform(this._srcGeom)},Kr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Zr(t,n,!0).transform(this._srcGeom),i=r;return e&&O(i,Zt)&&(i=r.buffer(0)),i},Kr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Kr.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Kr.prototype.computeMinimumSegmentLength=function(t){for(var e=v.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr},Kr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Kr(t);r[0]=i.snapTo(e,n);var o=new Kr(e);return r[1]=o.snapTo(r[0],n),r},Kr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Kr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===fe.FIXED){var r=1/n.getScale()*2/1.415;e<r&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Kr.computeOverlaySnapTolerance(i),Kr.computeOverlaySnapTolerance(o))}},Kr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Kr.SNAP_PRECISION_FACTOR},Kr.snapToSelf=function(t,e,n){return new Kr(t).snapToSelf(e,n)},$r.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Kr,$r);var Zr=function(r){function t(t,e,n){r.call(this),this._snapTolerance=t||null,this._snapPts=e||null,this._isSelfSnap=void 0!==n&&n}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.snapLine=function(t,e){var n=new Hr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},t.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Jr),Qr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qr.prototype.getCommon=function(){return v.longBitsToDouble(this._commonBits)},Qr.prototype.add=function(t){var e=v.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qr.signExpBits(this._commonBits),this._isFirst=!1,null):Qr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=v.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+v.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qr.signExpBits=function(t){return t>>52},Qr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;0<=r;r--){if(Qr.getBit(t,r)!==Qr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new C(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Qr,this._commonBitsY=new Qr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new C(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ft]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Vt]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Kr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Si.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||z.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Kr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Kr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Si.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Si.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Si.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Si.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Si.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Si.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Si.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Si.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Si.DIFFERENCE)};var si=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};si.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si};var ai=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};ai.prototype.isDelete=function(){return this._eventType===ai.DELETE},ai.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ai.prototype.getObject=function(){return this._obj},ai.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ai.prototype.getInsertEvent=function(){return this._insertEvent},ai.prototype.isInsert=function(){return this._eventType===ai.INSERT},ai.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ai.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ai.prototype.interfaces_=function(){return[I]},ai.prototype.getClass=function(){return ai},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(ai,ui);var ci=function(){};ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var li=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};li.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(li.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},li.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},li.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},li.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},li.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},li.prototype.hasProperIntersection=function(){return this._hasProper},li.prototype.hasIntersection=function(){return this._hasIntersection},li.prototype.isDone=function(){return this._isDone},li.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},li.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},li.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var pi=function(t){function e(){t.call(this),this.events=new bt,this.nOverlaps=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof li&&O(arguments[0],xt)&&O(arguments[1],xt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&O(arguments[0],xt)&&arguments[1]instanceof li){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new si(n,i),s=new ai(e,n.getMinX(i),o);this.events.add(s),this.events.add(new ai(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),hi=function(){this._min=v.POSITIVE_INFINITY,this._max=v.NEGATIVE_INFINITY},fi={NodeComparator:{configurable:!0}};hi.prototype.getMin=function(){return this._min},hi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},hi.prototype.getMax=function(){return this._max},hi.prototype.toString=function(){return Z.toLineString(new C(this._min,0),new C(this._max,0))},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi},fi.NodeComparator.get=function(){return di},Object.defineProperties(hi,fi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:o<i?1:0},di.prototype.interfaces_=function(){return[b]},di.prototype.getClass=function(){return di};var gi=function(r){function t(){r.call(this),this._item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._min=t,this._max=e,this._item=n}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(hi),yi=function(n){function t(){n.call(this),this._node1=null,this._node2=null;var t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},t.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(hi),_i=function(){this._leaves=new bt,this._root=null,this._level=0};_i.prototype.buildTree=function(){Qe.sort(this._leaves,new hi.NodeComparator);for(var t=this._leaves,e=null,n=new bt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},_i.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,n))},_i.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},_i.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},_i.prototype.printNode=function(t){z.out.println(Z.toLineString(new C(t._min,this._level),new C(t._max,this._level)))},_i.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},_i.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yi(t.get(n),t.get(n+1));e.add(i)}}},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i};var mi=function(){this._items=new bt};mi.prototype.visitItem=function(t){this._items.add(t)},mi.prototype.getItems=function(){return this._items},mi.prototype.interfaces_=function(){return[He]},mi.prototype.getClass=function(){return mi};var vi=function(){this._index=null;var t=arguments[0];if(!O(t,Zt))throw new m("Argument must be Polygonal");this._index=new xi(t)},Ei={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vi.prototype.locate=function(t){var e=new st(t),n=new Ii(e);return this._index.query(t.y,t.y,n),e.getLocation()},vi.prototype.interfaces_=function(){return[Un]},vi.prototype.getClass=function(){return vi},Ei.SegmentVisitor.get=function(){return Ii},Ei.IntervalIndexedGeometry.get=function(){return xi},Object.defineProperties(vi,Ei);var Ii=function(){this._counter=null;var t=arguments[0];this._counter=t};Ii.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Ii.prototype.interfaces_=function(){return[He]},Ii.prototype.getClass=function(){return Ii};var xi=function(){this._index=new _i;var t=arguments[0];this.init(t)};xi.prototype.init=function(t){for(var e=Cr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},xi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},xi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi};var bi=function(s){function o(){if(s.call(this),this._parentGeom=null,this._lineEdgeMap=new he,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new wr,2===arguments.length){var t=arguments[0],e=arguments[1],n=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._argIndex=r,this._parentGeom=i,this._boundaryNodeRule=o,null!==i&&this.add(i)}}return s&&(o.__proto__=s),((o.prototype=Object.create(s&&s.prototype)).constructor=o).prototype.insertBoundaryPoint=function(t,e){var n=this._nodes.addNode(e).getLabel(),r=1;n.getLocation(t,we.ON)===T.BOUNDARY&&r++;var i=o.determineBoundary(this._boundaryNodeRule,r);n.setLocation(t,i)},o.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new li(n,!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,u=r||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},o.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},o.prototype.computeEdgeIntersections=function(t,e,n){var r=new li(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},o.prototype.getGeometry=function(){return this._parentGeom},o.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},o.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},o.prototype.addPoint=function(){if(arguments[0]instanceof $t){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,T.INTERIOR)}else if(arguments[0]instanceof C){var e=arguments[0];this.insertPoint(this._argIndex,e,T.INTERIOR)}},o.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),T.EXTERIOR,T.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,T.INTERIOR,T.EXTERIOR)}},o.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],T.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],T.BOUNDARY)},o.prototype.addLineString=function(t){var e=St.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Pe(this._argIndex,T.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(2<=e.length,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},o.prototype.getInvalidPoint=function(){return this._invalidPoint},o.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},o.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},o.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===T.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},o.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=St.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;at.isCCW(r)&&(i=n,o=e);var s=new nr(r,new Pe(this._argIndex,T.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],T.BOUNDARY)},o.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Pe(t,n):i.setLocation(t,n)},o.prototype.createEdgeSetIntersector=function(){return new pi},o.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},o.prototype.add=function(){if(1!==arguments.length)return s.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof ne&&(this._useBoundaryDeterminationRule=!1),t instanceof Qt)this.addPolygon(t);else if(t instanceof Ht)this.addLineString(t);else if(t instanceof $t)this.addPoint(t);else if(t instanceof te)this.addCollection(t);else if(t instanceof qt)this.addCollection(t);else if(t instanceof ne)this.addCollection(t);else{if(!(t instanceof Bt))throw new Error(t.getClass().getName());this.addCollection(t)}},o.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},o.prototype.locate=function(t){return O(this._parentGeom,Zt)&&50<this._parentGeom.getNumGeometries()?(null===this._areaPtLocator&&(this._areaPtLocator=new vi(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},o.prototype.findEdge=function(){if(1===arguments.length){var t=arguments[0];return this._lineEdgeMap.get(t)}return s.prototype.findEdge.apply(this,arguments)},o.prototype.interfaces_=function(){return[]},o.prototype.getClass=function(){return o},o.determineBoundary=function(t,e){return t.isInBoundary(e)?T.BOUNDARY:T.INTERIOR},o}(ze),Ci=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new bi(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;0<=e.getPrecisionModel().compareTo(n.getPrecisionModel())?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new bi(0,e,r),this._arg[1]=new bi(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];0<=i.getPrecisionModel().compareTo(o.getPrecisionModel())?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new bi(0,i,s),this._arg[1]=new bi(1,o,s)}};Ci.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ci.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci};var wi=function(){};wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi},wi.map=function(){if(arguments[0]instanceof lt&&O(arguments[1],wi.MapOp)){for(var t=arguments[0],e=arguments[1],n=new bt,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(O(arguments[0],Et)&&O(arguments[1],wi.MapOp)){for(var o=arguments[0],s=arguments[1],a=new bt,u=o.iterator();u.hasNext();){var c=u.next(),l=s.map(c);null!==l&&a.add(l)}return a}},wi.MapOp=function(){};var Si=function(n){function o(){var t=arguments[0],e=arguments[1];n.call(this,t,e),this._ptLocator=new wr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Wn,this._resultPolyList=new bt,this._resultLineList=new bt,this._resultPointList=new bt,this._graph=new ze(new Yn),this._geomFact=t.getFactory()}return n&&(o.__proto__=n),((o.prototype=Object.create(n&&n.prototype)).constructor=o).prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Pe(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},o.prototype.getGraph=function(){return this._graph},o.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},o.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},o.prototype.computeGeometry=function(t,e,n,r){var i=new bt;return i.addAll(t),i.addAll(e),i.addAll(n),i.isEmpty()?o.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(i)},o.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},o.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==T.EXTERIOR)return!0}return!1},o.prototype.replaceCollapsedEdges=function(){for(var t=new bt,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},o.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},o.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},o.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},o.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new bt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),zr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ye(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Xr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Wr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},o.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},o.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},o.prototype.findResultAreaEdges=function(t){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&o.isResultOfOp(r.getLocation(0,we.RIGHT),r.getLocation(1,we.RIGHT),t)&&n.setInResult(!0)}},o.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,we.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,we.LEFT,r.getLocation(i,we.LEFT)),et.isTrue(!r.isNull(i,we.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,we.RIGHT,r.getLocation(i,we.RIGHT))))}}},o.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},o.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},o.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},o.prototype.interfaces_=function(){return[]},o.prototype.getClass=function(){return o},o}(Ci);Si.overlayOp=function(t,e,n){return new Si(t,e).getResultGeometry(n)},Si.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Si.createEmptyResult(Si.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Yr.map(t,{interfaces_:function(){return[wi.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Si.INTERSECTION)},Si.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Si.createEmptyResult(Si.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Si.SYMDIFFERENCE)},Si.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Si.INTERSECTION:o=Math.min(r,i);break;case Si.UNION:o=Math.max(r,i);break;case Si.DIFFERENCE:o=r;break;case Si.SYMDIFFERENCE:o=Math.max(r,i)}return o},Si.createEmptyResult=function(t,e,n,r){var i=null;switch(Si.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Si.difference=function(t,e){return t.isEmpty()?Si.createEmptyResult(Si.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Si.DIFFERENCE))},Si.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Si.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===T.BOUNDARY&&(i=T.INTERIOR),o===T.BOUNDARY&&(o=T.INTERIOR),s){case Si.INTERSECTION:return i===T.INTERIOR&&o===T.INTERIOR;case Si.UNION:return i===T.INTERIOR||o===T.INTERIOR;case Si.DIFFERENCE:return i===T.INTERIOR&&o!==T.INTERIOR;case Si.SYMDIFFERENCE:return i===T.INTERIOR&&o!==T.INTERIOR||i!==T.INTERIOR&&o===T.INTERIOR}return!1}},Si.INTERSECTION=1,Si.UNION=2,Si.DIFFERENCE=3,Si.SYMDIFFERENCE=4;var Ni=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new wr,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ni.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ni.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?T.BOUNDARY:this._ptLocator.locate(t,this._g)},Ni.prototype.extractLinework=function(t){var e=new Ti;t.apply(e);var n=e.getLinework(),r=_e.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni};var Ti=function(){this._linework=null,this._linework=new bt};Ti.prototype.getLinework=function(){return this._linework},Ti.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ti.prototype.interfaces_=function(){return[Ut]},Ti.prototype.getClass=function(){return Ti};var Li=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Li.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Li.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Li.prototype.getPoints=function(t){for(var e=new bt,n=Cr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Li.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var p=new C(c-u,l+a);r.add(p)}if(this._doRight){var h=new C(c+u,l-a);r.add(h)}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li};var Oi=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new bt;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ni(this._geom[0],this._boundaryDistanceTolerance),new Ni(this._geom[1],this._boundaryDistanceTolerance),new Ni(this._geom[2],this._boundaryDistanceTolerance)]},Mi={TOLERANCE:{configurable:!0}};Oi.prototype.reportResult=function(t,e,n){z.out.println("Overlay result invalid - A:"+T.toLocationSymbol(e[0])+" B:"+T.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+T.toLocationSymbol(e[2]))},Oi.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Oi.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Oi.hasLocation(this._location,T.BOUNDARY)||this.isValidResult(r,this._location)}},Oi.prototype.addTestPts=function(t){var e=new Li(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Oi.prototype.isValidResult=function(t,e){var n=Si.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===T.INTERIOR);return r||this.reportResult(t,e,n),r},Oi.prototype.getInvalidLocation=function(){return this._invalidLocation},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Oi.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Kr.computeSizeBasedSnapTolerance(t),Kr.computeSizeBasedSnapTolerance(e))},Oi.isValid=function(t,e,n,r){return new Oi(t,e,r).isValid(n)},Mi.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Oi,Mi);var Pi=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Pi.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Pi.prototype.combine=function(){for(var t=new bt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.combine=function(){if(1===arguments.length){var t=arguments[0];return new Pi(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Pi(Pi.createList(e,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new Pi(Pi.createList(r,i,o)).combine()}},Pi.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Pi.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new bt;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new bt;return s.add(r),s.add(i),s.add(o),s}};var Ai=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new bt)},Ri={STRTREE_NODE_CAPACITY:{configurable:!0}};Ai.prototype.reduceToGeometries=function(t){for(var e=new bt,n=t.iterator();n.hasNext();){var r=n.next(),i=null;O(r,xt)?i=this.unionTree(r):r instanceof lt&&(i=r),e.add(i)}return e},Ai.prototype.extractByEnvelope=function(t,e,n){for(var r=new bt,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Ai.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Pi.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Ai.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new sn(Ai.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Ai.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Ai.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Ai.getGeometry(e,n),Ai.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Ai.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Ai.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Ai.prototype.unionActual=function(t,e){return Ai.restrictToPolygons(t.union(e))},Ai.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Ai.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new bt,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Pi.combine(r)},Ai.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},Ai.restrictToPolygons=function(t){if(O(t,Zt))return t;var e=br.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_e.toPolygonArray(e))},Ai.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ai.union=function(t){return new Ai(t).union()},Ri.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ai,Ri);var Fi=function(){};Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi},Fi.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Si.createEmptyResult(Si.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Si.UNION)},t.GeoJSONReader=be,t.GeoJSONWriter=Ce,t.OverlayOp=Si,t.UnionOp=Fi,t.BufferOp=gr,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==e?n:r.jsts={})},{}],64:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=t*e,i=p*t,o=i-(i-t),s=t-o,a=p*e,u=a-(a-e),c=e-u,l=s*c-(r-o*u-s*u-o*c);if(n)return n[0]=l,n[1]=r,n;return[l,r]};var p=+(Math.pow(2,27)+1)},{}],65:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);if(n)return n[0]=s+o,n[1]=r,n;return[s+o,r]}},{}],66:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],67:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t};var i=Object.prototype.hasOwnProperty},{}],68:[function(t,e,n){"use strict";var i=t("lodash.isequal"),r=t("@mapbox/geojson-normalize"),o=t("hat"),s=t("./lib/features_at"),a=t("./lib/string_sets_are_equal"),l=t("@mapbox/geojsonhint"),p=t("./constants"),h=t("./lib/string_set"),f=t("./lib/change_style_property"),d={Polygon:t("./feature_types/polygon"),LineString:t("./feature_types/line_string"),Point:t("./feature_types/point"),MultiPolygon:t("./feature_types/multi_feature"),MultiLineString:t("./feature_types/multi_feature"),MultiPoint:t("./feature_types/multi_feature")};e.exports=function(u,c){return c.modes=p.modes,c.getFeatureIdsAt=function(t){return s.click({point:t},null,u).map(function(t){return t.properties.id})},c.getSelectedIds=function(){return u.store.getSelectedIds()},c.getSelected=function(){return{type:p.geojsonTypes.FEATURE_COLLECTION,features:u.store.getSelectedIds().map(function(t){return u.store.get(t)}).map(function(t){return t.toGeoJSON()})}},c.getSelectedPoints=function(){return{type:p.geojsonTypes.FEATURE_COLLECTION,features:u.store.getSelectedCoordinates().map(function(t){return{type:p.geojsonTypes.FEATURE,properties:{},geometry:{type:p.geojsonTypes.POINT,coordinates:t.coordinates}}})}},c.set=function(t){if(void 0===t.type||t.type!==p.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(t.features))throw new Error("Invalid FeatureCollection");var e=u.store.createRenderBatch(),n=u.store.getAllIds().slice(),r=c.add(t),i=new h(r);return(n=n.filter(function(t){return!i.has(t)})).length&&c.delete(n),e(),r},c.add=function(t){var e=l.hint(t,{precisionWarning:!1}).filter(function(t){return"message"!==t.level&&void 0!==t.line});if(e.length)throw new Error(e[0].message);var n=JSON.parse(JSON.stringify(r(t))).features.map(function(t){if(t.id=t.id||o(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===u.store.get(t.id)||u.store.get(t.id).type!==t.geometry.type){var e=d[t.geometry.type];if(void 0===e)throw new Error("Invalid geometry type: "+t.geometry.type+".");var n=new e(u,t);u.store.add(n)}else{var r=u.store.get(t.id);r.properties=t.properties,i(r.getCoordinates(),t.geometry.coordinates)||r.incomingCoords(t.geometry.coordinates)}return t.id});return u.store.render(),n},c.get=function(t){var e=u.store.get(t);if(e)return e.toGeoJSON()},c.getAll=function(){return{type:p.geojsonTypes.FEATURE_COLLECTION,features:u.store.getAll().map(function(t){return t.toGeoJSON()})}},c.delete=function(t){return u.store.delete(t,{silent:!0}),c.getMode()!==p.modes.DIRECT_SELECT||u.store.getSelectedIds().length?u.store.render():u.events.changeMode(p.modes.SIMPLE_SELECT,void 0,{silent:!0}),c},c.deleteAll=function(){return u.store.delete(u.store.getAllIds(),{silent:!0}),c.getMode()===p.modes.DIRECT_SELECT?u.events.changeMode(p.modes.SIMPLE_SELECT,void 0,{silent:!0}):u.store.render(),c},c.changeMode=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return!1==!!u.options.drawEnabled||(t===p.modes.SIMPLE_SELECT&&c.getMode()===p.modes.SIMPLE_SELECT?a(e.featureIds||[],u.store.getSelectedIds())||(u.store.setSelected(e.featureIds,{silent:!0}),u.store.render()):t===p.modes.DIRECT_SELECT&&c.getMode()===p.modes.DIRECT_SELECT&&e.featureId===u.store.getSelectedIds()[0]||u.events.changeMode(t,e,{silent:!0})),c},c.getMode=function(){return u.events.getMode()},c.trash=function(){return u.events.trash({silent:!0}),c},c.combineFeatures=function(){return u.events.combineFeatures({silent:!0}),c},c.uncombineFeatures=function(){return u.events.uncombineFeatures({silent:!0}),c},c.unionPolygon=function(){return u.events.unionPolygon({silent:!0}),c},c.unionLine=function(){return u.events.unionLine({silent:!0}),c},c.splitLine=function(){return u.events.splitLine({silent:!0}),c},c.curveLine=function(){return u.events.curveLine({silent:!0}),c},c.setFeatureProperty=function(t,e,n){return u.store.setFeatureProperty(t,e,n),c},c.setCustomStyle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=void 0!==e.featureIds?e.featureIds:u.store.getSelectedIds();if(!Array.isArray(n))throw new Error("Invalid featureIds");if(0<n.length){for(var r=n.map(function(t){return u.store.get(t)}).map(function(t){return t.toGeoJSON()}),i=0,o=n.length;i<o;i++){var s=n[i],a=u.store.get(s);f.setStyleProperties(a,t),u.store.featureChanged(s)}u.store.render(),u.map.fire(p.events.UPDATE,{action:p.updateActions.CHANGE_PROPERTIES,prevFeatures:r,features:n.map(function(t){return u.store.get(t)}).map(function(t){return t.toGeoJSON()})}),(void 0===e.cancelSelected||(e.cancelSelected||!1))&&u.events.changeMode(p.modes.SIMPLE_SELECT,void 0,{silent:!0})}return c},c.cancelCustomStyle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=void 0!==t.featureIds?t.featureIds:u.store.getSelectedIds();if(!Array.isArray(e))throw new Error("Invalid featureIds");if(0<e.length){for(var n=e.map(function(t){return u.store.get(t)}).map(function(t){return t.toGeoJSON()}),r=0,i=e.length;r<i;r++){var o=e[r],s=u.store.get(o);f.deleteAllStyleProperties(s),u.store.featureChanged(o)}u.store.render(),u.map.fire(p.events.UPDATE,{action:p.updateActions.CHANGE_PROPERTIES,prevFeatures:n,features:e.map(function(t){return u.store.get(t)}).map(function(t){return t.toGeoJSON()})}),(void 0===t.cancelSelected||(t.cancelSelected||!1))&&u.events.changeMode(p.modes.SIMPLE_SELECT,void 0,{silent:!0})}return c},c}},{"./constants":69,"./feature_types/line_string":87,"./feature_types/multi_feature":88,"./feature_types/point":92,"./feature_types/polygon":93,"./lib/change_style_property":99,"./lib/features_at":108,"./lib/string_set":118,"./lib/string_sets_are_equal":119,"@mapbox/geojson-normalize":6,"@mapbox/geojsonhint":7,hat:48,"lodash.isequal":50}],69:[function(t,e,n){"use strict";e.exports={classes:{CONTROL_BASE:"minemap-ctrl",CONTROL_PREFIX:"minemap-ctrl-",CONTROL_BUTTON:"minemap-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"minemap-draw_line",CONTROL_BUTTON_POLYGON:"minemap-draw_polygon",CONTROL_BUTTON_POINT:"minemap-draw_point",CONTROL_BUTTON_TRASH:"minemap-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"minemap-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"minemap-draw_uncombine",CONTROL_GROUP:"minemap-ctrl-group",ATTRIBUTION:"minemap-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"minemap-draw_boxselect"},sources:{HOT:"minemap-draw-hot",COLD:"minemap-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point",CIRCLE:"circle",RECTANGLE:"rectangle",TRIANGLE:"triangle",SECTOR:"sector",ELLIPSE:"ellipse",ARC:"arc",LINE_ARROW:"line_arrow",THIN_STRAIGHT_ARROW:"thin_straight_arrow",THIN_TAIL_ARROW:"thin_tail_arrow",ATTACK_ARROW:"attack_arrow",OFFENSIVE_ARROW:"offensive_arrow",OFFENSIVE_TAIL_ARROW:"offensive_tail_arrow",PINCER_ATTACK_ARROW:"pincer_attack_arrow",CURVE_POLYGON:"curve_polygon"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_CIRCLE:"draw_circle",DRAW_RECTANGLE:"draw_rectangle",DRAW_TRIANGLE:"draw_triangle",DRAW_SECTOR:"draw_sector",DRAW_ELLIPSE:"draw_ellipse",DRAW_ARC:"draw_arc",DRAW_ICON:"draw_icon",DRAW_POINT:"draw_point",SPLIT_POLYGON:"split_polygon",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",FREE_DRAWING:"free_drawing",DRAW_LINE_ARROW:"draw_line_arrow",DRAW_THIN_STRAIGHT_ARROW:"draw_thin_straight_arrow",DRAW_THIN_TAIL_ARROW:"draw_thin_tail_arrow",DRAW_ATTACK_ARROW:"draw_attack_arrow",DRAW_OFFENSIVE_ARROW:"draw_offensive_arrow",DRAW_OFFENSIVE_TAIL_ARROW:"draw_offensive_tail_arrow",DRAW_PINCER_ATTACK_ARROW:"draw_pincer_attack_arrow",DRAW_CURVE_POLYGON:"draw_curve_polygon",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine",REPLACE:"draw.replace",RECORD_CREATE:"edit.record.create",UNDO:"edit.undo",REDO:"edit.redo",SELECTED:"edit.selected"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates",CHANGE_PROPERTIES:"change_properties"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},customStyle:{OPEN:"true",CLOSE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},{}],70:[function(t,e,n){"use strict";var r=t("../constants");e.exports=function(t,e,n){if(0!=!!t.draw.options.drawEnabled)switch(e){case"icon":t.draw&&t.draw.changeMode(r.modes.DRAW_ICON,n);break;case"point":t.draw&&t.draw.changeMode(r.modes.DRAW_POINT,n);break;case"line":t.draw&&t.draw.changeMode(r.modes.DRAW_LINE_STRING,n);break;case"polygon":t.draw&&t.draw.changeMode(r.modes.DRAW_POLYGON,n);break;case"rectangle":t.draw&&t.draw.changeMode(r.modes.DRAW_RECTANGLE,n);break;case"triangle":t.draw&&t.draw.changeMode(r.modes.DRAW_TRIANGLE,n);break;case"circle":t.draw&&t.draw.changeMode(r.modes.DRAW_CIRCLE,n);break;case"sector":t.draw&&t.draw.changeMode(r.modes.DRAW_SECTOR,n);break;case"ellipse":t.draw&&t.draw.changeMode(r.modes.DRAW_ELLIPSE,n);break;case"arc":t.draw&&t.draw.changeMode(r.modes.DRAW_ARC,n);break;case"trash":t.draw&&t.draw.trash();break;case"combine":t.draw&&t.draw.combineFeatures();break;case"uncombine":t.draw&&t.draw.uncombineFeatures();break;case"union_polygon":t.draw&&t.draw.unionPolygon();break;case"split_polygon":t.draw&&t.draw.changeMode(r.modes.SPLIT_POLYGON,n);break;case"union_line":t.draw&&t.draw.unionLine();break;case"split_line":t.draw&&t.draw.splitLine();break;case"curve_line":t.draw&&t.draw.curveLine();break;case"free_drawing":t.draw&&t.draw.changeMode(r.modes.FREE_DRAWING,n);break;case"line_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_LINE_ARROW,n);break;case"thin_straight_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_THIN_STRAIGHT_ARROW,n);break;case"thin_tail_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_THIN_TAIL_ARROW,n);break;case"attack_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_ATTACK_ARROW,n);break;case"offensive_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_OFFENSIVE_ARROW,n);break;case"offensive_tail_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_OFFENSIVE_TAIL_ARROW,n);break;case"pincer_attack_arrow":t.draw&&t.draw.changeMode(r.modes.DRAW_PINCER_ATTACK_ARROW,n);break;case"curve_polygon":t.draw&&t.draw.changeMode(r.modes.DRAW_CURVE_POLYGON,n);break;case"undo":t.event&&t.event.undoHistory();break;case"redo":t.event&&t.event.redoHistory();break;case"static":t.draw&&t.draw.changeMode(r.modes.STATIC)}}},{"../constants":69}],71:[function(t,e,n){"use strict";var i=t("../setup"),o=t("../options"),s=t("../api"),a=t("../constants");e.exports=function(t){!function(t,e){var n={options:t=o(t)};e=s(n,e),n.api=e;var r=i(n);e.onAdd=r.onAdd,e.onRemove=r.onRemove,e.types=a.types,e.options=t}(t,this)}},{"../api":68,"../constants":69,"../options":149,"../setup":151}],72:[function(t,e,n){"use strict";var p=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=t("xtend"),o=t("./draw"),s=t("./events"),a=t("./history/history"),u=t("../constants"),c=t("./btn_ctrl");e.exports=function(l){l.map=null,l.options={},l.controlPosition=void 0,l.events=null,l.draw=null,l.history=null,l.container=null;var r=function(){return{options:l.options||{},controlPosition:l.controlPosition||void 0,draw:(t=l.draw,t?i({add:t.add,get:t.get,getFeatureIdsAt:t.getFeatureIdsAt,getSelectedIds:t.getSelectedIds,getSelected:t.getSelected,getSelectedPoints:t.getSelectedPoints,getAll:t.getAll,delete:t.delete,deleteAll:t.deleteAll,set:t.set,trash:t.trash}):null)};var t};return{init:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return l.draw=new o(e),l.map=t,l.map.addControl(l.draw,n),l.options=e,l.controlPosition=n,l.container=t.getContainer(),l.history&&(l.history=null),l.event&&(l.event.removeEventListeners(),l.event=null),l.history=new a,l.event=new s(l.draw,l.map,l.history,l.container),l.event.addEventListeners(),r()},setOptions:function(t){return l.draw&&l.map&&(l.map.removeControl(l.draw),l.draw=null),l.draw=new o(t),l.map.addControl(l.draw,l.controlPosition),l.options=t,l.history&&(l.history=null),l.event&&(l.event.removeEventListeners(),l.event=null),l.history=new a,l.event=new s(l.draw,l.map,l.history,l.container),l.event.addEventListeners(),r()},dispose:function(){return l.draw&&l.map&&(l.map.removeControl(l.draw),l.draw=null),l.history&&(l.history=null),l.event&&(l.event.removeEventListeners(),l.event=null),delete l.map,delete l.options,delete l.controlPosition,delete l.history,delete l.event,delete l.draw,delete l.container,r()},undoOperation:function(){l.event&&l.event.undoHistory()},redoOperation:function(){l.event&&l.event.redoHistory()},setFeatures:function(t){return l.draw.changeMode(u.modes.SIMPLE_SELECT),l.draw.set(t)},removeFeatures:function(t){if(!Array.isArray(t))throw new Error("Invalid featureIds");if(0===t.length)throw new Error("featureIds");return l.draw.changeMode(u.modes.SIMPLE_SELECT,{featureIds:t}),l.draw.trash(),t},setSelected:function(t){if(!Array.isArray(t))throw new Error("Invalid featureIds");return l.draw.changeMode(u.modes.SIMPLE_SELECT,{featureIds:t}),t},setFeatureProperties:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=!0,r=!1,i=void 0;try{for(var o,s=Object.entries(e)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=p(o.value,2),u=a[0],c=a[1];l.draw.setFeatureProperty(t,u,c)}}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return l.draw.get(t)},getAllHistoryRecords:function(){return l.history?l.history.getAllRecords():[]},clearHistoryRecords:function(){l.history&&l.history.clear()},setCustomStyle:function(t,e){l.draw&&l.draw.setCustomStyle(t,e)},cancelCustomStyle:function(t){l.draw&&l.draw.cancelCustomStyle(t)},onBtnCtrlActive:function(t,e){c(l,t,e)},isDrawEnabled:function(){return l.draw&&!!l.draw.options.drawEnabled},disableDraw:function(){l.draw&&(l.draw.options.drawEnabled=!1)},enableDraw:function(){l.draw&&(l.draw.options.drawEnabled=!0)},isAdsorbEnabled:function(){return l.draw&&!!l.draw.options.adsorbEnabled},disableAdsorb:function(){l.draw&&(l.draw.options.adsorbEnabled=!1)},enableAdsorb:function(){l.draw&&(l.draw.options.adsorbEnabled=!0)}}}},{"../constants":69,"./btn_ctrl":70,"./draw":71,"./events":73,"./history/history":74,xtend:67}],73:[function(t,e,n){"use strict";function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=t("../constants"),_=t("xtend"),a=t("./history/record");e.exports=function(f,d,g,t){var e,n,r={type:(e={},s(e,y.events.DELETE,1),s(e,y.events.UPDATE,2),s(e,y.events.CREATE,3),s(e,y.events.REPLACE,4),e),action:(n={},s(n,y.updateActions.MOVE,1),s(n,y.updateActions.CHANGE_COORDINATES,2),s(n,y.updateActions.CHANGE_PROPERTIES,3),n)},i={onDrawCreate:function(t){var e=new a(3,0,t.features);g.addRecord(e),d.fire(y.events.RECORD_CREATE,{record:e})},onDrawUpdate:function(t){var e=new a(2,r.action[t.action]||0,t.features,t.prevFeatures);g.addRecord(e),d.fire(y.events.RECORD_CREATE,{record:e})},onDrawDelete:function(t){var e=new a(1,0,t.features);g.addRecord(e),d.fire(y.events.RECORD_CREATE,{record:e})},onDrawCombine:function(t){var e=new a(4,0,t.createdFeatures,t.deletedFeatures);g.addRecord(e),d.fire(y.events.RECORD_CREATE,{record:e})},onDrawUncombine:function(t){var e=new a(4,0,t.createdFeatures,t.deletedFeatures);g.addRecord(e),d.fire(y.events.RECORD_CREATE,{record:e})},onDrawReplace:function(t){var e=new a(4,0,t.createdFeatures,t.deletedFeatures);g.addRecord(e),d.fire(y.events.RECORD_CREATE,{record:e})},onKeydown:function(t){90===t.keyCode?(t.preventDefault(),o.undoHistory()):89===t.keyCode&&(t.preventDefault(),o.redoHistory())}},o={addEventListeners:function(){d&&(d.on(y.events.CREATE,i.onDrawCreate),d.on(y.events.UPDATE,i.onDrawUpdate),d.on(y.events.DELETE,i.onDrawDelete),d.on(y.events.COMBINE_FEATURES,i.onDrawCombine),d.on(y.events.UNCOMBINE_FEATURES,i.onDrawUncombine),d.on(y.events.REPLACE,i.onDrawReplace),t.addEventListener("keydown",i.onKeydown))},removeEventListeners:function(){d&&(d.off(y.events.CREATE,i.onDrawCreate),d.off(y.events.UPDATE,i.onDrawUpdate),d.off(y.events.DELETE,i.onDrawDelete),d.off(y.events.COMBINE_FEATURES,i.onDrawCombine),d.off(y.events.UNCOMBINE_FEATURES,i.onDrawUncombine),d.off(y.events.REPLACE,i.onDrawReplace),t.removeEventListener("keydown",i.onKeydown))},undoHistory:function(){if(f&&g){var t=g.undoRecord();if(t){if(1===t.getType()){var e=t.getFeatures();if(0<e.length){e.map(function(t){f.add(_({},t,{type:t.type||y.geojsonTypes.FEATURE}))});var n=e.map(function(t){return t.id});f.changeMode(y.modes.SIMPLE_SELECT,{featureIds:n})}}else if(2===t.getType()){var r=t.getFeatures();if(0<r.length){var i=r.map(function(t){return t.id});f.delete(i)}var o=t.getPrevFeatures();if(0<o.length){o.map(function(t){f.add(_(t,{type:t.type||y.geojsonTypes.FEATURE}))});var s=o.map(function(t){return t.id});f.changeMode(y.modes.SIMPLE_SELECT,{featureIds:s})}}else if(3===t.getType()){var a=t.getFeatures();if(0<a.length){var u=a.map(function(t){return t.id});f.delete(u)}}else if(4===t.getType()){var c=t.getFeatures();if(0<c.length){var l=c.map(function(t){return t.id});f.delete(l)}var p=t.getPrevFeatures();if(0<p.length){p.map(function(t){f.add(_(t,{type:t.type||y.geojsonTypes.FEATURE}))});var h=p.map(function(t){return t.id});f.changeMode(y.modes.SIMPLE_SELECT,{featureIds:h})}}d.fire(y.events.UNDO,{record:t})}}},redoHistory:function(){if(f&&g){var t=g.redoRecord();if(t){f.getAll();if(3===t.getType()){var e=t.getFeatures();if(0<e.length){e.map(function(t){f.add(_(t,{type:t.type||y.geojsonTypes.FEATURE}))});var n=e.map(function(t){return t.id});f.changeMode(y.modes.SIMPLE_SELECT,{featureIds:n})}}else if(2===t.getType()){var r=t.getPrevFeatures();if(0<r.length){var i=r.map(function(t){return t.id});f.delete(i)}var o=t.getFeatures();if(0<o.length){o.map(function(t){f.add(_(t,{type:t.type||y.geojsonTypes.FEATURE}))});var s=o.map(function(t){return t.id});f.changeMode(y.modes.SIMPLE_SELECT,{featureIds:s})}}else if(1===t.getType()){var a=t.getFeatures();if(0<a.length){var u=a.map(function(t){return t.id});f.delete(u)}}else if(4===t.getType()){var c=t.getPrevFeatures();if(0<c.length){var l=c.map(function(t){return t.id});f.delete(l)}var p=t.getFeatures();if(0<p.length){p.map(function(t){f.add(_(t,{type:t.type||y.geojsonTypes.FEATURE}))});var h=p.map(function(t){return t.id});f.changeMode(y.modes.SIMPLE_SELECT,{featureIds:h})}}d.fire(y.events.REDO,{record:t})}}}};return o}},{"../constants":69,"./history/record":75,xtend:67}],74:[function(t,e,n){"use strict";var r=function(){this.cursor=-1,this.recordes=[]};r.prototype.addRecord=function(t){if(t){this.cursor+1<this.recordes.length&&(this.recordes=this.recordes.slice(0,this.cursor+1)),this.recordes.push(t);var e=this.recordes.length;this.cursor=e-1}return this},r.prototype.undoRecord=function(){var t=this.recordes.length,e=null;return 0===t&&(this.cursor=-1),0<t&&-1<this.cursor&&(e=this.recordes[this.cursor],this.cursor=this.cursor-1),e},r.prototype.redoRecord=function(){var t=this.recordes.length;0===t&&(this.cursor=-1);var e=null;return 0<t&&this.cursor<t-1&&(e=this.recordes[this.cursor+1],this.cursor=this.cursor+1),e},r.prototype.getCurrentRecord=function(){var t=this.recordes.length;if(0===t)return null;var e=null;return-1<this.cursor&&this.cursor<t&&(e=this.recordes[this.cursor]),e},r.prototype.getAllRecords=function(){return this.recordes},r.prototype.clear=function(){this.cursor=-1,this.recordes=[]},e.exports=r},{}],75:[function(t,e,n){"use strict";var r=function(t,e,n,r){this.type=t||0,this.action=e||0,this.features=n||[],this.prevFeatures=r||[]};r.prototype.getType=function(){return this.type||0},r.prototype.getAction=function(){return this.action||0},r.prototype.getFeatures=function(){return this.features||[]},r.prototype.getPrevFeatures=function(){return this.prevFeatures||[]},e.exports=r},{}],76:[function(t,e,n){"use strict";t("babel-plugin-transform-runtime");var r=t("xtend"),i=t("./edit_handler"),o={},s=i({});o.init=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return o=r(o,s.init(t,e,n))},o.setOptions=function(t){return o=r(o,s.setOptions(t))},o.dispose=function(){return o=r(o,s.dispose())},o.undoOperation=function(){s.undoOperation()},o.redoOperation=function(){s.redoOperation()},o.onBtnCtrlActive=function(t,e){s.onBtnCtrlActive(t,e)},o.setFeatures=function(t){return s.setFeatures(t)},o.removeFeatures=function(t){return s.removeFeatures(t)},o.setSelected=function(t){return s.setSelected(t)},o.setFeatureProperties=function(t,e){return s.setFeatureProperties(t,e)},o.getAllHistoryRecords=function(){return s.getAllHistoryRecords()},o.clearHistoryRecords=function(){return s.clearHistoryRecords()},o.setCustomStyle=function(t,e){return s.setCustomStyle(t,e)},o.cancelCustomStyle=function(t){return s.cancelCustomStyle(t)},o.isDrawEnabled=function(){return s.isDrawEnabled()},o.disableDraw=function(){s.disableDraw()},o.enableDraw=function(){s.enableDraw()},o.isAdsorbEnabled=function(){return s.isAdsorbEnabled()},o.disableAdsorb=function(){s.disableAdsorb()},o.enableAdsorb=function(){s.enableAdsorb()},window.minemap&&(minemap.edit=o),e.exports=o},{"./edit_handler":72,"babel-plugin-transform-runtime":43,xtend:67}],77:[function(t,e,n){"use strict";e.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"],["==","custom_style","false"]],paint:{"fill-color":"#55B1F3","fill-outline-color":"#55B1F3","fill-opacity":.1}},{id:"gl-draw-polygon-fill-inactive-custom",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"],["==","custom_style","true"]],paint:{"fill-color":{property:"user_fillColor",type:"identity",default:"#55B1F3"},"fill-outline-color":{property:"user_fillOutlineColor",type:"identity",default:"#55B1F3"},"fill-opacity":{property:"user_fillOpacity",type:"identity",default:.1}}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#F05668","fill-outline-color":"#F05668","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"],["!=","feature_type","icon"]],paint:{"circle-radius":4,"circle-color":"#F05668"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"],["==","custom_style","false"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#55B1F3","line-width":2}},{id:"gl-draw-polygon-stroke-inactive-custom1",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"],["==","custom_style","true"],["!=","user_fillOutlineDasharray","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_fillOutlineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_fillOutlineWidth",type:"identity",default:2}}},{id:"gl-draw-polygon-stroke-inactive-custom2",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"],["==","custom_style","true"],["==","user_fillOutlineDasharray","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_fillOutlineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_fillOutlineWidth",type:"identity",default:2},"line-dasharray":[.2,2]}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#F05668","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","false"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#55B1F3","line-width":2}},{id:"gl-draw-line-inactive-custom1",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","true"],["!=","user_lineDasharray","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_lineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_lineWidth",type:"identity",default:2}}},{id:"gl-draw-line-inactive-custom2",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"],["==","custom_style","true"],["==","user_lineDasharray","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"user_lineColor",type:"identity",default:"#55B1F3"},"line-width":{property:"user_lineWidth",type:"identity",default:2},"line-dasharray":[.2,2]}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#F05668","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"],["!=","feature_type","icon"]],paint:{"circle-radius":6,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"],["!=","feature_type","icon"]],paint:{"circle-radius":4,"circle-color":"#F05668"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","false"],["!=","feature_type","icon"]],paint:{"circle-radius":6,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-point-stroke-inactive-custom",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["!=","feature_type","icon"]],paint:{"circle-radius":{property:"user_circleBorderRadius",type:"identity",default:6},"circle-opacity":1,"circle-color":{property:"user_circleBorderColor",type:"identity",default:"#ffffff"}}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","false"],["!=","feature_type","icon"]],paint:{"circle-radius":4,"circle-color":"#55B1F3"}},{id:"gl-draw-point-inactive-custom",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["!=","feature_type","icon"]],paint:{"circle-radius":{property:"user_circleRadius",type:"identity",default:4},"circle-color":{property:"user_circleColor",type:"identity",default:"#55B1F3"}}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"],["!=","feature_type","icon"]],paint:{"circle-radius":8,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"],["!=","feature_type","icon"]],paint:{"circle-radius":6,"circle-color":"#F05668"}},{id:"gl-draw-icon-inactive",type:"symbol",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["==","feature_type","icon"]],layout:{"icon-image":{property:"user_iconImage",type:"identity",default:"marker-15-6"},"icon-size":{property:"user_iconSize",type:"identity",default:1},"icon-rotate":{property:"user_iconRotate",type:"identity",default:0},"icon-allow-overlap":!0,"icon-ignore-placement":!0},paint:{"icon-color":{property:"user_iconColor",type:"identity",default:"#000000"}}},{id:"gl-draw-icon-stroke-active",type:"circle",filter:["all",["==","active","true"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["==","feature_type","icon"]],paint:{"circle-color":"#FFFFFF","circle-radius":32,"circle-blur":1,"circle-stroke-width":1,"circle-stroke-opacity":.5,"circle-stroke-color":"#FFFFFF"}},{id:"gl-draw-icon-active",type:"symbol",filter:["all",["==","active","true"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"],["==","custom_style","true"],["==","feature_type","icon"]],layout:{"icon-image":{property:"user_iconImage",type:"identity",default:"marker-15-6"},"icon-size":{property:"user_iconSize",type:"identity",default:1},"icon-rotate":{property:"user_iconRotate",type:"identity",default:0},"icon-allow-overlap":!0,"icon-ignore-placement":!0},paint:{"icon-color":{property:"user_iconColor",type:"identity",default:"#FFFFFF"}}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"],["!=","feature_type","icon"]],paint:{"circle-radius":4,"circle-color":"#404040"}}]},{}],78:[function(t,e,n){"use strict";function i(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(0<=e))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}e.exports=function(t,e){if(!t||!e)return!1;if(2!==t.length||2!==e.length)return!1;var n=[i(t[0],5),i(t[1],5)],r=[i(e[0],5),i(e[1],5)];return n[0]===r[0]&&n[1]===r[1]}},{}],79:[function(t,e,n){"use strict";var p=t("./lib/mode_handler"),h=t("./lib/get_features_and_set_cursor"),f=t("./lib/features_at"),d=t("./lib/is_click"),g=t("./lib/is_tap"),y=t("./constants"),_=t("./modes/object_to_mode");e.exports=function(o){var s=Object.keys(o.options.modes).reduce(function(t,e){return t[e]=_(o.options.modes[e]),t},{}),n={},r={},i={},a=null,u=null;i.drag=function(t,e){e({point:t.point,time:(new Date).getTime()})?(o.ui.queueMapClasses({mouse:y.cursors.DRAG}),u.drag(t)):t.originalEvent.stopPropagation()},i.mousedrag=function(t){i.drag(t,function(t){return!d(n,t)})},i.touchdrag=function(t){i.drag(t,function(t){return!g(r,t)})},i.mousemove=function(t){if(1===(void 0!==t.originalEvent.buttons?t.originalEvent.buttons:t.originalEvent.which))return i.mousedrag(t);var e=h(t,o);t.featureTarget=e[0],t.featureTargets=e,u.mousemove(t)},i.mousedown=function(t){n={time:(new Date).getTime(),point:t.point};var e=h(t,o);t.featureTarget=e[0],t.featureTargets=e,u.mousedown(t)},i.mouseup=function(t){var e=h(t,o);t.featureTarget=e[0],t.featureTargets=e,d(n,{point:t.point,time:(new Date).getTime()})?u.click(t):u.mouseup(t)},i.mouseout=function(t){u.mouseout(t)},i.touchstart=function(t){if(t.originalEvent.preventDefault(),o.options.touchEnabled){r={time:(new Date).getTime(),point:t.point};var e=f.touch(t,null,o);t.featureTarget=e[0],t.featureTargets=e,u.touchstart(t)}},i.touchmove=function(t){if(t.originalEvent.preventDefault(),o.options.touchEnabled)return u.touchmove(t),i.touchdrag(t)},i.touchend=function(t){if(t.originalEvent.preventDefault(),o.options.touchEnabled){var e=f.touch(t,null,o);t.featureTarget=e[0],t.featureTargets=e,g(r,{time:(new Date).getTime(),point:t.point})?u.tap(t):u.touchend(t)}};var e=function(t){return!(8===t||46===t||48<=t&&t<=57)};function c(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};u.stop();var r=s[t];if(void 0===r)throw new Error(t+" is not valid");a=t;var i=r(o,e);u=p(i,o),n.silent||o.map.fire(y.events.MODE_CHANGE,{mode:t}),o.store.setDirty(),o.store.render()}i.keydown=function(t){"minemap-canvas"===(t.srcElement||t.target).classList[0]&&(8!==t.keyCode&&46!==t.keyCode||!o.options.controls.trash?e(t.keyCode)?u.keydown(t):49===t.keyCode&&o.options.controls.point?c(y.modes.DRAW_POINT):50===t.keyCode&&o.options.controls.line_string?c(y.modes.DRAW_LINE_STRING):51===t.keyCode&&o.options.controls.polygon&&c(y.modes.DRAW_POLYGON):(t.preventDefault(),u.trash()))},i.keyup=function(t){e(t.keyCode)&&u.keyup(t)},i.zoomend=function(){o.store.changeZoom()};var l={trash:!(i.data=function(t){if("style"===t.dataType){var e=o.setup,n=o.map,r=o.options,i=o.store;r.styles.some(function(t){return n.getLayer(t.id)})||(e.addLayers(),i.setDirty(),i.render())}}),combineFeatures:!1,uncombineFeatures:!1};return{start:function(){a=o.options.defaultMode,u=p(s[a](o),o)},changeMode:c,actionable:function(e){var n=!1;Object.keys(e).forEach(function(t){if(void 0===l[t])throw new Error("Invalid action type");l[t]!==e[t]&&(n=!0),l[t]=e[t]}),n&&o.map.fire(y.events.ACTIONABLE,{actions:l})},currentModeName:function(){return a},currentModeRender:function(t,e){return u.render(t,e)},fire:function(t,e){i[t]&&i[t](e)},addEventListeners:function(){o.map.on("mousemove",i.mousemove),o.map.on("mousedown",i.mousedown),o.map.on("mouseup",i.mouseup),o.map.on("data",i.data),o.map.on("touchmove",i.touchmove),o.map.on("touchstart",i.touchstart),o.map.on("touchend",i.touchend),o.container.addEventListener("mouseout",i.mouseout),o.options.keybindings&&(o.container.addEventListener("keydown",i.keydown),o.container.addEventListener("keyup",i.keyup))},removeEventListeners:function(){o.map.off("mousemove",i.mousemove),o.map.off("mousedown",i.mousedown),o.map.off("mouseup",i.mouseup),o.map.off("data",i.data),o.map.off("touchmove",i.touchmove),o.map.off("touchstart",i.touchstart),o.map.off("touchend",i.touchend),o.container.removeEventListener("mouseout",i.mouseout),o.options.keybindings&&(o.container.removeEventListener("keydown",i.keydown),o.container.removeEventListener("keyup",i.keyup))},trash:function(t){u.trash(t)},combineFeatures:function(){u.combineFeatures()},uncombineFeatures:function(){u.uncombineFeatures()},unionPolygon:function(){u.unionPolygon()},unionLine:function(){u.unionLine()},splitLine:function(){u.splitLine()},curveLine:function(){u.curveLine()},getMode:function(){return a}}}},{"./constants":69,"./lib/features_at":108,"./lib/get_features_and_set_cursor":109,"./lib/is_click":110,"./lib/is_tap":112,"./lib/mode_handler":114,"./modes/object_to_mode":145}],80:[function(t,e,n){"use strict";var s=t("@turf/helpers").lineString,a=t("@turf/bezier-spline").default,r=t("./feature"),i=function(t,e){r.call(this,t,e)};(i.prototype=Object.create(r.prototype)).isValid=function(){return 1<this.coordinates.length},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=parseInt(t,10);this.first=[e,n],this.coordinates.splice(r,0,[e,n])},i.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},i.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},i.prototype.updateCoordinate=function(t,e,n){var r,i,o=parseInt(t,10);0===o?(this.properties.feature_type="arc",this.properties.first=[e,n],this.coordinates[o]=[e,n]):1===o?(this.properties.second=[e,n],this.coordinates[o]=[e,n]):2===o&&(this.properties.end=[e,n],this.coordinates=(r=this.properties.first,i=this.properties.second,a(s([r,[e,n],i]),{resolution:2e3,sharpness:.85}).geometry.coordinates)),this.changed()},e.exports=i},{"./feature":85,"@turf/bezier-spline":13,"@turf/helpers":21}],81:[function(t,e,n){"use strict";var N=t("@turf/helpers").round,r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r,i,o,s,a,u,c,l,p,h,f,d,g,y,_,m,v,E,I,x,b,C=t.split("."),w=parseInt(C[0],10),S=parseInt(C[1],10);0===S?(this.properties.feature_type="attack_arrow",this.properties.start=[e,n],this.coordinates[w][S]=[e,n]):1<=S&&(this.properties.end=[e,n],this.coordinates=(r=this.ctx.map,i=this.properties.start,o=this.properties.end,s=r.project(i),a=r.project(o),u=N(s.x,2),c=N(s.y,2),l=N(a.x,2),p=N(a.y,2),h=u+N((l-u)/4,2),f=c+N((p-c)/4,2),d=l-N((l-u)/3,2),g=p-N((p-c)/3,2),y=l-N((l-u)/4,2),_=p-N((p-c)/4,2),m=T(r,h,f,u,c,Math.PI/2),v=T(r,h,f,u,c,-Math.PI/2),E=T(r,d,g,l,p,Math.PI/3),I=T(r,d,g,l,p,-Math.PI/3),x=T(r,y,_,l,p,Math.PI/4),b=T(r,y,_,l,p,-Math.PI/4),[[i,v,x,E,o,I,b,m]])),void 0===this.coordinates[w]&&(this.coordinates[w]=[])};var T=function(t,e,n,r,i,o){var s,a,u,c,l,p=(a=n,c=i,l=o,[((s=e)-(u=r))*Math.cos(l)-(a-c)*Math.sin(l)+u,(s-u)*Math.sin(l)+(a-c)*Math.cos(l)+c]),h=t.unproject(p);return[h.lng,h.lat]};e.exports=i},{"./feature":85,"@turf/helpers":21}],82:[function(t,e,n){"use strict";var r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);0===o&&(this.coordinates[i][o]=[e,n],this.properties.center=[e,n],this.properties.feature_type="circle",this.properties.radius=100),1===o&&(this.properties.radius=s(this.properties.center,[e,n]),this.coordinates=function(t,e,n){n||(n=64);for(var r={latitude:t[1],longitude:t[0]},i=e,o=[],s=i/(111.32*Math.cos(r.latitude*Math.PI/180)),a=i/110.574,u=void 0,c=void 0,l=void 0,p=0;p<n;p++)u=p/n*(2*Math.PI),c=s*Math.cos(u),l=a*Math.sin(u),o.push([r.longitude+c,r.latitude+l]);return o.push(o[0]),[o]}(this.properties.center,s(this.properties.center,[e,n]))),void 0===this.coordinates[i]&&(this.coordinates[i]=[])},e.exports=i;var l={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};function s(t,e){var n=Math.PI/180,r=t,i=e,o=n*(i[1]-r[1]),s=n*(i[0]-r[0]),a=n*r[1],u=n*i[1],c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return function(t,e){var n=l[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t*n}(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),"kilometers")}},{"./feature":85}],83:[function(t,e,n){"use strict";function u(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var c=t("@turf/helpers").lineString,l=t("@turf/bezier-spline").default,r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};function s(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!t)return[[]];var n=t[0];if(n.length<3)return t;if(e){var r=n.length;if(2<=r&&n[r-2][0]===n[r-1][0]&&n[r-2][1]===n[r-1][1]&&(n=n.slice(0,-1)),n.length<3)return t;var i=l(c([].concat(u(n),[n[0]])),{resolution:5e3,sharpness:.85});return[[].concat(u(i.geometry.coordinates))]}var o=n.slice(0,-1),s=l(c(o),{resolution:5e3,sharpness:.85}),a=[].concat(u(s.geometry.coordinates));return[[].concat(u(a),[n[n.length-1]])]}(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);void 0===this.initCoordinates&&(this.initCoordinates=[]),void 0===this.initCoordinates[i]&&(this.initCoordinates[i]=[]),0===o?(this.properties.feature_type="curve_polygon",this.properties.start=[e,n],this.initCoordinates[i][o]=[e,n],this.coordinates[i][o]=[e,n]):1<=o&&(this.initCoordinates[i][o]=[e,n],this.coordinates=s(this.initCoordinates)),void 0===this.coordinates[i]&&(this.coordinates[i]=[])},i.prototype.updateCoordinate2=function(){this.coordinates=s(this.initCoordinates,!0)},e.exports=i},{"./feature":85,"@turf/bezier-spline":13,"@turf/helpers":21}],84:[function(t,e,n){"use strict";var M=t("@turf/helpers").round,P=t("@turf/helpers").point,E=t("@turf/helpers").polygon,A=t("@turf/helpers").featureCollection,R=t("@turf/convex").default,I=t("@turf/bearing").default,x=t("@turf/distance").default,b=t("@turf/destination").default,C=t("@turf/transform-rotate").default,r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);0===o?(this.properties.feature_type="ellipse",this.properties.first=[e,n],this.coordinates[i][o]=[e,n]):1===o?(this.properties.second=[e,n],this.coordinates[i][o]=[e,n]):2===o&&(this.properties.end=[e,n],this.coordinates=function(t,e,n,r){var i=t.project(e),o=t.project(n),s=M(i.x,2),a=M(o.x,2),u=M(I(P(e),P(n))),c=90===u||-90===u?n:null,l=90===u||-90===u?r:null,p=0;if(!c){180<(p=(s<=a?90:-90)-u)&&(p-=360),p<-180&&(p+=360),p=360-p;var h=x(P(e),P(n)),f=b(P(e),h,s<=a?90:-90);c=f.geometry.coordinates;var d=M(I(P(e),P(r))),g=d+(s<=a?90:-90)-u;180<g&&(g-=360),g<-180&&(g+=360);var y=x(P(e),P(r)),_=b(P(e),y,g);l=_.geometry.coordinates}var m=function(t,e,n,r){var i=t.project(e),o=t.project(n),s=t.project(r),a=M(i.x,2),u=M(i.y,2),c=M(o.x,2),l=M(o.y,2),p=M((a+c)/2,2),h=M((u+l)/2,2),f=Math.round(Math.pow(a-p,2)+Math.pow(u-h,2)),d=(m=p,v=h,E=s.x,I=s.y,x=f,b=Math.pow(E-m,2),C=Math.pow(I-v,2),Math.abs(Math.round(x*C/(x-b)))),g=M((c-a)/32,2),y=function(t,e,n,r,i,o,s,a){for(var u=[],c=[],l=-1;l<=a+1;l++){var p=l;-1===l?p=.3:0===l?p=.6:l===a?p=a-.6:l===a+1&&(p=a-.3);var h=M(n+p*i,2),f=(d=t,g=h,y=o,_=s,Math.abs(M(Math.sqrt(_-_*Math.pow(g-d,2)/y),2)));u.push([h,M(e-f,2)]),c.push([h,M(e+f,2)])}var d,g,y,_;return[u,c]}(p,h,a,0,g,f,d,32),_=[];var m,v,E,I,x,b,C;_.push(P(e));for(var w=0,S=y[0].length;w<S;w++){var N=t.unproject([y[0][w][0],y[0][w][1]]);_.push(P([M(N.lng,7),M(N.lat,7)]))}_.push(P(n));for(var T=0,L=y[0].length;T<L;T++){var O=t.unproject([y[1][T][0],y[1][T][1]]);_.push(P([M(O.lng,7),M(O.lat,7)]))}return R(A(_)).geometry.coordinates}(t,e,c,l),v=E(m);return[C(v,p,{pivot:e}).geometry.coordinates[0].slice(0,-1)]}(this.ctx.map,this.properties.first,this.properties.second,this.properties.end)),void 0===this.coordinates[i]&&(this.coordinates[i]=[])},e.exports=i},{"./feature":85,"@turf/bearing":12,"@turf/convex":18,"@turf/destination":19,"@turf/distance":20,"@turf/helpers":21,"@turf/transform-rotate":39}],85:[function(t,e,n){"use strict";var r=t("hat"),i=t("../constants"),o=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||r(),this.type=e.geometry.type};o.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},o.prototype.incomingCoords=function(t){this.setCoordinates(t)},o.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},o.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},o.prototype.setProperty=function(t,e){this.properties[t]=e},o.prototype.deleteProperty=function(t){this.properties.hasOwnProperty(t)&&delete this.properties[t]},o.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:i.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},o.prototype.internal=function(t){var e={id:this.id,meta:i.meta.FEATURE,"meta:type":this.type,active:i.activeStates.INACTIVE,mode:t,custom_style:i.customStyle.CLOSE};if(this.ctx.options.userProperties)for(var n in this.properties)"custom_style"===n?e.custom_style=this.properties[n]||i.customStyle.CLOSE:"feature_type"===n?e.feature_type=this.properties[n]:e["user_"+n]=this.properties[n];return{type:i.geojsonTypes.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}},e.exports=o},{"../constants":69,hat:48}],86:[function(t,e,n){"use strict";function L(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var O=t("@turf/helpers").round,M=t("@turf/helpers").lineString,l=t("@turf/length").default,p=t("@turf/line-slice-along").default,P=t("@turf/bezier-spline").default,r=t("./feature"),i=function(t,e){r.call(this,t,e)};(i.prototype=Object.create(r.prototype)).isValid=function(){return 1<this.coordinates.length},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=parseInt(t,10);this.coordinates.splice(r,0,[e,n])},i.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},i.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},i.prototype.updateCoordinate=function(t,e,n,r,i){var o=parseInt(t,10);if(0===o)this.properties.feature_type="line_arrow",this.properties.start=[e,n],this.coordinates[o]=[e,n];else if(1<=o){var s=null,a=this.properties.start_knee_point,u=this.properties.end_knee_point;r&&i?this.properties.start&&this.properties.start[0]===r&&this.properties.start[1]===i?(this.properties.start=[e,n],s="start"):this.properties.end&&this.properties.end[0]===r&&this.properties.end[1]===i?(this.properties.end=[e,n],s="end"):a&&a[0]===r&&a[1]===i?(a=[e,n],s="start_knee_point"):u&&u[0]===r&&u[1]===i?(u=[e,n],s="end_knee_point"):["curve","curve-dashed"].includes(this.properties.shape_line_type)&&10<this.coordinates.length?(a=[e,n],u=[e,n],s="curve_knee_point"):this.properties.end=[e,n]:this.properties.end=[e,n];var c={startArrowType:this.properties.shape_start_arrow_type||"none",endArrowType:this.properties.shape_end_arrow_type||"normal",lineType:this.properties.shape_line_type||"solid"},l=function(t,e,n,r,i,o,s){var a=[];if("solid"===e.lineType||"dashed"===e.lineType)a=[];else if("elbow"===e.lineType||"elbow-dashed"===e.lineType)l=n,p=r,h=i,f=o,d=s,g=(c=t).project(l),y=c.project(p),_=O(g.x,2),m=O(g.y,2),v=O(y.x,2),E=O(y.y,2),I=O((v+_)/2,2),x=O((E+m)/2,2),b=I-O((I-_)/2,2),C=x-O((x-m)/2,2),w=h&&"start_knee_point"===d?h:A(c,b,C,I,x,Math.PI/2),S=f&&"end_knee_point"===d?f:A(c,b,C,I,x,-Math.PI/2),i=(a=[w,S])[0],o=a[1];else if("curve"===e.lineType||"curve-dashed"===e.lineType){var u=function(t,e,n,r,i,o){var s=t.project(e),a=t.project(n),u=O(s.x,2),c=O(s.y,2),l=O(a.x,2),p=O(a.y,2),h=O((l+u)/2,2),f=O((p+c)/2,2),d=h-O((h-u)/3,2),g=f-O((f-c)/3,2),y=A(t,d,g,h,f,Math.PI/10),_=A(t,d,g,h,f,Math.PI/10*11),m=r&&i&&"curve_knee_point"===o,v=m?R("curve",e,n,r,i):R("curve",e,n,y,_);if(v.start&&v.end){var E=M(m?[v.start,r,v.end]:[v.start,y,[(e[0]+n[0])/2,(e[1]+n[1])/2],_,v.end]),I=P(E,{resolution:2e3,sharpness:.85});return{kneePoints:m?[r,i]:[v.start,v.end],coords:I.geometry.coordinates}}return{kneePoints:[y,_],coords:[y,_]}}(t,n,r,i,o,s);a=u.coords,i=u.kneePoints[0],o=u.kneePoints[1]}var c,l,p,h,f,d,g,y,_,m,v,E,I,x,b,C,w,S;var N=[];N="none"===e.startArrowType?F(t,"start",e.lineType,n,r):"normal"===e.startArrowType?D(t,"start",e.lineType,n,r,i,o):"hollow"===e.startArrowType?j(t,"start",e.lineType,n,r,i,o):"solid"===e.startArrowType?G(t,"start",e.lineType,n,r,i,o):F(t,"start",e.lineType,n,r);var T=[];T="none"===e.endArrowType?F(t,"end",e.lineType,n,r):"normal"===e.endArrowType?D(t,"end",e.lineType,n,r,i,o):"hollow"===e.endArrowType?j(t,"end",e.lineType,n,r,i,o):"solid"===e.endArrowType?G(t,"end",e.lineType,n,r,i,o):D(t,"end",e.lineType,n,r,i,o);"curve"!==e.lineType&&"curve-dashed"!==e.lineType||(o=i=null);return{start_knee_point:i,end_knee_point:o,coords:[].concat(L(N),L(a),L(T))}}(this.ctx.map,c,this.properties.start,this.properties.end,a,u,s);l.start_knee_point?this.properties.start_knee_point=l.start_knee_point:delete this.properties.start_knee_point,l.end_knee_point?this.properties.end_knee_point=l.end_knee_point:delete this.properties.end_knee_point,this.coordinates=l.coords}this.changed()};var A=function(t,e,n,r,i,o){var s,a,u,c,l,p=(a=n,c=i,l=o,[((s=e)-(u=r))*Math.cos(l)-(a-c)*Math.sin(l)+u,(s-u)*Math.sin(l)+(a-c)*Math.cos(l)+c]),h=t.unproject(p);return[h.lng,h.lat]},R=function(t,e,n,r,i){var o=null,s=null;if(["elbow","curve","elbow-dashed","curve-dashed"].includes(t)&&e&&n&&e[0]!==n[0]&&e[1]!==n[1]&&r&&i){var a=r[0]===i[0]&&r[1]===i[1]?M([e,r,n]):M([e,r,i,n]),u=l(a)/10,c=p(a,u,9*u);c&&0<c.geometry.coordinates.length&&(o=c.geometry.coordinates[0],s=c.geometry.coordinates[c.geometry.coordinates.length-1])}return{start:o,end:s}},b=function(t,e,n,r,i,o,s){var a=0,u=0;if("start"===e)if(n.start){var c=t.project(n.start);a=O(c.x,2),u=O(c.y,2)}else a=r+O((o-r)/10,2),u=i+O((s-i)/10,2);else if("end"===e)if(n.end){var l=t.project(n.end);a=O(l.x,2),u=O(l.y,2)}else a=o-O((o-r)/10,2),u=u=s-O((s-i)/10,2);return[a,u]};function F(t,e,n,r,i){return"start"===e?[r]:[i]}function D(t,e,n,r,i,o,s){var a=t.project(r),u=t.project(i),c=O(a.x,2),l=O(a.y,2),p=O(u.x,2),h=O(u.y,2),f=R(n,r,i,o,s),d=b(t,e,f,c,l,p,h),g=d[0],y=d[1];return"start"===e?[r,A(t,g,y,c,l,Math.PI/6),r,A(t,g,y,c,l,-Math.PI/6),r]:[i,A(t,g,y,p,h,Math.PI/6),i,A(t,g,y,p,h,-Math.PI/6),i]}function j(t,e,n,r,i,o,s){var a=t.project(r),u=t.project(i),c=O(a.x,2),l=O(a.y,2),p=O(u.x,2),h=O(u.y,2),f=R(n,r,i,o,s),d=b(t,e,f,c,l,p,h),g=d[0],y=d[1];if("start"===e){var _=A(t,g,y,c,l,Math.PI/9),m=A(t,g,y,c,l,-Math.PI/9),v=[(_[0]+m[0])/2,(_[1]+m[1])/2];return[v,_,r,m,v]}var E=A(t,g,y,p,h,Math.PI/9),I=A(t,g,y,p,h,-Math.PI/9),x=[(E[0]+I[0])/2,(E[1]+I[1])/2];return[x,E,i,I,x]}function G(t,e,n,r,i,o,s){return"start"===e?[r]:[i]}e.exports=i},{"./feature":85,"@turf/bezier-spline":13,"@turf/helpers":21,"@turf/length":24,"@turf/line-slice-along":28}],87:[function(t,e,n){"use strict";var r=t("./feature"),i=function(t,e){r.call(this,t,e)};(i.prototype=Object.create(r.prototype)).isValid=function(){return 1<this.coordinates.length},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=parseInt(t,10);this.coordinates.splice(r,0,[e,n])},i.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},i.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},i.prototype.updateCoordinate=function(t,e,n){var r=parseInt(t,10);this.coordinates[r]=[e,n],this.changed()},e.exports=i},{"./feature":85}],88:[function(t,e,n){"use strict";var r=t("./feature"),i=t("../constants"),o=t("hat"),s={MultiPoint:t("./point"),MultiLineString:t("./line_string"),MultiPolygon:t("./polygon")},a=function(t,e,n,r,i){var o=n.split("."),s=parseInt(o[0],10),a=o[1]?o.slice(1).join("."):null;return t[s][e](a,r,i)},u=function(t,e){if(r.call(this,t,e),delete this.coordinates,this.model=s[e.geometry.type],void 0===this.model)throw new TypeError(e.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(e.geometry.coordinates)};(u.prototype=Object.create(r.prototype))._coordinatesToFeatures=function(t){var e=this,n=this.model.bind(this);return t.map(function(t){return new n(e.ctx,{id:o(),type:i.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:t,type:e.type.replace("Multi","")}})})},u.prototype.isValid=function(){return this.features.every(function(t){return t.isValid()})},u.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},u.prototype.getCoordinate=function(t){return a(this.features,"getCoordinate",t)},u.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(t){return t.type===i.geojsonTypes.POLYGON?t.getCoordinates():t.coordinates})))},u.prototype.updateCoordinate=function(t,e,n){a(this.features,"updateCoordinate",t,e,n),this.changed()},u.prototype.addCoordinate=function(t,e,n){a(this.features,"addCoordinate",t,e,n),this.changed()},u.prototype.removeCoordinate=function(t){a(this.features,"removeCoordinate",t),this.changed()},u.prototype.getFeatures=function(){return this.features},e.exports=u},{"../constants":69,"./feature":85,"./line_string":87,"./point":92,"./polygon":93,hat:48}],89:[function(t,e,n){"use strict";function Ot(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var Mt=t("@turf/helpers").round,Pt=t("@turf/helpers").lineString,At=t("@turf/bezier-spline").default,r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r,i,o,s,a,u,c,l,p,h,f,d,g,y,_,m,v,E,I,x,b,C,w,S,N,T,L,O,M,P,A,R,F,D,j,G,k,U,V,B,q,z,Y,X,W,J,H,K,$,Z,Q,tt,et,nt,rt,it,ot,st,at,ut,ct,lt,pt,ht,ft,dt,gt,yt,_t,mt,vt,Et,It,xt,bt,Ct,wt,St,Nt=t.split("."),Tt=parseInt(Nt[0],10),Lt=parseInt(Nt[1],10);0===Lt?(this.properties.feature_type="offensive_arrow",this.properties.start=[e,n],this.coordinates[Tt][Lt]=[e,n]):1===Lt?(this.properties.middle=[e,n],this.coordinates=(st=this.ctx.map,at=this.properties.start,ut=this.properties.middle,ct=st.project(at),lt=st.project(ut),pt=Mt(ct.x,2),ht=Mt(ct.y,2),ft=Mt(lt.x,2),dt=Mt(lt.y,2),gt=pt+Mt((ft-pt)/4,2),yt=ht+Mt((dt-ht)/4,2),_t=ft-Mt((ft-pt)/4,2),mt=dt-Mt((dt-ht)/4,2),vt=ft-Mt((ft-pt)/6,2),Et=dt-Mt((dt-ht)/6,2),It=Ft(st,gt,yt,pt,ht,Math.PI/2),xt=Ft(st,gt,yt,pt,ht,-Math.PI/2),bt=Ft(st,_t,mt,ft,dt,Math.PI/6),Ct=Ft(st,_t,mt,ft,dt,-Math.PI/6),wt=Ft(st,vt,Et,ft,dt,Math.PI/9),St=Ft(st,vt,Et,ft,dt,-Math.PI/9),[[at,xt,wt,bt,ut,Ct,St,It]])):1<Lt&&(this.properties.end=[e,n],this.coordinates=(r=this.ctx.map,i=this.properties.start,o=this.properties.middle,s=this.properties.end,a=r.project(i),u=r.project(o),c=r.project(s),l=Mt(a.x,2),p=Mt(a.y,2),h=Mt(u.x,2),f=Mt(u.y,2),d=Mt(c.x,2),g=Mt(c.y,2),y=l+Mt((h-l)/3,2),_=p+Mt((f-p)/3,2),m=h-Mt((h-l)/3,2),v=f-Mt((f-p)/3,2),E=Rt(y,_,l,p,Math.PI/2),I=E[0],x=E[1],b=r.unproject(E),C=[b.lng,b.lat],w=Rt(y,_,l,p,-Math.PI/2),S=w[0],N=w[1],T=r.unproject(w),L=[T.lng,T.lat],O=Rt(m,v,h,f,Math.PI/2),M=O[0],P=O[1],A=r.unproject(O),R=[A.lng,A.lat],F=Rt(m,v,h,f,-Math.PI/2),D=F[0],j=F[1],G=r.unproject(F),k=[G.lng,G.lat],U=S+Mt((M-S)/2,2),V=N+Mt((P-N)/2,2),B=r.unproject([U,V]),q=[B.lng,B.lat],z=I+Mt((D-I)/2,2),Y=x+Mt((j-x)/2,2),X=r.unproject([z,Y]),W=[X.lng,X.lat],J=d-Mt((d-h)/4,2),H=g-Mt((g-f)/4,2),K=d-Mt((d-h)/6,2),$=g-Mt((g-f)/6,2),Z=Ft(r,J,H,d,g,Math.PI/6),Q=Ft(r,J,H,d,g,-Math.PI/6),tt=Ft(r,K,$,d,g,Math.PI/9),et=Ft(r,K,$,d,g,-Math.PI/9),nt=Math.pow(M-d,2)+Math.pow(P-g,2),rt=Math.pow(D-d,2)+Math.pow(j-g,2),it=At(Pt(rt<nt?[L,R,tt]:[L,q,tt]),{resolution:3e3,sharpness:.85}),ot=At(Pt(rt<nt?[et,W,C]:[et,k,C]),{resolution:3e3,sharpness:.85}),[[i].concat(Ot(it.geometry.coordinates),[Z,s,Q],Ot(ot.geometry.coordinates))])),void 0===this.coordinates[Tt]&&(this.coordinates[Tt]=[])};var Rt=function(t,e,n,r,i){return[(t-n)*Math.cos(i)-(e-r)*Math.sin(i)+n,(t-n)*Math.sin(i)+(e-r)*Math.cos(i)+r]},Ft=function(t,e,n,r,i,o){var s=Rt(e,n,r,i,o),a=t.unproject(s);return[a.lng,a.lat]};e.exports=i},{"./feature":85,"@turf/bezier-spline":13,"@turf/helpers":21}],90:[function(t,e,n){"use strict";function Rt(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var Ft=t("@turf/helpers").round,Dt=t("@turf/helpers").lineString,jt=t("@turf/bezier-spline").default,r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r,i,o,s,a,u,c,l,p,h,f,d,g,y,_,m,v,E,I,x,b,C,w,S,N,T,L,O,M,P,A,R,F,D,j,G,k,U,V,B,q,z,Y,X,W,J,H,K,$,Z,Q,tt,et,nt,rt,it,ot,st,at,ut,ct,lt,pt,ht,ft,dt,gt,yt,_t,mt,vt,Et,It,xt,bt,Ct,wt,St,Nt,Tt,Lt,Ot,Mt=t.split("."),Pt=parseInt(Mt[0],10),At=parseInt(Mt[1],10);0===At?(this.properties.feature_type="offensive_tail_arrow",this.properties.start=[e,n],this.coordinates[Pt][At]=[e,n]):1===At?(this.properties.middle=[e,n],this.coordinates=(ut=this.ctx.map,ct=this.properties.start,lt=this.properties.middle,pt=ut.project(ct),ht=ut.project(lt),ft=Ft(pt.x,2),dt=Ft(pt.y,2),gt=Ft(ht.x,2),yt=Ft(ht.y,2),_t=ft+Ft((gt-ft)/4,2),mt=dt+Ft((yt-dt)/4,2),vt=gt-Ft((gt-ft)/4,2),Et=yt-Ft((yt-dt)/4,2),It=gt-Ft((gt-ft)/6,2),xt=yt-Ft((yt-dt)/6,2),bt=ut.unproject([_t,mt]),Ct=[bt.lng,bt.lat],wt=kt(ut,_t,mt,ft,dt,Math.PI/2),St=kt(ut,_t,mt,ft,dt,-Math.PI/2),Nt=kt(ut,vt,Et,gt,yt,Math.PI/6),Tt=kt(ut,vt,Et,gt,yt,-Math.PI/6),Lt=kt(ut,It,xt,gt,yt,Math.PI/9),Ot=kt(ut,It,xt,gt,yt,-Math.PI/9),[[Ct,St,Lt,Nt,lt,Tt,Ot,wt]])):1<At&&(this.properties.end=[e,n],this.coordinates=(r=this.ctx.map,i=this.properties.start,o=this.properties.middle,s=this.properties.end,a=r.project(i),u=r.project(o),c=r.project(s),l=Ft(a.x,2),p=Ft(a.y,2),h=Ft(u.x,2),f=Ft(u.y,2),d=Ft(c.x,2),g=Ft(c.y,2),y=l+Ft((h-l)/3,2),_=p+Ft((f-p)/3,2),m=h-Ft((h-l)/3,2),v=f-Ft((f-p)/3,2),E=r.unproject([y,_]),I=[E.lng,E.lat],x=Gt(y,_,l,p,Math.PI/2),b=x[0],C=x[1],w=r.unproject(x),S=[w.lng,w.lat],N=Gt(y,_,l,p,-Math.PI/2),T=N[0],L=N[1],O=r.unproject(N),M=[O.lng,O.lat],P=Gt(m,v,h,f,Math.PI/2),A=P[0],R=P[1],F=r.unproject(P),D=[F.lng,F.lat],j=Gt(m,v,h,f,-Math.PI/2),G=j[0],k=j[1],U=r.unproject(j),V=[U.lng,U.lat],B=T+Ft((A-T)/2,2),q=L+Ft((R-L)/2,2),z=r.unproject([B,q]),Y=[z.lng,z.lat],X=b+Ft((G-b)/2,2),W=C+Ft((k-C)/2,2),J=r.unproject([X,W]),H=[J.lng,J.lat],K=d-Ft((d-h)/4,2),$=g-Ft((g-f)/4,2),Z=d-Ft((d-h)/6,2),Q=g-Ft((g-f)/6,2),tt=kt(r,K,$,d,g,Math.PI/6),et=kt(r,K,$,d,g,-Math.PI/6),nt=kt(r,Z,Q,d,g,Math.PI/9),rt=kt(r,Z,Q,d,g,-Math.PI/9),it=Math.pow(A-d,2)+Math.pow(R-g,2),ot=Math.pow(G-d,2)+Math.pow(k-g,2),st=jt(Dt(ot<it?[M,D,nt]:[M,Y,nt]),{resolution:3e3,sharpness:.85}),at=jt(Dt(ot<it?[rt,H,S]:[rt,V,S]),{resolution:3e3,sharpness:.85}),[[I].concat(Rt(st.geometry.coordinates),[tt,s,et],Rt(at.geometry.coordinates))])),void 0===this.coordinates[Pt]&&(this.coordinates[Pt]=[])};var Gt=function(t,e,n,r,i){return[(t-n)*Math.cos(i)-(e-r)*Math.sin(i)+n,(t-n)*Math.sin(i)+(e-r)*Math.cos(i)+r]},kt=function(t,e,n,r,i,o){var s=Gt(e,n,r,i,o),a=t.unproject(s);return[a.lng,a.lat]};e.exports=i},{"./feature":85,"@turf/bezier-spline":13,"@turf/helpers":21}],91:[function(t,e,n){"use strict";function pe(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var he=t("@turf/helpers").round,fe=t("@turf/helpers").lineString,de=t("@turf/bezier-spline").default,r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n,r,i){this.changed();var o=t.split("."),s=parseInt(o[0],10),a=parseInt(o[1],10);if(0===a)this.properties.feature_type="pincer_attack_arrow",this.properties.start=[e,n],this.coordinates[s][a]=[e,n];else if(1===a)this.properties.middle=[e,n],this.coordinates[s][a]=[e,n];else if(1<a){var u=null,c=null,l=null;this.properties.arrow1&&this.properties.arrow2&&2===this.properties.arrow1.length&&2===this.properties.arrow2.length&&this.properties.end&&(this.properties.arrow1[0]===r&&this.properties.arrow1[1]===i?(u=[e,n],c=this.properties.arrow2,l=this.properties.end):this.properties.arrow2[0]===r&&this.properties.arrow2[1]===i&&(u=this.properties.arrow1,c=[e,n],l=this.properties.end)),l||(l=[e,n]),this.properties.end=l;var p=function(t,e,n,r,i,o){var s=t.project(e),a=t.project(n),u=t.project(r),c=he(s.x,2),l=he(s.y,2),p=he(a.x,2),h=he(a.y,2),f=he((c+p)/2,2),d=he((l+h)/2,2),g=he(u.x,2),y=he(u.y,2),_=p+g-f,m=h+y-d,v=c+g-f,E=l+y-d,I=p+he((f-p)/2,2),x=h+he((d-h)/2,2),b=c+he((f-c)/2,2),C=l+he((d-l)/2,2),w=g-he((g-_)/3,2),S=y-he((y-m)/3,2),N=g-he((g-v)/3,2),T=y-he((y-E)/3,2);if(i&&o){var L=t.project(i),O=t.project(o);w=he(L.x,2),S=he(L.y,2),N=he(O.x,2),T=he(O.y,2)}var M=f+he((g-f)/4,2),P=d+he((y-d)/4,2),A=t.unproject([f,d]),R=[A.lng,A.lat],F=t.unproject([M,P]),D=[F.lng,F.lat],j=t.unproject([w,S]),G=[j.lng,j.lat],k=t.unproject([N,T]),U=[k.lng,k.lat],V=w-he((w-p)/6,2),B=S-he((S-h)/6,2),q=w-he((w-p)/9,2),z=S-he((S-h)/9,2),Y=ge(V,B,w,S,Math.PI/4),X=ge(V,B,w,S,-Math.PI/4),W=Y[0],J=Y[1],H=X[0],K=X[1],$=ye(t,V,B,w,S,Math.PI/9),Z=ye(t,V,B,w,S,-Math.PI/9),Q=ge(q,z,w,S,Math.PI/18),tt=ge(q,z,w,S,-Math.PI/18),et=Q[0],nt=Q[1],rt=tt[0],it=tt[1],ot=t.unproject([et,nt]),st=[ot.lng,ot.lat],at=t.unproject([rt,it]),ut=[at.lng,at.lat],ct=N-he((N-c)/6,2),lt=T-he((T-l)/6,2),pt=N-he((N-c)/9,2),ht=T-he((T-l)/9,2),ft=ge(ct,lt,N,T,Math.PI/4),dt=ge(ct,lt,N,T,-Math.PI/4),gt=ft[0],yt=ft[1],_t=dt[0],mt=dt[1],vt=ge(ct,lt,N,T,Math.PI/9),Et=ge(ct,lt,N,T,-Math.PI/9),It=vt[0],xt=vt[1],bt=Et[0],Ct=Et[1],wt=t.unproject([It,xt]),St=[wt.lng,wt.lat],Nt=t.unproject([bt,Ct]),Tt=[Nt.lng,Nt.lat],Lt=ge(pt,ht,N,T,Math.PI/18),Ot=ge(pt,ht,N,T,-Math.PI/18),Mt=Lt[0],Pt=Lt[1],At=Ot[0],Rt=Ot[1],Ft=t.unproject([Mt,Pt]),Dt=[Ft.lng,Ft.lat],jt=t.unproject([At,Rt]),Gt=[jt.lng,jt.lat],kt=Math.pow(et-M,2)+Math.pow(nt-P,2),Ut=Math.pow(rt-M,2)+Math.pow(it-P,2),Vt=Math.pow(Mt-M,2)+Math.pow(Pt-P,2),Bt=Math.pow(At-M,2)+Math.pow(Rt-P,2),qt=Ut<kt?p+he((W-p)/2,2):p+he((H-p)/2,2),zt=Ut<kt?h+he((J-h)/2,2):h+he((K-h)/2,2),Yt=t.unproject([qt,zt]),Xt=[Yt.lng,Yt.lat],Wt=Vt<Bt?c+he((_t-c)/2,2):c+he((gt-c)/2,2),Jt=Vt<Bt?l+he((mt-l)/2,2):l+he((yt-l)/2,2),Ht=t.unproject([Wt,Jt]),Kt=[Ht.lng,Ht.lat],$t=Ut<kt?[n,Xt,st,$,G,Z,ut]:[n,Xt,ut,Z,G,$,st],Zt=Vt<Bt?[Dt,St,U,Tt,Gt,Kt,e]:[Gt,Tt,U,St,Dt,Kt,e],Qt=Ut<kt?rt+he((I-rt)/2,2):et+he((I-et)/2,2),te=Ut<kt?it+he((x-it)/2,2):nt+he((x-nt)/2,2),ee=t.unproject([Qt,te]),ne=[ee.lng,ee.lat],re=Vt<Bt?Mt+he((b-Mt)/2,2):At+he((b-At)/2,2),ie=Vt<Bt?Pt+he((C-Pt)/2,2):Rt+he((C-Rt)/2,2),oe=t.unproject([re,ie]),se=[oe.lng,oe.lat],ae=de(fe([$t[0],$t[1],$t[2]]),{resolution:3e3,sharpness:.85}),ue=de(fe([$t[6],ne,D,se,Zt[0]]),{resolution:3e3,sharpness:.85}),ce=de(fe([Zt[4],Zt[5],Zt[6]]),{resolution:3e3,sharpness:.85}),le=[[R].concat(pe(ae.geometry.coordinates),[$t[3],$t[4],$t[5]],pe(ue.geometry.coordinates),[Zt[1],Zt[2],Zt[3]],pe(ce.geometry.coordinates))];return{arrow1:G,arrow2:U,coords:le}}(this.ctx.map,this.properties.start,this.properties.middle,this.properties.end,u,c);this.properties.arrow1=p.arrow1,this.properties.arrow2=p.arrow2,this.coordinates=p.coords}void 0===this.coordinates[s]&&(this.coordinates[s]=[])};var ge=function(t,e,n,r,i){return[(t-n)*Math.cos(i)-(e-r)*Math.sin(i)+n,(t-n)*Math.sin(i)+(e-r)*Math.cos(i)+r]},ye=function(t,e,n,r,i,o){var s=ge(e,n,r,i,o),a=t.unproject(s);return[a.lng,a.lat]};e.exports=i},{"./feature":85,"@turf/bezier-spline":13,"@turf/helpers":21}],92:[function(t,e,n){"use strict";var r=t("./feature"),i=function(t,e){r.call(this,t,e)};(i.prototype=Object.create(r.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},i.prototype.updateCoordinate=function(t,e,n){3===arguments.length?this.coordinates=[e,n]:this.coordinates=[t,e],this.changed()},i.prototype.getCoordinate=function(){return this.getCoordinates()},e.exports=i},{"./feature":85}],93:[function(t,e,n){"use strict";var r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);void 0===this.coordinates[i]&&(this.coordinates[i]=[]),this.coordinates[i][o]=[e,n]},e.exports=i},{"./feature":85}],94:[function(t,e,n){"use strict";var r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);0===o?(this.properties.feature_type="rectangle",this.properties.start=[e,n],this.coordinates[i][o]=[e,n]):1===o&&(this.properties.end=[e,n],this.coordinates=function(n,t){var e=n[0],r=n[1],i=t[0],o=t[1];if(i<e){var s=e;e=i,i=s}if(o<r){var a=r;r=o,o=a}var u=[e,r,i,o],c=[[u[0],u[1]],[u[2],u[1]],[u[2],u[3]],[u[0],u[3]]],l=0;c.map(function(t,e){return n[0]===t[0]&&n[1]===t[1]&&(l=e),null});for(var p=[],h=l;h<c.length;h++)p.push(c[h]);for(var f=0;f<l;f++)p.push(c[f]);return[p]}(this.properties.start,[e,n])),void 0===this.coordinates[i]&&(this.coordinates[i]=[])},e.exports=i},{"./feature":85}],95:[function(t,e,n){"use strict";var h=t("@turf/bearing").default,f=t("@turf/sector").default,d=t("@turf/distance").default,r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r,i,o,s,a,u,c=t.split("."),l=parseInt(c[0],10),p=parseInt(c[1],10);0===p?(this.properties.feature_type="sector",this.properties.center=[e,n],this.coordinates[l][p]=[e,n]):1===p?(this.properties.start=[e,n],this.coordinates[l][p]=[e,n]):2===p&&(this.properties.end=[e,n],this.coordinates=(r=this.properties.center,i=this.properties.start,o=[e,n],s=h(r,i),a=h(r,o),u=d(r,i),[f(r,u,s,a).geometry.coordinates[0].slice(0,-1)])),void 0===this.coordinates[l]&&(this.coordinates[l]=[])},e.exports=i},{"./feature":85,"@turf/bearing":12,"@turf/distance":20,"@turf/sector":37}],96:[function(t,e,n){"use strict";var N=t("@turf/helpers").round,r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r,i,o,s,a,u,c,l,p,h,f,d,g,y,_,m,v,E,I,x,b,C=t.split("."),w=parseInt(C[0],10),S=parseInt(C[1],10);0===S?(this.properties.feature_type="thin_straight_arrow",this.properties.start=[e,n],this.coordinates[w][S]=[e,n]):1<=S&&(this.properties.end=[e,n],this.coordinates=(r=this.ctx.map,i=this.properties.start,o=this.properties.end,s=r.project(i),a=r.project(o),u=N(s.x,2),c=N(s.y,2),l=N(a.x,2),p=N(a.y,2),h=u+N((l-u)/6,2),f=c+N((p-c)/6,2),d=l-N((l-u)/4,2),g=p-N((p-c)/4,2),y=l-N((l-u)/6,2),_=p-N((p-c)/6,2),m=T(r,h,f,u,c,Math.PI/2),v=T(r,h,f,u,c,-Math.PI/2),E=T(r,d,g,l,p,Math.PI/6),I=T(r,d,g,l,p,-Math.PI/6),x=T(r,y,_,l,p,Math.PI/9),b=T(r,y,_,l,p,-Math.PI/9),[[i,v,x,E,o,I,b,m]])),void 0===this.coordinates[w]&&(this.coordinates[w]=[])};var T=function(t,e,n,r,i,o){var s,a,u,c,l,p=(a=n,c=i,l=o,[((s=e)-(u=r))*Math.cos(l)-(a-c)*Math.sin(l)+u,(s-u)*Math.sin(l)+(a-c)*Math.cos(l)+c]),h=t.unproject(p);return[h.lng,h.lat]};e.exports=i},{"./feature":85,"@turf/helpers":21}],97:[function(t,e,n){"use strict";var L=t("@turf/helpers").round,r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r,i,o,s,a,u,c,l,p,h,f,d,g,y,_,m,v,E,I,x,b,C,w,S=t.split("."),N=parseInt(S[0],10),T=parseInt(S[1],10);0===T?(this.properties.feature_type="thin_tail_arrow",this.properties.start=[e,n],this.coordinates[N][T]=[e,n]):1<=T&&(this.properties.end=[e,n],this.coordinates=(r=this.ctx.map,i=this.properties.start,o=this.properties.end,s=r.project(i),a=r.project(o),u=L(s.x,2),c=L(s.y,2),l=L(a.x,2),p=L(a.y,2),h=u+L((l-u)/6,2),f=c+L((p-c)/6,2),d=l-L((l-u)/4,2),g=p-L((p-c)/4,2),y=l-L((l-u)/6,2),_=p-L((p-c)/6,2),m=r.unproject([h,f]),v=[m.lng,m.lat],E=O(r,h,f,u,c,Math.PI/2),I=O(r,h,f,u,c,-Math.PI/2),x=O(r,d,g,l,p,Math.PI/6),b=O(r,d,g,l,p,-Math.PI/6),C=O(r,y,_,l,p,Math.PI/9),w=O(r,y,_,l,p,-Math.PI/9),[[v,I,C,x,o,b,w,E]])),void 0===this.coordinates[N]&&(this.coordinates[N]=[])};var O=function(t,e,n,r,i,o){var s,a,u,c,l,p=(a=n,c=i,l=o,[((s=e)-(u=r))*Math.cos(l)-(a-c)*Math.sin(l)+u,(s-u)*Math.sin(l)+(a-c)*Math.cos(l)+c]),h=t.unproject(p);return[h.lng,h.lat]};e.exports=i},{"./feature":85,"@turf/helpers":21}],98:[function(t,e,n){"use strict";var r=t("./feature"),i=function(t,e){r.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(i.prototype=Object.create(r.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return 2<t.length})},i.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[r[0]].splice(r[1],0,[e,n])},i.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},i.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},i.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);0===o?(this.properties.feature_type="triangle",this.properties.start=[e,n],this.coordinates[i][o]=[e,n]):1===o?(this.properties.middle=[e,n],this.coordinates[i][o]=[e,n]):2===o&&(this.properties.end=[e,n],this.coordinates[i][o]=[e,n]),void 0===this.coordinates[i]&&(this.coordinates[i]=[])},e.exports=i},{"./feature":85}],99:[function(t,e,n){"use strict";var y=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_=t("../constants").customStyle,m={color:["fillColor","fillOutlineColor","lineColor","circleBorderColor","circleColor"],opacity:["fillOpacity"],width:["fillOutlineWidth","lineWidth","circleBorderRadius","circleRadius"],dasharray:["fillOutlineDasharray","lineDasharray"],icon:["iconImage","iconSize","iconRotate"]};e.exports={setStyleProperties:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t.setProperty("custom_style",_.OPEN);var n=!0,r=!1,i=void 0;try{for(var o,s=Object.entries(e)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=y(o.value,2),u=a[0],c=a[1];if(m.color.includes(u)&&t.setProperty(u,c||"#55B1F3"),m.opacity.includes(u)){var l=void 0===c?.1:parseFloat(c);l<0&&(l=0),t.setProperty(u,l)}if(m.width.includes(u)){var p=void 0===c?1:parseFloat(c);if(p<0&&(p=0),"circleBorderRadius"===u){var h=void 0===e.circleRadius?void 0:parseFloat(e.circleRadius);p+=parseFloat(h||t.properties.circleRadius||4)}t.setProperty(u,p)}if(m.dasharray.includes(u)&&t.setProperty(u,c||_.CLOSE),m.icon.includes(u))if("iconImage"===u){var f=void 0===c?"":c;t.setProperty(u,f)}else if("iconSize"===u){var d=void 0===c?1:parseFloat(c);d<0&&(d=0),t.setProperty(u,d)}else if("iconRotate"===u){var g=void 0===c?0:parseFloat(c);t.setProperty(u,g)}}}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}},deleteAllStyleProperties:function(e){e.deleteProperty("custom_style"),m.color.forEach(function(t){e.deleteProperty(t)}),m.opacity.forEach(function(t){e.deleteProperty(t)}),m.width.forEach(function(t){e.deleteProperty(t)}),m.dasharray.forEach(function(t){e.deleteProperty(t)})}}},{"../constants":69}],100:[function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=t("xtend"),i=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4;return"circle-radius"===e&&"circleBorderRadius"===r?void 0!==n.circleBorderRadius?o({},e,void 0!==n.circleRadius?n.circleRadius+n.circleBorderRadius:i+n.circleBorderRadius):{}:o({},e,void 0!==n[r]?n[r]:t[e])};e.exports=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return arguments[1].map(function(t){switch(t.id){case"gl-draw-polygon-fill-inactive":return r(t,{paint:r(t.paint,i(t.paint,"fill-color",e.inactive,"fillColor"),i(t.paint,"fill-outline-color",e.inactive,"fillOutlineColor"),i(t.paint,"fill-opacity",e.inactive,"fillOpacity"))});case"gl-draw-polygon-fill-active":return r(t,{paint:r(t.paint,i(t.paint,"fill-color",e.active,"fillColor"),i(t.paint,"fill-outline-color",e.active,"fillOutlineColor"),i(t.paint,"fill-opacity",e.active,"fillOpacity"))});case"gl-draw-polygon-stroke-inactive":return r(t,{paint:r(t.paint,i(t.paint,"line-color",e.inactive,"fillOutlineColor"),i(t.paint,"line-width",e.inactive,"fillOutlineWidth"))});case"gl-draw-polygon-stroke-active":return r(t,{paint:r(t.paint,i(t.paint,"line-color",e.active,"fillOutlineColor"),i(t.paint,"line-width",e.active,"fillOutlineWidth"))});case"gl-draw-line-inactive":return r(t,{paint:r(t.paint,i(t.paint,"line-color",e.inactive,"lineColor"),i(t.paint,"line-width",e.inactive,"lineWidth"))});case"gl-draw-line-active":return r(t,{paint:r(t.paint,i(t.paint,"line-color",e.active,"lineColor"),i(t.paint,"line-width",e.active,"lineWidth"))});case"gl-draw-polygon-midpoint":return r(t,{paint:r(t.paint,i(t.paint,"circle-color",e.active,"circleColor"),i(t.paint,"circle-radius",e.inactive,"circleRadius",4))});case"gl-draw-polygon-and-line-vertex-stroke-inactive":return r(t,{paint:r(t.paint,i(t.paint,"circle-color",e.inactive,"circleBorderColor"),i(t.paint,"circle-radius",e.inactive,"circleBorderRadius",4))});case"gl-draw-polygon-and-line-vertex-inactive":return r(t,{paint:r(t.paint,i(t.paint,"circle-color",e.active,"circleColor"),i(t.paint,"circle-radius",e.inactive,"circleRadius",4))});case"gl-draw-point-point-stroke-inactive":return r(t,{paint:r(t.paint,i(t.paint,"circle-color",e.inactive,"circleBorderColor"),i(t.paint,"circle-radius",e.inactive,"circleBorderRadius",4))});case"gl-draw-point-inactive":return r(t,{paint:r(t.paint,i(t.paint,"circle-color",e.inactive,"circleColor"),i(t.paint,"circle-radius",e.inactive,"circleRadius"))});case"gl-draw-point-stroke-active":return r(t,{paint:r(t.paint,i(t.paint,"circle-color",e.active,"circleBorderColor"),i(t.paint,"circle-radius",e.active,"circleBorderRadius",6))});case"gl-draw-point-active":return r(t,{paint:r(t.paint,i(t.paint,"circle-color",e.active,"circleColor"),i(t.paint,"circle-radius",e.active,"circleRadius"))});case"gl-draw-icon-stroke-active":return r(t,{paint:r(t.paint,i(t.paint,"circle-color",e.active,"circleColor"))});case"gl-draw-polygon-fill-static":return r(t,{paint:r(t.paint,i(t.paint,"fill-color",e.static,"fillColor"),i(t.paint,"fill-outline-color",e.static,"fillOutlineColor"),i(t.paint,"fill-opacity",e.static,"fillOpacity"))});case"gl-draw-polygon-stroke-static":return r(t,{paint:r(t.paint,i(t.paint,"line-color",e.static,"fillOutlineColor"),i(t.paint,"line-width",e.static,"fillOutlineWidth"))});case"gl-draw-line-static":return r(t,{paint:r(t.paint,i(t.paint,"line-color",e.static,"lineColor"),i(t.paint,"line-width",e.static,"lineWidth"))});case"gl-draw-point-static":return r(t,{paint:r(t.paint,i(t.paint,"circle-color",e.static,"circleColor"),i(t.paint,"circle-radius",e.static,"circleRadius"))})}return t})}},{xtend:67}],101:[function(t,e,n){"use strict";var r=t("../constants");e.exports={isOfMetaType:function(n){return function(t){var e=t.featureTarget;return!!e&&(!!e.properties&&e.properties.meta===n)}},isShiftMousedown:function(t){return!!t.originalEvent&&(!!t.originalEvent.shiftKey&&0===t.originalEvent.button)},isActiveFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===r.activeStates.ACTIVE&&t.featureTarget.properties.meta===r.meta.FEATURE))},isInactiveFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===r.activeStates.INACTIVE&&t.featureTarget.properties.meta===r.meta.FEATURE))},noTarget:function(t){return void 0===t.featureTarget},isFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&t.featureTarget.properties.meta===r.meta.FEATURE)},isVertex:function(t){var e=t.featureTarget;return!!e&&(!!e.properties&&e.properties.meta===r.meta.VERTEX)},isShiftDown:function(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey},isEscapeKey:function(t){return 27===t.keyCode},isEnterKey:function(t){return 13===t.keyCode},true:function(){return!0}}},{"../constants":69}],102:[function(t,e,n){"use strict";var h=t("@mapbox/geojson-extent"),r=t("../constants"),i=r.LAT_MIN,o=r.LAT_MAX,f=r.LAT_RENDERED_MIN,d=r.LAT_RENDERED_MAX,g=r.LNG_MIN,y=r.LNG_MAX;e.exports=function(t,e){var s=i,a=o,u=i,c=o,l=y,p=g;t.forEach(function(t){var e=h(t),n=e[1],r=e[3],i=e[0],o=e[2];s<n&&(s=n),r<a&&(a=r),u<r&&(u=r),n<c&&(c=n),i<l&&(l=i),p<o&&(p=o)});var n=e;return s+n.lat>d&&(n.lat=d-s),u+n.lat>o&&(n.lat=o-u),a+n.lat<f&&(n.lat=f-a),c+n.lat<i&&(n.lat=i-c),l+n.lng<=g&&(n.lng+=360*Math.ceil(Math.abs(n.lng)/360)),p+n.lng>=y&&(n.lng-=360*Math.ceil(Math.abs(n.lng)/360)),n}},{"../constants":69,"@mapbox/geojson-extent":5}],103:[function(t,e,n){"use strict";var c=t("../constants");e.exports=function(t,e,n,r){var i=e.geometry.coordinates,o=n.geometry.coordinates;if(i[1]>c.LAT_RENDERED_MAX||i[1]<c.LAT_RENDERED_MIN||o[1]>c.LAT_RENDERED_MAX||o[1]<c.LAT_RENDERED_MIN)return null;var s=r.project([i[0],i[1]]),a=r.project([o[0],o[1]]),u=r.unproject([(s.x+a.x)/2,(s.y+a.y)/2]);return{type:c.geojsonTypes.FEATURE,properties:{meta:c.meta.MIDPOINT,parent:t,lng:u.lng,lat:u.lat,coord_path:n.properties.coord_path},geometry:{type:c.geojsonTypes.POINT,coordinates:[u.lng,u.lat]}}}},{"../constants":69}],104:[function(t,e,n){"use strict";var f=t("./create_vertex"),d=t("./create_midpoint"),u=t("../constants");e.exports=function r(i){var o,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,t=i.geometry,e=t.type,s=t.coordinates,l=i.properties&&i.properties.id,p=[];function a(t,s){var a="",u=null;t.forEach(function(t,e){var n=null!=s?s+"."+e:String(e),r=f(l,t,n,h(n));if(c.midpoints&&u){var i=d(l,u,r,c.map);i&&p.push(i)}u=r;var o=JSON.stringify(t);a!==o&&p.push(r),0===e&&(a=o)})}function h(t){return!!c.selectedPaths&&-1!==c.selectedPaths.indexOf(t)}return e===u.geojsonTypes.POINT?p.push(f(l,s,n,h(n))):e===u.geojsonTypes.POLYGON?s.forEach(function(t,e){a(t,null!==n?n+"."+e:String(e))}):e===u.geojsonTypes.LINE_STRING?a(s,n):0===e.indexOf(u.geojsonTypes.MULTI_PREFIX)&&(o=e.replace(u.geojsonTypes.MULTI_PREFIX,""),s.forEach(function(t,e){var n={type:u.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:o,coordinates:t}};p=p.concat(r(n,c,e))})),p}},{"../constants":69,"./create_midpoint":103,"./create_vertex":105}],105:[function(t,e,n){"use strict";var i=t("../constants");e.exports=function(t,e,n,r){return{type:i.geojsonTypes.FEATURE,properties:{meta:i.meta.VERTEX,parent:t,coord_path:n,active:r?i.activeStates.ACTIVE:i.activeStates.INACTIVE},geometry:{type:i.geojsonTypes.POINT,coordinates:e}}}},{"../constants":69}],106:[function(t,e,n){"use strict";e.exports={enable:function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()},0)},disable:function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()},0)}}},{}],107:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}},{}],108:[function(t,e,n){"use strict";var c=t("./sort_features"),l=t("./map_event_to_bounding_box"),r=t("../constants"),p=t("./string_set"),h=[r.meta.FEATURE,r.meta.MIDPOINT,r.meta.VERTEX];function i(t,e,n,r){if(null===n.map)return[];if(!1==!!n.options.drawEnabled)return[];var i=t?l(t,r):e,o={};n.options.styles&&(o.layers=n.options.styles.map(function(t){return t.id}));var s=n.map.queryRenderedFeatures(i,o).filter(function(t){return-1!==h.indexOf(t.properties.meta)}),a=new p,u=[];return s.forEach(function(t){var e=t.properties.id;a.has(e)||(a.add(e),u.push(t))}),c(u)}e.exports={click:function(t,e,n){return i(t,e,n,n.options.adsorbEnabled?n.options.clickBuffer+2:n.options.clickBuffer)},touch:function(t,e,n){return i(t,e,n,n.options.touchBuffer)}}},{"../constants":69,"./map_event_to_bounding_box":113,"./sort_features":117,"./string_set":118}],109:[function(t,e,n){"use strict";var i=t("./features_at"),o=t("../constants");e.exports=function(t,e){var n=i.click(t,null,e),r={mouse:o.cursors.NONE};return n[0]&&(r.mouse=n[0].properties.active===o.activeStates.ACTIVE?o.cursors.MOVE:o.cursors.POINTER,r.feature=n[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(r.mouse=o.cursors.ADD),e.ui.queueMapClasses(r),e.ui.updateMapClasses(),n}},{"../constants":69,"./features_at":108}],110:[function(t,e,n){"use strict";var a=t("./euclidean_distance");e.exports=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=null!=n.fineTolerance?n.fineTolerance:4,i=null!=n.grossTolerance?n.grossTolerance:12,o=null!=n.interval?n.interval:500;t.point=t.point||e.point,t.time=t.time||e.time;var s=a(t.point,e.point);return s<r||s<i&&e.time-t.time<o}},{"./euclidean_distance":107}],111:[function(t,e,n){"use strict";e.exports=function(t,e){return!!t.lngLat&&t.lngLat.lng===e[0]&&t.lngLat.lat===e[1]}},{}],112:[function(t,e,n){"use strict";var o=t("./euclidean_distance");e.exports=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=null!=n.tolerance?n.tolerance:25,i=null!=n.interval?n.interval:250;return t.point=t.point||e.point,t.time=t.time||e.time,o(t.point,e.point)<r&&e.time-t.time<i}},{"./euclidean_distance":107}],113:[function(t,e,n){"use strict";e.exports=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}},{}],114:[function(t,e,n){"use strict";e.exports=function(t,o){var s={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},a={on:function(t,e,n){if(void 0===s[t])throw new Error("Invalid event type: "+t);s[t].push({selector:e,fn:n})},render:function(t){o.store.featureChanged(t)}},e=function(t,e){for(var n=s[t],r=n.length;r--;){var i=n[r];if(i.selector(e)){i.fn.call(a,e),o.store.render(),o.ui.updateMapClasses();break}}};return t.start.call(a),{render:t.render,stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),o.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},unionPolygon:function(){t.unionPolygon&&t.unionPolygon()},unionLine:function(){t.unionLine&&t.unionLine()},splitLine:function(){t.splitLine&&t.splitLine()},curveLine:function(){t.curveLine&&t.curveLine()},drag:function(t){e("drag",t)},click:function(t){e("click",t)},mousemove:function(t){e("mousemove",t)},mousedown:function(t){e("mousedown",t)},mouseup:function(t){e("mouseup",t)},mouseout:function(t){e("mouseout",t)},keydown:function(t){e("keydown",t)},keyup:function(t){e("keyup",t)},touchstart:function(t){e("touchstart",t)},touchmove:function(t){e("touchmove",t)},touchend:function(t){e("touchend",t)},tap:function(t){e("tap",t)}}}},{}],115:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry");e.exports=function(t,e){var n=e.getBoundingClientRect();return new r(t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0))}},{"@mapbox/point-geometry":10}],116:[function(t,e,n){"use strict";var r=t("./constrain_feature_movement"),o=t("../constants"),s=t("../feature_types/circle"),p=t("../feature_types/rectangle"),h=t("../feature_types/triangle"),f=t("../feature_types/sector"),d=t("../feature_types/ellipse"),g=t("../feature_types/arc"),y=t("../feature_types/line_arrow"),_=t("../feature_types/thin_straight_arrow"),m=t("../feature_types/thin_tail_arrow"),v=t("../feature_types/attack_arrow"),E=t("../feature_types/offensive_arrow"),I=t("../feature_types/offensive_tail_arrow"),x=t("../feature_types/pincer_attack_arrow"),b=t("../feature_types/curve_polygon");e.exports=function(t,e){var i=r(t.map(function(t){return t.toGeoJSON()}),e),c=function(t){return t&&Array.isArray(t)},l=function(t){return t&&Array.isArray(t)&&2===t.length&&!isNaN(t[0])&&!isNaN(t[1])};t.forEach(function(t){var e=t.getCoordinates(),a=function(t){var e={lng:t[0]+i.lng,lat:t[1]+i.lat};return[e.lng,e.lat]},u=function(t){return t.map(function(t){return a(t)})},n=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],i=t.properties;for(var o in i)e.includes(o)&&l(i[o])&&t.setProperty(o,a(i[o])),n.includes(o)&&c(i[o])&&t.setProperty(o,i[o].map(a)),r.includes(o)&&c(i[o])&&t.setProperty(o,i[o].map(u));for(var s in t)e.includes(s)&&l(t[s])&&(t[s]=a(t[s])),n.includes(s)&&c(t[s])&&(t[s]=i[s].map(a)),r.includes(s)&&c(t[s])&&(t[s]=i[s].map(u))},r=void 0;t.type===o.geojsonTypes.POINT?r=a(e):t.type===o.geojsonTypes.LINE_STRING||t.type===o.geojsonTypes.MULTI_POINT?r=e.map(a):t.type===o.geojsonTypes.POLYGON||t.type===o.geojsonTypes.MULTI_LINE_STRING?r=e.map(u):t.type===o.geojsonTypes.MULTI_POLYGON&&(r=e.map(function(t){return t.map(function(t){return u(t)})})),t.incomingCoords(r),t instanceof s?n(t,["center"]):t instanceof p?n(t,["start","end"]):t instanceof h?n(t,["start","middle","end"]):t instanceof f?n(t,["center","start","end"]):t instanceof d?n(t,["first","second","end"]):t instanceof g?n(t,["first","second","end"]):t instanceof y?n(t,["start","end"]):t instanceof _?n(t,["start","end"]):t instanceof m?n(t,["start","end"]):t instanceof v?n(t,["start","end"]):t instanceof E?n(t,["start","middle","end"]):t instanceof I?n(t,["start","middle","end"]):t instanceof x?n(t,["start","second","end","arrow1","arrow2"]):t instanceof b&&n(t,["start"])})}},{"../constants":69,"../feature_types/arc":80,"../feature_types/attack_arrow":81,"../feature_types/circle":82,"../feature_types/curve_polygon":83,"../feature_types/ellipse":84,"../feature_types/line_arrow":86,"../feature_types/offensive_arrow":89,"../feature_types/offensive_tail_arrow":90,"../feature_types/pincer_attack_arrow":91,"../feature_types/rectangle":94,"../feature_types/sector":95,"../feature_types/thin_straight_arrow":96,"../feature_types/thin_tail_arrow":97,"../feature_types/triangle":98,"./constrain_feature_movement":102}],117:[function(t,e,n){"use strict";var r=t("@mapbox/geojson-area"),i=t("../constants"),o={Point:0,LineString:1,Polygon:2};function s(t,e){var n=o[t.geometry.type]-o[e.geometry.type];return 0===n&&t.geometry.type===i.geojsonTypes.POLYGON?t.area-e.area:n}e.exports=function(t){return t.map(function(t){return t.geometry.type===i.geojsonTypes.POLYGON&&(t.area=r.geometry({type:i.geojsonTypes.FEATURE,property:{},geometry:t.geometry})),t}).sort(s).map(function(t){return delete t.area,t})}},{"../constants":69,"@mapbox/geojson-area":2}],118:[function(t,e,n){"use strict";function r(t){if(this._items={},this._length=t?t.length:0,t)for(var e=0,n=t.length;e<n;e++)void 0!==t[e]&&(this._items[t[e]]=e)}r.prototype.add=function(t){return this._length=this._items[t]?this._length:this._length+1,this._items[t]=this._items[t]?this._items[t]:this._length,this},r.prototype.delete=function(t){return this._length=this._items[t]?this._length-1:this._length,delete this._items[t],this},r.prototype.has=function(t){return void 0!==this._items[t]},r.prototype.values=function(){var n=this;return Object.keys(this._items).sort(function(t,e){return n._items[t]-n._items[e]})},r.prototype.clear=function(){return this._length=0,this._items={},this},e.exports=r},{}],119:[function(t,e,n){"use strict";e.exports=function(t,e){return t.length===e.length&&JSON.stringify(t.map(function(t){return t}).sort())===JSON.stringify(e.map(function(t){return t}).sort())}},{}],120:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=void 0,i=void 0;function o(){r=!1,i&&(s.apply(n,i),i=!1)}function s(){r?i=arguments:(r=!0,t.apply(n,arguments),setTimeout(o,e))}return s}},{}],121:[function(t,e,n){"use strict";e.exports=function(t){return[].concat(t).filter(function(t){return void 0!==t})}},{}],122:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=r.noTarget,o=r.isOfMetaType,s=r.isInactiveFeature,a=r.isShiftDown,u=t("../lib/create_supplementary_points"),h=t("../lib/constrain_feature_movement"),c=t("../lib/double_click_zoom"),f=t("../constants"),d=t("../lib/features_at"),l=t("../lib/common_selectors"),p=t("../lib/move_features"),g=t("@turf/line-split").default,y=o(f.meta.VERTEX),_=o(f.meta.MIDPOINT),m={onSetup:function(t){var e=t.featureId,n=this.getFeature(e);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===f.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");var r={featureId:e,feature:n,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[],initiallySelectedFeatures:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,r.selectedCoordPaths)),this.setSelected(e),r.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()}),c.disable(this),this.setActionableState({trash:!0}),r},fireUpdate:function(t){this.map.fire(f.events.UPDATE,{action:f.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallySelectedFeatures||[],features:this.getSelected().map(function(t){return t.toGeoJSON()})}),t.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:0<t.selectedCoordPaths.length})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties,r=t.selectedCoordPaths.indexOf(n.coord_path);a(e)||-1!==r?a(e)&&-1===r&&t.selectedCoordPaths.push(n.coord_path):t.selectedCoordPaths=[n.coord_path];var i=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(i)},onMidpoint:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties;t.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(t),t.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(e,t){return t.map(function(t){return{feature_id:e,coord_path:t}})},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,n){p(this.getSelected(),n),t.dragMoveLocation=e.lngLat},dragVertex:function(e,t,n){for(var r=e.selectedCoordPaths.map(function(t){return e.feature.getCoordinate(t)}),i=r.map(function(t){return{type:f.geojsonTypes.FEATURE,properties:{},geometry:{type:f.geojsonTypes.POINT,coordinates:t}}}),o=h(i,n),s=0;s<r.length;s++){var a=r[s],u=[a[0]+o.lng,a[1]+o.lat];if(this._ctx.options.adsorbEnabled){var c={point:this.map.project(u),lngLat:{lng:u[0],lat:u[1]}},l=d.click(c,null,this._ctx),p=this.getAdsorbCoord(e,c,l||[],e.featureId);p&&(t.lngLat.lng=t.lngLat.lng+(p[0]-u[0]),t.lngLat.lat=t.lngLat.lat+(p[1]-u[1]),t.point=this.map.project([t.lngLat.lng,t.lngLat.lat]),u=p,this.updateUIClasses({mouse:f.cursors.POINTER}))}e.feature.updateCoordinate(e.selectedCoordPaths[s],u[0],u[1],a[0],a[1])}},clickNoTarget:function(){this.changeMode(f.modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(f.modes.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onStop:function(){c.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,n){t.featureId===e.properties.id?(e.properties.active=f.activeStates.ACTIVE,n(e),u(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(n)):(e.properties.active=f.activeStates.INACTIVE,n(e)),this.fireActionable(t)},onTrash:function(e){e.selectedCoordPaths.sort().reverse().forEach(function(t){return e.feature.removeCoordinate(t)}),this.map.fire(f.events.UPDATE,{action:f.updateActions.CHANGE_COORDINATES,prevFeatures:e.initiallySelectedFeatures||[],features:this.getSelected().map(function(t){return t.toGeoJSON()})}),e.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()}),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(f.modes.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){var n=l.isActiveFeature(e),r=y(e),i=0===t.selectedCoordPaths.length;n&&i?this.updateUIClasses({mouse:f.cursors.MOVE}):r&&!i?this.updateUIClasses({mouse:f.cursors.MOVE}):this.updateUIClasses({mouse:f.cursors.NONE}),this.stopDragging(t)},onMouseOut:function(t){t.dragMoving&&this.fireUpdate(t)}};m.onTouchStart=m.onMouseDown=function(t,e){return y(e)?this.onVertex(t,e):l.isActiveFeature(e)?this.onFeature(t,e):_(e)?this.onMidpoint(t,e):void 0},m.onDrag=function(t,e){if(!0===t.canDragMove){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};0<t.selectedCoordPaths.length?this.dragVertex(t,e,n):this.dragFeature(t,e,n),t.dragMoveLocation=e.lngLat}},m.onClick=function(t,e){return i(e)?this.clickNoTarget(t,e):l.isActiveFeature(e)?this.clickActiveFeature(t,e):s(e)?this.clickInactive(t,e):void this.stopDragging(t)},m.onTap=function(t,e){return i(e)?this.clickNoTarget(t,e):l.isActiveFeature(e)?this.clickActiveFeature(t,e):s(e)?this.clickInactive(t,e):void 0},m.onTouchEnd=m.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(t),this.stopDragging(t)},m.onSplitLine=function(t){var e=this.getSelected();if(1!==e.length)throw new Error("");if(e[0].type!==f.geojsonTypes.LINE_STRING)throw new Error("");var n=this.getSelectedCoordinates();if(1!==n.length)throw new Error("");var r={type:f.geojsonTypes.FEATURE,properties:{},geometry:{type:f.geojsonTypes.POINT,coordinates:n[0].coordinates}},i=g(e[0].toGeoJSON(),r);if(i&&i.features&&0<i.features.length){for(var o=[],s=[],a=0,u=i.features.length;a<u;a++){var c=i.features[a],l=this.newFeature({type:f.geojsonTypes.FEATURE,properties:e[0].properties,geometry:c.geometry});this.addFeature(l),o.push(l.toGeoJSON()),s.push(l.id)}this.deleteFeature(e[0].id,{silent:!0}),this.map.fire(f.events.REPLACE,{createdFeatures:o,deletedFeatures:[e[0].toGeoJSON()]}),this.changeMode(f.modes.SIMPLE_SELECT,{featureIds:s})}this.fireActionable(t)},e.exports=m},{"../constants":69,"../lib/common_selectors":101,"../lib/constrain_feature_movement":102,"../lib/create_supplementary_points":104,"../lib/double_click_zoom":106,"../lib/features_at":108,"../lib/move_features":116,"@turf/line-split":29}],123:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),a=t("../lib/double_click_zoom"),u=t("../constants"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"arc"===r.feature_type&&r.first&&r.second&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=i?this.newArc({id:i.id,type:u.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:u.geojsonTypes.LINE_STRING,coordinates:i.getCoordinates()}}):this.newArc({type:u.geojsonTypes.FEATURE,properties:{},geometry:{type:u.geojsonTypes.LINE_STRING,coordinates:[]}});return this.preSettingStyle(s,t.style||{}),this.addFeature(s),this.clearSelectedFeatures(),a.disable(this),this.updateUIClasses({mouse:u.cursors.ADD}),this.activateUIButton(u.types.LINE),this.setActionableState({trash:!0}),{initiallyFeatures:o,line:s,direction:"forward",currentVertexPosition:i?2:0}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:u.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:u.cursors.POINTER})},i.onTap=i.onClick=function(t,e){if(r.isVertex(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEnterKey(e)?this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):r.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT))},i.onStop=function(t){a.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(u.events.UPDATE,{action:u.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.line.toGeoJSON()]}):this.map.fire(u.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT,{},{silent:!0})))},i.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT)},i.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.line.id;if(e.properties.active=r?u.activeStates.ACTIVE:u.activeStates.INACTIVE,!r)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=u.meta.FEATURE,n(e))},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/double_click_zoom":106}],124:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),u=t("../lib/double_click_zoom"),c=t("../constants"),a=t("../lib/create_vertex"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"attack_arrow"===r.feature_type&&r.start&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=void 0,a=void 0;return i?(s=this.newAttackArrow({id:i.id,type:c.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:c.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),a=1):(s=this.newAttackArrow({type:c.geojsonTypes.FEATURE,properties:{},geometry:{type:c.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(s,t.style||{}),a=0),this.addFeature(s),this.clearSelectedFeatures(),u.disable(this),this.updateUIClasses({mouse:c.cursors.ADD}),this.activateUIButton(c.types.POLYGON),this.setActionableState({trash:!0}),{polygon:s,currentVertexPosition:a,initiallyFeatures:o}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:c.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:c.cursors.POINTER})},i.onTap=i.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},i.onStop=function(t){this.updateUIClasses({mouse:c.cursors.NONE}),u.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(c.events.UPDATE,{action:c.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(c.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT,{},{silent:!0})))},i.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?c.activeStates.ACTIVE:c.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=c.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),4<i){var o=e.geometry.coordinates[0].length-1;n(a(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:c.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:s,type:c.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},i.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],125:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),l=t("../lib/double_click_zoom"),p=t("../constants"),s=t("../lib/create_vertex"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"circle"===r.feature_type&&r.radius&&r.center?n:null,o=[];if(i){o.push(i.toGeoJSON());var s=this.newCircle({id:i.id,type:p.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:p.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}});this.addFeature(s);var a=this.newFeature({type:p.geojsonTypes.FEATURE,properties:{},geometry:{type:p.geojsonTypes.LINE_STRING,coordinates:[i.properties.center,i.coordinates[0]]}});return this.addFeature(a),this.clearSelectedFeatures(),l.disable(this),this.updateUIClasses({mouse:p.cursors.ADD}),this.setActionableState({trash:!0}),{initiallyFeatures:o,polygon:s,line:a,currentVertexPosition:1}}var u=this.newCircle({type:p.geojsonTypes.FEATURE,properties:{},geometry:{type:p.geojsonTypes.POLYGON,coordinates:[[]]}});this.preSettingStyle(u,t.style||{}),this.addFeature(u);var c=this.newFeature({type:p.geojsonTypes.FEATURE,properties:{},geometry:{type:p.geojsonTypes.LINE_STRING,coordinates:[[]]}});return this.addFeature(c),this.clearSelectedFeatures(),l.disable(this),this.updateUIClasses({mouse:p.cursors.ADD}),this.setActionableState({trash:!0}),{initiallyFeatures:o,polygon:u,line:c,currentVertexPosition:0}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(p.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:p.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,1<=t.currentVertexPosition&&(t.currentVertexPosition=1)},clickOnVertex:function(t){return this.changeMode(p.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){0<t.currentVertexPosition&&(t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)),r.isVertex(e)&&this.updateUIClasses({mouse:p.cursors.POINTER})},i.onTap=i.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.getFeature(t.line.id)&&this.deleteFeature([t.line.id],{silent:!0}),this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(p.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(p.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},i.onStop=function(t){this.updateUIClasses({mouse:p.cursors.NONE}),l.enable(this),this.activateUIButton(),this.getFeature(t.line.id)&&this.deleteFeature([t.line.id],{silent:!0}),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(p.events.UPDATE,{action:p.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(p.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(p.modes.SIMPLE_SELECT,{},{silent:!0})))},i.toDisplayFeatures=function(t,e,n){if(e.properties.id===t.line.id&&e.geometry.type===p.geojsonTypes.LINE_STRING)return e.properties.active=p.activeStates.ACTIVE,0<e.geometry.coordinates.length&&n(s(t.line.id,e.geometry.coordinates[0],"0",!1)),1<e.geometry.coordinates.length&&n(s(t.line.id,e.geometry.coordinates[1],"1",!1)),n(e);var r=e.properties.id===t.polygon.id;if(e.properties.active=r?p.activeStates.ACTIVE:p.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<2)){if(e.properties.meta=p.meta.FEATURE,i<=4){var o=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:p.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:o,type:p.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},i.onTrash=function(t){this.getFeature(t.line.id)&&this.deleteFeature([t.line.id],{silent:!0}),this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(p.modes.SIMPLE_SELECT)},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],126:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),u=t("../lib/double_click_zoom"),c=t("../constants"),i=t("../lib/is_event_at_coordinates"),a=t("../lib/create_vertex"),o={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"curve_polygon"===r.feature_type&&r.start?n:null,o=[];i&&o.push(i.toGeoJSON());var s=void 0,a=void 0;return i?((s=this.newCurvePolygon({id:i.id,type:c.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:c.geojsonTypes.POLYGON,coordinates:[[]]}})).start=i.properties.start,s.initCoordinates=[[i.properties.start]],a=1):(s=this.newCurvePolygon({type:c.geojsonTypes.FEATURE,properties:{},geometry:{type:c.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(s,t.style||{}),a=0),this.addFeature(s),this.clearSelectedFeatures(),u.disable(this),this.updateUIClasses({mouse:c.cursors.ADD}),this.activateUIButton(c.types.POLYGON),this.setActionableState({trash:!0}),{polygon:s,currentVertexPosition:a,initiallyFeatures:o}},clickAnywhere:function(t,e){var n=t.polygon.coordinates?t.polygon.coordinates[0].length-2:0;if(1<t.currentVertexPosition&&i(e,t.polygon.coordinates[0][n]))return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:c.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};o.onTouchMove=o.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:c.cursors.POINTER})},o.onTap=o.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},o.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},o.onStop=function(t){if(this.updateUIClasses({mouse:c.cursors.NONE}),u.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)){if(t.polygon.updateCoordinate2(),t.polygon.coordinates&&t.polygon.coordinates[0]&&3<t.polygon.coordinates[0].length){var e=t.polygon.coordinates[0].length-1;t.polygon.coordinates[0][e-1][0]===t.polygon.coordinates[0][e][0]&&t.polygon.coordinates[0][e-1][1]===t.polygon.coordinates[0][e][1]&&t.polygon.removeCoordinate("0."+e)}t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(c.events.UPDATE,{action:c.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(c.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT,{},{silent:!0}))}},o.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?c.activeStates.ACTIVE:c.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=c.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),3<i){var o=e.geometry.coordinates[0].length-3;n(a(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:c.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:s,type:c.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},o.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)},e.exports=o},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106,"../lib/is_event_at_coordinates":111}],127:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),a=t("../lib/double_click_zoom"),u=t("../constants"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"ellipse"===r.feature_type&&r.first&&r.second&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=i?this.newEllipse({id:i.id,type:u.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:u.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}):this.newEllipse({type:u.geojsonTypes.FEATURE,properties:{},geometry:{type:u.geojsonTypes.POLYGON,coordinates:[[]]}});return this.preSettingStyle(s,t.style||{}),this.addFeature(s),this.clearSelectedFeatures(),a.disable(this),this.updateUIClasses({mouse:u.cursors.ADD}),this.activateUIButton(u.types.POLYGON),this.setActionableState({trash:!0}),{polygon:s,initiallyFeatures:o,currentVertexPosition:i?2:0}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:u.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:u.cursors.POINTER})},i.onTap=i.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},i.onStop=function(t){this.updateUIClasses({mouse:u.cursors.NONE}),a.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(u.events.UPDATE,{action:u.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(u.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT,{},{silent:!0})))},i.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?u.activeStates.ACTIVE:u.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=u.meta.FEATURE,i<=4){var o=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:u.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:o,type:u.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},i.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT)},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/double_click_zoom":106}],128:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../constants"),o={onSetup:function(t){t=t||{};var e={type:i.geojsonTypes.FEATURE,properties:{custom_style:"true",feature_type:"icon"},geometry:{type:i.geojsonTypes.POINT,coordinates:[]}},n=t.style||{};n.iconImage&&(e.properties.iconImage=n.iconImage),n.iconColor&&(e.properties.iconColor=n.iconColor),void 0!==n.iconSize&&(e.properties.iconSize=n.iconSize),void 0!==n.iconRotate&&(e.properties.iconRotate=n.iconRotate);var r=this.newFeature(e);return this.addFeature(r),this.clearSelectedFeatures(),this.updateUIClasses({mouse:i.cursors.ADD}),this.activateUIButton(i.types.POINT),this.setActionableState({trash:!0}),{point:r}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)}};o.onTap=o.onClick=function(t,e){this.updateUIClasses({mouse:i.cursors.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(i.events.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.point.id]})},o.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},o.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.point.id;if(e.properties.active=r?i.activeStates.ACTIVE:i.activeStates.INACTIVE,!r)return n(e)},o.onTrash=o.stopDrawingAndRemove,o.onKeyUp=function(t,e){if(r.isEscapeKey(e)||r.isEnterKey(e))return this.stopDrawingAndRemove(t,e)},e.exports=o},{"../constants":69,"../lib/common_selectors":101}],129:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),c=t("../lib/double_click_zoom"),l=t("../constants"),i=t("../lib/create_vertex"),o={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"line_arrow"===r.feature_type&&r.start&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=void 0,a=void 0;if(i)s=this.newLineArrow({id:i.id,type:l.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:l.geojsonTypes.LINE_STRING,coordinates:i.getCoordinates()}}),a=1,this.addFeature(s);else{s=this.newLineArrow({type:l.geojsonTypes.FEATURE,properties:{},geometry:{type:l.geojsonTypes.LINE_STRING,coordinates:[]}}),this.preSettingStyle(s,t.style||{});var u=t.shape||{};s.properties.shape_start_arrow_type=u.startArrowType||"none",s.properties.shape_end_arrow_type=u.endArrowType||"normal",s.properties.shape_line_type=u.lineType||"solid",a=0,this.addFeature(s)}return this.clearSelectedFeatures(),c.disable(this),this.updateUIClasses({mouse:l.cursors.ADD}),this.activateUIButton(l.types.LINE),this.setActionableState({trash:!0}),{line:s,currentVertexPosition:a,initiallyFeatures:o,direction:"forward"}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(l.modes.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:l.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(l.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})}};o.onTouchMove=o.onMouseMove=function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:l.cursors.POINTER})},o.onTap=o.onClick=function(t,e){if(r.isVertex(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},o.onKeyUp=function(t,e){r.isEnterKey(e)?this.changeMode(l.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):r.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(l.modes.SIMPLE_SELECT))},o.onStop=function(t){c.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(l.events.UPDATE,{action:l.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.line.toGeoJSON()]}):this.map.fire(l.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(l.modes.SIMPLE_SELECT,{},{silent:!0})))},o.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(l.modes.SIMPLE_SELECT)},o.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.line.id;if(e.properties.active=r?l.activeStates.ACTIVE:l.activeStates.INACTIVE,!r)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=l.meta.FEATURE,n(i(t.line.id,e.geometry.coordinates[0],"0",!1)),n(e))},e.exports=o},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],130:[function(t,e,n){"use strict";function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=t("../lib/common_selectors"),o=t("../lib/is_event_at_coordinates"),l=t("../lib/double_click_zoom"),p=t("../constants"),s=t("../lib/create_vertex"),r={onSetup:function(t){var e=(t=t||{}).featureId,n=void 0,r=void 0,i="forward";if(e){if(!(n=this.getFeature(e)))throw new Error("Could not find a feature with the provided featureId");var o=t.from;if(o&&"Feature"===o.type&&o.geometry&&"Point"===o.geometry.type&&(o=o.geometry),o&&"Point"===o.type&&o.coordinates&&2===o.coordinates.length&&(o=o.coordinates),!o||!Array.isArray(o))throw new Error("Please use the `from` property to indicate which point to continue the line from");var s=n.coordinates.length-1;if(n.coordinates[s][0]===o[0]&&n.coordinates[s][1]===o[1]){var a;r=s+1,(a=n).addCoordinate.apply(a,[r].concat(c(n.coordinates[s])))}else{if(n.coordinates[0][0]!==o[0]||n.coordinates[0][1]!==o[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");var u;i="backwards",r=0,(u=n).addCoordinate.apply(u,[r].concat(c(n.coordinates[0])))}}else n=this.newFeature({type:p.geojsonTypes.FEATURE,properties:{},geometry:{type:p.geojsonTypes.LINE_STRING,coordinates:[]}}),this.preSettingStyle(n,t.style||{}),r=0,this.addFeature(n);return this.clearSelectedFeatures(),l.disable(this),this.updateUIClasses({mouse:p.cursors.ADD}),this.activateUIButton(p.types.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:r,direction:i}},clickAnywhere:function(t,e){if(0<t.currentVertexPosition&&o(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&o(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(p.modes.SIMPLE_SELECT,{featureIds:[t.line.id]});var n=this.getAdsorbCoord(t,e,e.featureTargets||[],t.line.id),r=n||[e.lngLat.lng,e.lngLat.lat];this.updateUIClasses({mouse:n?p.cursors.POINTER:p.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,r[0],r[1]),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,r[0],r[1])):t.line.addCoordinate(0,r[0],r[1])},clickOnVertex:function(t){return this.changeMode(p.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})}};r.onTouchMove=r.onMouseMove=function(t,e){var n=this.getAdsorbCoord(t,e,e.featureTargets||[],t.line.id),r=n||[e.lngLat.lng,e.lngLat.lat];t.line.updateCoordinate(t.currentVertexPosition,r[0],r[1]),i.isVertex(e)&&this.updateUIClasses({mouse:p.cursors.POINTER}),n&&this.updateUIClasses({mouse:p.cursors.POINTER})},r.onTap=r.onClick=function(t,e){if(i.isVertex(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},r.onKeyUp=function(t,e){i.isEnterKey(e)?this.changeMode(p.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):i.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(p.modes.SIMPLE_SELECT))},r.onStop=function(t){l.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?this.map.fire(p.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(p.modes.SIMPLE_SELECT,{},{silent:!0})))},r.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(p.modes.SIMPLE_SELECT)},r.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.line.id;if(e.properties.active=r?p.activeStates.ACTIVE:p.activeStates.INACTIVE,!r)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=p.meta.FEATURE,n(s(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],""+("forward"===t.direction?e.geometry.coordinates.length-2:1),!1)),n(e))},e.exports=r},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106,"../lib/is_event_at_coordinates":111}],131:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),u=t("../lib/double_click_zoom"),c=t("../constants"),a=t("../lib/create_vertex"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"offensive_arrow"===r.feature_type&&r.start&&r.middle&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=void 0,a=void 0;return i?(s=this.newOffensiveArrow({id:i.id,type:c.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:c.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),a=2):(s=this.newOffensiveArrow({type:c.geojsonTypes.FEATURE,properties:{},geometry:{type:c.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(s,t.style||{}),a=0),this.addFeature(s),this.clearSelectedFeatures(),u.disable(this),this.updateUIClasses({mouse:c.cursors.ADD}),this.activateUIButton(c.types.POLYGON),this.setActionableState({trash:!0}),{polygon:s,currentVertexPosition:a,initiallyFeatures:o}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:c.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:c.cursors.POINTER})},i.onTap=i.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},i.onStop=function(t){this.updateUIClasses({mouse:c.cursors.NONE}),u.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(c.events.UPDATE,{action:c.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(c.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT,{},{silent:!0})))},i.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?c.activeStates.ACTIVE:c.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=c.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),4<i){var o=e.geometry.coordinates[0].length-1;n(a(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:c.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:s,type:c.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},i.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],132:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),u=t("../lib/double_click_zoom"),c=t("../constants"),a=t("../lib/create_vertex"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"offensive_tail_arrow"===r.feature_type&&r.start&&r.middle&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=void 0,a=void 0;return i?(s=this.newOffensiveTailArrow({id:i.id,type:c.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:c.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),a=2):(s=this.newOffensiveTailArrow({type:c.geojsonTypes.FEATURE,properties:{},geometry:{type:c.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(s,t.style||{}),a=0),this.addFeature(s),this.clearSelectedFeatures(),u.disable(this),this.updateUIClasses({mouse:c.cursors.ADD}),this.activateUIButton(c.types.POLYGON),this.setActionableState({trash:!0}),{polygon:s,currentVertexPosition:a,initiallyFeatures:o}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:c.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:c.cursors.POINTER})},i.onTap=i.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},i.onStop=function(t){this.updateUIClasses({mouse:c.cursors.NONE}),u.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(c.events.UPDATE,{action:c.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(c.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT,{},{silent:!0})))},i.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?c.activeStates.ACTIVE:c.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=c.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),4<i){var o=e.geometry.coordinates[0].length-1;n(a(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:c.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:s,type:c.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},i.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],133:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),u=t("../lib/double_click_zoom"),c=t("../constants"),a=t("../lib/create_vertex"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"pincer_attack_arrow"===r.feature_type&&r.start&&r.middle&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=void 0,a=void 0;return i?(s=this.newPincerAttackArrow({id:i.id,type:c.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:c.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),a=2):(s=this.newPincerAttackArrow({type:c.geojsonTypes.FEATURE,properties:{},geometry:{type:c.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(s,t.style||{}),a=0),this.addFeature(s),this.clearSelectedFeatures(),u.disable(this),this.updateUIClasses({mouse:c.cursors.ADD}),this.activateUIButton(c.types.POLYGON),this.setActionableState({trash:!0}),{polygon:s,currentVertexPosition:a,initiallyFeatures:o}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:c.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:c.cursors.POINTER})},i.onTap=i.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},i.onStop=function(t){this.updateUIClasses({mouse:c.cursors.NONE}),u.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(c.events.UPDATE,{action:c.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(c.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT,{},{silent:!0})))},i.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?c.activeStates.ACTIVE:c.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=c.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),4<i){var o=e.geometry.coordinates[0].length-1;n(a(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:c.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:s,type:c.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},i.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],134:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../constants"),o={onSetup:function(t){t=t||{};var e=this.newFeature({type:i.geojsonTypes.FEATURE,properties:{},geometry:{type:i.geojsonTypes.POINT,coordinates:[]}});return this.preSettingStyle(e,t.style||{}),this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:i.cursors.ADD}),this.activateUIButton(i.types.POINT),this.setActionableState({trash:!0}),{point:e}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)}};o.onTap=o.onClick=function(t,e){this.updateUIClasses({mouse:i.cursors.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(i.events.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.point.id]})},o.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},o.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.point.id;if(e.properties.active=r?i.activeStates.ACTIVE:i.activeStates.INACTIVE,!r)return n(e)},o.onTrash=o.stopDrawingAndRemove,o.onKeyUp=function(t,e){if(r.isEscapeKey(e)||r.isEnterKey(e))return this.stopDrawingAndRemove(t,e)},e.exports=o},{"../constants":69,"../lib/common_selectors":101}],135:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=t("../lib/double_click_zoom"),a=t("../constants"),o=t("../lib/is_event_at_coordinates"),u=t("../lib/create_vertex"),s={onSetup:function(t){t=t||{};var e=this.newFeature({type:a.geojsonTypes.FEATURE,properties:{},geometry:{type:a.geojsonTypes.POLYGON,coordinates:[[]]}});return this.preSettingStyle(e,t.style||{}),this.addFeature(e),this.clearSelectedFeatures(),r.disable(this),this.updateUIClasses({mouse:a.cursors.ADD}),this.activateUIButton(a.types.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(t,e){if(0<t.currentVertexPosition&&o(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(a.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});var n=this.getAdsorbCoord(t,e,e.featureTargets||[],t.polygon.id),r=n||[e.lngLat.lng,e.lngLat.lat];this.updateUIClasses({mouse:n?a.cursors.POINTER:a.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,r[0],r[1]),t.currentVertexPosition++,t.polygon.updateCoordinate("0."+t.currentVertexPosition,r[0],r[1])},clickOnVertex:function(t){return this.changeMode(a.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};s.onTouchMove=s.onMouseMove=function(t,e){var n=this.getAdsorbCoord(t,e,e.featureTargets||[],t.polygon.id),r=n||[e.lngLat.lng,e.lngLat.lat];t.polygon.updateCoordinate("0."+t.currentVertexPosition,r[0],r[1]),i.isVertex(e)&&this.updateUIClasses({mouse:a.cursors.POINTER}),n&&this.updateUIClasses({mouse:a.cursors.POINTER})},s.onTap=s.onClick=function(t,e){return i.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},s.onKeyUp=function(t,e){i.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(a.modes.SIMPLE_SELECT)):i.isEnterKey(e)&&this.changeMode(a.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},s.onStop=function(t){this.updateUIClasses({mouse:a.cursors.NONE}),r.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate("0."+t.currentVertexPosition),t.polygon.isValid()?this.map.fire(a.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(a.modes.SIMPLE_SELECT,{},{silent:!0})))},s.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?a.activeStates.ACTIVE:a.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=a.meta.FEATURE,n(u(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),3<i){var o=e.geometry.coordinates[0].length-3;n(u(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:a.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:s,type:a.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},s.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(a.modes.SIMPLE_SELECT)},e.exports=s},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106,"../lib/is_event_at_coordinates":111}],136:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),a=t("../lib/double_click_zoom"),u=t("../constants"),c=t("../lib/create_vertex"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"rectangle"===r.feature_type&&r.start&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=i?this.newRectangle({id:i.id,type:u.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:u.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}):this.newRectangle({type:u.geojsonTypes.FEATURE,properties:{},geometry:{type:u.geojsonTypes.POLYGON,coordinates:[[]]}});return this.preSettingStyle(s,t.style||{}),this.addFeature(s),this.clearSelectedFeatures(),a.disable(this),this.updateUIClasses({mouse:u.cursors.ADD}),this.activateUIButton(u.types.POLYGON),this.setActionableState({trash:!0}),{initiallyFeatures:o,polygon:s,currentVertexPosition:i?1:0}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:u.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,1<=t.currentVertexPosition&&(t.currentVertexPosition=1)},clickOnVertex:function(t){return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:u.cursors.POINTER})},i.onTap=i.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},i.onStop=function(t){this.updateUIClasses({mouse:u.cursors.NONE}),a.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(u.events.UPDATE,{action:u.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(u.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT,{},{silent:!0})))},i.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?u.activeStates.ACTIVE:u.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=u.meta.FEATURE,n(c(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),3<i){var o=e.geometry.coordinates[0].length-3;n(c(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:u.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:s,type:u.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},i.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT)},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],137:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),a=t("../lib/double_click_zoom"),u=t("../constants"),c=t("../lib/create_vertex"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"sector"===r.feature_type&&r.center&&r.start&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=i?this.newSector({id:i.id,type:u.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:u.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}):this.newSector({type:u.geojsonTypes.FEATURE,properties:{},geometry:{type:u.geojsonTypes.POLYGON,coordinates:[[]]}});return this.preSettingStyle(s,t.style||{}),this.addFeature(s),this.clearSelectedFeatures(),a.disable(this),this.updateUIClasses({mouse:u.cursors.ADD}),this.activateUIButton(u.types.POLYGON),this.setActionableState({trash:!0}),{initiallyFeatures:o,polygon:s,currentVertexPosition:i?2:0}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:u.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:u.cursors.POINTER})},i.onTap=i.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},i.onStop=function(t){this.updateUIClasses({mouse:u.cursors.NONE}),a.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(u.events.UPDATE,{action:u.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(u.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT,{},{silent:!0})))},i.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?u.activeStates.ACTIVE:u.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=u.meta.FEATURE,n(c(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),4<i){var o=e.geometry.coordinates[0].length-1;n(c(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:u.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:s,type:u.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},i.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT)},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],138:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),u=t("../lib/double_click_zoom"),c=t("../constants"),a=t("../lib/create_vertex"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"thin_straight_arrow"===r.feature_type&&r.start&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=void 0,a=void 0;return i?(s=this.newThinStraightArrow({id:i.id,type:c.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:c.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),a=1):(s=this.newThinStraightArrow({type:c.geojsonTypes.FEATURE,properties:{},geometry:{type:c.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(s,t.style||{}),a=0),this.addFeature(s),this.clearSelectedFeatures(),u.disable(this),this.updateUIClasses({mouse:c.cursors.ADD}),this.activateUIButton(c.types.POLYGON),this.setActionableState({trash:!0}),{polygon:s,currentVertexPosition:a,initiallyFeatures:o}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:c.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:c.cursors.POINTER})},i.onTap=i.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},i.onStop=function(t){this.updateUIClasses({mouse:c.cursors.NONE}),u.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(c.events.UPDATE,{action:c.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(c.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT,{},{silent:!0})))},i.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?c.activeStates.ACTIVE:c.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=c.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),4<i){var o=e.geometry.coordinates[0].length-1;n(a(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:c.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:s,type:c.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},i.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],139:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),u=t("../lib/double_click_zoom"),c=t("../constants"),a=t("../lib/create_vertex"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"thin_tail_arrow"===r.feature_type&&r.start&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=void 0,a=void 0;return i?(s=this.newThinTailArrow({id:i.id,type:c.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:c.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}),a=1):(s=this.newThinTailArrow({type:c.geojsonTypes.FEATURE,properties:{},geometry:{type:c.geojsonTypes.POLYGON,coordinates:[[]]}}),this.preSettingStyle(s,t.style||{}),a=0),this.addFeature(s),this.clearSelectedFeatures(),u.disable(this),this.updateUIClasses({mouse:c.cursors.ADD}),this.activateUIButton(c.types.POLYGON),this.setActionableState({trash:!0}),{polygon:s,currentVertexPosition:a,initiallyFeatures:o}},clickAnywhere:function(t,e){if(1<=t.currentVertexPosition)return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:c.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:c.cursors.POINTER})},i.onTap=i.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},i.onStop=function(t){this.updateUIClasses({mouse:c.cursors.NONE}),u.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(c.events.UPDATE,{action:c.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(c.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT,{},{silent:!0})))},i.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?c.activeStates.ACTIVE:c.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=c.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),4<i){var o=e.geometry.coordinates[0].length-1;n(a(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:c.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:s,type:c.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},i.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(c.modes.SIMPLE_SELECT)},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],140:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),a=t("../lib/double_click_zoom"),u=t("../constants"),c=t("../lib/create_vertex"),i={onSetup:function(t){t=t||{};var e=this.getSelectedIds(),n=1===e.length?this.getFeature(e[0]):null,r=n&&n.properties?n.properties:{},i=n&&"triangle"===r.feature_type&&r.start&&r.middle&&r.end?n:null,o=[];i&&o.push(i.toGeoJSON());var s=i?this.newTriangle({id:i.id,type:u.geojsonTypes.FEATURE,properties:i.properties,geometry:{type:u.geojsonTypes.POLYGON,coordinates:i.getCoordinates()}}):this.newTriangle({type:u.geojsonTypes.FEATURE,properties:{},geometry:{type:u.geojsonTypes.POLYGON,coordinates:[[]]}});return this.preSettingStyle(s,t.style||{}),this.addFeature(s),this.clearSelectedFeatures(),a.disable(this),this.updateUIClasses({mouse:u.cursors.ADD}),this.activateUIButton(u.types.POLYGON),this.setActionableState({trash:!0}),{initiallyFeatures:o,polygon:s,currentVertexPosition:i?2:0}},clickAnywhere:function(t,e){if(1<t.currentVertexPosition)return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:u.cursors.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++},clickOnVertex:function(t){return this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})}};i.onTouchMove=i.onMouseMove=function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:u.cursors.POINTER})},i.onTap=i.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},i.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},i.onStop=function(t){this.updateUIClasses({mouse:u.cursors.NONE}),a.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.isValid()?t.initiallyFeatures&&0<t.initiallyFeatures.length?this.map.fire(u.events.UPDATE,{action:u.updateActions.CHANGE_COORDINATES,prevFeatures:t.initiallyFeatures,features:[t.polygon.toGeoJSON()]}):this.map.fire(u.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT,{},{silent:!0})))},i.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?u.activeStates.ACTIVE:u.activeStates.INACTIVE,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=u.meta.FEATURE,n(c(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),3<i){var o=e.geometry.coordinates[0].length-3;n(c(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:u.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:s,type:u.geojsonTypes.LINE_STRING}}),3===i)return}return n(e)}}},i.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(u.modes.SIMPLE_SELECT)},e.exports=i},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],141:[function(t,e,n){"use strict";var r=t("../lib/common_selectors"),i=t("../lib/double_click_zoom"),o=t("../constants"),s=t("../lib/create_vertex"),a={onSetup:function(t){t=t||{};var e=this.newFeature({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.LINE_STRING,coordinates:[]}});return this.preSettingStyle(e,t.style||{}),this.addFeature(e),this.clearSelectedFeatures(),i.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.LINE),this.setActionableState({trash:!0}),{line:e,currentVertexPosition:0,direction:"forward",startDrawing:!1}}};a.onTouchStart=a.onMouseDown=function(t,e){t.startDrawing=!0,this.map.dragPan.disable()},a.onDrag=function(t,e){this.onDrawing(t,e)},a.onMouseUp=function(t,e){t.startDrawing=!1,this.map.dragPan.enable(),this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})},a.clickAnywhere=function(t,e){this.updateUIClasses({mouse:o.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},a.onDrawing=function(t,e){t.startDrawing&&this.clickAnywhere(t,e)},a.onKeyUp=function(t,e){r.isEnterKey(e)?this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):r.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT))},a.onStop=function(t){i.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?this.map.fire(o.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT,{},{silent:!0})))},a.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)},a.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.line.id;if(e.properties.active=r?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!r)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=o.meta.FEATURE,n(s(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],""+("forward"===t.direction?e.geometry.coordinates.length-2:1),!1)),n(e))},e.exports=a},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106}],142:[function(n,t,e){"use strict";t.exports=["static","simple_select","direct_select","draw_icon","draw_point","draw_polygon","draw_line_string","draw_circle","draw_rectangle","draw_triangle","draw_sector","draw_ellipse","draw_arc","split_polygon","free_drawing","draw_line_arrow","draw_thin_straight_arrow","draw_thin_tail_arrow","draw_attack_arrow","draw_offensive_arrow","draw_offensive_tail_arrow","draw_pincer_attack_arrow","draw_curve_polygon"].reduce(function(t,e){return t[e]=n("./"+e),t},{}),t.exports={static:n("./static"),simple_select:n("./simple_select"),direct_select:n("./direct_select"),draw_icon:n("./draw_icon"),draw_point:n("./draw_point"),draw_polygon:n("./draw_polygon"),draw_line_string:n("./draw_line_string"),draw_circle:n("./draw_circle"),draw_rectangle:n("./draw_rectangle"),draw_triangle:n("./draw_triangle"),draw_sector:n("./draw_sector"),draw_ellipse:n("./draw_ellipse"),draw_arc:n("./draw_arc"),split_polygon:n("./split_polygon"),free_drawing:n("./free_drawing"),draw_line_arrow:n("./draw_line_arrow"),draw_thin_straight_arrow:n("./draw_thin_straight_arrow"),draw_thin_tail_arrow:n("./draw_thin_tail_arrow"),draw_attack_arrow:n("./draw_attack_arrow"),draw_offensive_arrow:n("./draw_offensive_arrow"),draw_offensive_tail_arrow:n("./draw_offensive_tail_arrow"),draw_pincer_attack_arrow:n("./draw_pincer_attack_arrow"),draw_curve_polygon:n("./draw_curve_polygon")}},{"./direct_select":122,"./draw_arc":123,"./draw_attack_arrow":124,"./draw_circle":125,"./draw_curve_polygon":126,"./draw_ellipse":127,"./draw_icon":128,"./draw_line_arrow":129,"./draw_line_string":130,"./draw_offensive_arrow":131,"./draw_offensive_tail_arrow":132,"./draw_pincer_attack_arrow":133,"./draw_point":134,"./draw_polygon":135,"./draw_rectangle":136,"./draw_sector":137,"./draw_thin_straight_arrow":138,"./draw_thin_tail_arrow":139,"./draw_triangle":140,"./free_drawing":141,"./simple_select":146,"./split_polygon":147,"./static":148}],143:[function(t,e,n){"use strict";var r=e.exports=t("./mode_interface_accessors");r.prototype.onSetup=function(){},r.prototype.onDrag=function(){},r.prototype.onClick=function(){},r.prototype.onMouseMove=function(){},r.prototype.onMouseDown=function(){},r.prototype.onMouseUp=function(){},r.prototype.onMouseOut=function(){},r.prototype.onKeyUp=function(){},r.prototype.onKeyDown=function(){},r.prototype.onTouchStart=function(){},r.prototype.onTouchMove=function(){},r.prototype.onTouchEnd=function(){},r.prototype.onTap=function(){},r.prototype.onStop=function(){},r.prototype.onTrash=function(){},r.prototype.onCombineFeature=function(){},r.prototype.onUncombineFeature=function(){},r.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")}},{"./mode_interface_accessors":144}],144:[function(t,e,n){"use strict";var l=t("../constants"),r=t("../lib/features_at"),i=t("../feature_types/point"),o=t("../feature_types/line_string"),s=t("../feature_types/polygon"),a=t("../feature_types/multi_feature"),u=t("../feature_types/circle"),c=t("../feature_types/rectangle"),p=t("../feature_types/triangle"),h=t("../feature_types/sector"),f=t("../feature_types/ellipse"),d=t("../feature_types/arc"),g=t("../feature_types/line_arrow"),y=t("../feature_types/thin_straight_arrow"),_=t("../feature_types/thin_tail_arrow"),m=t("../feature_types/attack_arrow"),v=t("../feature_types/offensive_arrow"),E=t("../feature_types/offensive_tail_arrow"),I=t("../feature_types/pincer_attack_arrow"),x=t("../feature_types/curve_polygon"),b=t("@turf/helpers").point,C=t("@turf/distance").default,w=t("@turf/polygon-to-line").default,S=t("@turf/nearest-point-on-line").default,N=e.exports=function(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t};N.prototype.setSelected=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._ctx.store.setSelected(t,e)},N.prototype.setSelectedCoordinates=function(t){var n=this;this._ctx.store.setSelectedCoordinates(t),t.reduce(function(t,e){return void 0===t[e.feature_id]&&(t[e.feature_id]=!0,n._ctx.store.get(e.feature_id).changed()),t},{})},N.prototype.getSelectedCoordinates=function(){return this._ctx.store.getSelectedCoordinates()},N.prototype.getSelected=function(){return this._ctx.store.getSelected()},N.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},N.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},N.prototype.getFeature=function(t){return this._ctx.store.get(t)},N.prototype.select=function(t){return this._ctx.store.select(t)},N.prototype.deselect=function(t){return this._ctx.store.deselect(t)},N.prototype.deleteFeature=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._ctx.store.delete(t,e)},N.prototype.addFeature=function(t){return this._ctx.store.add(t)},N.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},N.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},N.prototype.setActionableState=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(e)},N.prototype.changeMode=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this._ctx.events.changeMode(t,e,n)},N.prototype.preSettingStyle=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return 0<Object.keys(n).length&&(e.properties.custom_style="true",Object.keys(n).forEach(function(t){e.properties[t]=n[t]})),e},N.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},N.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},N.prototype.featuresAt=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"click";if("click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return r[n](t,e,this._ctx)},N.prototype.getAdsorbCoord=function(t,e,n,r){if(!this._ctx.options.adsorbEnabled)return null;if(0===n.length||!r)return null;var i=n.filter(function(t){return t.properties.id&&t.properties.id!==r||t.properties.parent&&t.properties.parent!==r});if(0===i.length)return null;var o=null;[l.geojsonTypes.POLYGON,l.geojsonTypes.MULTI_POLYGON].includes(i[0].geometry.type)?o=w(i[0]):[l.geojsonTypes.LINE_STRING,l.geojsonTypes.MULTI_LINE_STRING].includes(i[0].geometry.type)&&(o=i[0]);var s=o?S(o,b([e.lngLat.lng,e.lngLat.lat]),{units:"miles"}):null;if(e.point&&s&&[l.geojsonTypes.POLYGON,l.geojsonTypes.MULTI_POLYGON].includes(i[0].geometry.type)){var a=this.map.unproject([e.point.x,e.point.y]),u=this.map.unproject([e.point.x+this._ctx.options.clickBuffer+3,e.point.y+this._ctx.options.clickBuffer+3]),c=C(b([a.lng,a.lat]),b([u.lng,u.lat]),{units:"miles"});if(s.properties.dist>c)return null}return s?s.geometry.coordinates:null},N.prototype.newFeature=function(t){var e=t.geometry.type;return e===l.geojsonTypes.POINT?new i(this._ctx,t):e===l.geojsonTypes.LINE_STRING?new o(this._ctx,t):e===l.geojsonTypes.POLYGON?new s(this._ctx,t):new a(this._ctx,t)},N.prototype.newCircle=function(t){return new u(this._ctx,t)},N.prototype.newRectangle=function(t){return new c(this._ctx,t)},N.prototype.newTriangle=function(t){return new p(this._ctx,t)},N.prototype.newSector=function(t){return new h(this._ctx,t)},N.prototype.newEllipse=function(t){return new f(this._ctx,t)},N.prototype.newArc=function(t){return new d(this._ctx,t)},N.prototype.newLineArrow=function(t){return new g(this._ctx,t)},N.prototype.newThinStraightArrow=function(t){return new y(this._ctx,t)},N.prototype.newThinTailArrow=function(t){return new _(this._ctx,t)},N.prototype.newAttackArrow=function(t){return new m(this._ctx,t)},N.prototype.newOffensiveArrow=function(t){return new v(this._ctx,t)},N.prototype.newOffensiveTailArrow=function(t){return new E(this._ctx,t)},N.prototype.newPincerAttackArrow=function(t){return new I(this._ctx,t)},N.prototype.newCurvePolygon=function(t){return new x(this._ctx,t)},N.prototype.isInstanceOf=function(t,e){if(t===l.geojsonTypes.POINT)return e instanceof i;if(t===l.geojsonTypes.LINE_STRING)return e instanceof o;if(t===l.geojsonTypes.POLYGON)return e instanceof s;if("MultiFeature"===t)return e instanceof a;throw new Error("Unknown feature class: "+t)},N.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)}},{"../constants":69,"../feature_types/arc":80,"../feature_types/attack_arrow":81,"../feature_types/circle":82,"../feature_types/curve_polygon":83,"../feature_types/ellipse":84,"../feature_types/line_arrow":86,"../feature_types/line_string":87,"../feature_types/multi_feature":88,"../feature_types/offensive_arrow":89,"../feature_types/offensive_tail_arrow":90,"../feature_types/pincer_attack_arrow":91,"../feature_types/point":92,"../feature_types/polygon":93,"../feature_types/rectangle":94,"../feature_types/sector":95,"../feature_types/thin_straight_arrow":96,"../feature_types/thin_tail_arrow":97,"../feature_types/triangle":98,"../lib/features_at":108,"@turf/distance":20,"@turf/helpers":21,"@turf/nearest-point-on-line":32,"@turf/polygon-to-line":33}],145:[function(t,e,n){"use strict";var a=t("./mode_interface");e.exports=function(o){var s=Object.keys(o);return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={},r=s.reduce(function(t,e){return t[e]=o[e],t},new a(t));function i(e){return function(t){r[e](n,t)}}return{start:function(){n=r.onSetup(e),this.on("drag",function(){return!0},i("onDrag")),this.on("click",function(){return!0},i("onClick")),this.on("mousemove",function(){return!0},i("onMouseMove")),this.on("mousedown",function(){return!0},i("onMouseDown")),this.on("mouseup",function(){return!0},i("onMouseUp")),this.on("mouseout",function(){return!0},i("onMouseOut")),this.on("keyup",function(){return!0},i("onKeyUp")),this.on("keydown",function(){return!0},i("onKeyDown")),this.on("touchstart",function(){return!0},i("onTouchStart")),this.on("touchmove",function(){return!0},i("onTouchMove")),this.on("touchend",function(){return!0},i("onTouchEnd")),this.on("tap",function(){return!0},i("onTap"))},stop:function(){r.onStop(n)},trash:function(){r.onTrash(n)},combineFeatures:function(){r.onCombineFeatures(n)},uncombineFeatures:function(){r.onUncombineFeatures(n)},unionPolygon:function(){r.onUnionPolygon(n)},unionLine:function(){r.onUnionLine(n)},curveLine:function(){r.onCurveLine(n)},splitLine:function(){r.onSplitLine(n)},render:function(t,e){r.toDisplayFeatures(n,t,e)}}}}},{"./mode_interface":143}],146:[function(t,e,n){"use strict";var r=t("xtend"),c=t("../lib/common_selectors"),u=t("../lib/mouse_event_point"),i=t("../lib/create_supplementary_points"),o=t("../lib/string_set"),l=t("../lib/double_click_zoom"),s=t("../lib/move_features"),S=t("../constants"),N=t("@turf/intersect").default,T=t("@turf/line-intersect").default,L=t("@turf/union").default,O=t("@turf/polygon-to-line").default,M=t("@turf/line-to-polygon").default,a=t("@turf/bezier-spline").default,y=t("../edit/util/is_same_point"),p={onSetup:function(t){var e=this,n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[],initiallySelectedFeatures:[]};return this.setSelected(n.initiallySelectedFeatureIds.filter(function(t){return void 0!==e.getFeature(t)})),n.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()}),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(t){this.map.fire(S.events.UPDATE,{action:S.updateActions.MOVE,prevFeatures:t.initiallySelectedFeatures,features:this.getSelected().map(function(t){return t.toGeoJSON()})}),t.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()})},fireActionable:function(){var e=this,t=this.getSelected(),n=t.filter(function(t){return e.isInstanceOf("MultiFeature",t)}),r=!1;if(1<t.length){r=!0;var i=t[0].type.replace("Multi","");t.forEach(function(t){t.type.replace("Multi","")!==i&&(r=!1)})}var o=0<n.length,s=0<t.length;this.setActionableState({combineFeatures:r,uncombineFeatures:o,trash:s})},getUniqueIds:function(t){return t.length?t.map(function(t){return t.properties.id}).filter(function(t){return void 0!==t}).reduce(function(t,e){return t.add(e),t},new o).values():[]},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){l.enable(this)},onMouseUp:function(t,e){if(c.true(e))return this.stopExtendedInteractions(t)},onMouseMove:function(t){return this.stopExtendedInteractions(t)},onMouseOut:function(t){if(t.dragMoving)return this.fireUpdate(t)}};p.onTap=p.onClick=function(t,e){return c.noTarget(e)?this.clickAnywhere(t,e):c.isOfMetaType(S.meta.VERTEX)(e)?this.clickOnVertex(t,e):c.isFeature(e)?this.clickOnFeature(t,e):void 0},p.clickAnywhere=function(t){var e=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach(function(t){return e.doRender(t)})),l.enable(this),this.stopExtendedInteractions(t)},p.clickOnVertex=function(t,e){var n=this.getSelectedIds(),r=1===n.length?this.getFeature(n[0]):null,i=r&&r.properties?r.properties:{};if(r&&"circle"===i.feature_type&&i.radius&&i.center)return this.changeMode(S.modes.DRAW_CIRCLE);if(r&&"triangle"===i.feature_type&&i.start&&i.middle&&i.end)return this.changeMode(S.modes.DRAW_TRIANGLE);if(r&&"rectangle"===i.feature_type&&i.start&&i.end)return this.changeMode(S.modes.DRAW_RECTANGLE);if(r&&"sector"===i.feature_type&&i.center&&i.start&&i.end)return this.changeMode(S.modes.DRAW_SECTOR);if(r&&"ellipse"===i.feature_type&&i.first&&i.second&&i.end)return this.changeMode(S.modes.DRAW_ELLIPSE);if(r&&"arc"===i.feature_type&&i.first&&i.second&&i.end)return this.changeMode(S.modes.DRAW_ARC);if(r&&"line_arrow"===i.feature_type&&i.start&&i.end)return this.changeMode(S.modes.DRAW_LINE_ARROW);if(r&&"thin_straight_arrow"===i.feature_type&&i.start&&i.end)return this.changeMode(S.modes.DRAW_THIN_STRAIGHT_ARROW);if(r&&"thin_tail_arrow"===i.feature_type&&i.start&&i.end)return this.changeMode(S.modes.DRAW_THIN_TAIL_ARROW);if(r&&"attack_arrow"===i.feature_type&&i.start&&i.end)return this.changeMode(S.modes.DRAW_ATTACK_ARROW);if(r&&"offensive_arrow"===i.feature_type&&i.start&&i.middle&&i.end)return this.changeMode(S.modes.DRAW_OFFENSIVE_ARROW);if(r&&"offensive_tail_arrow"===i.feature_type&&i.start&&i.middle&&i.end)return this.changeMode(S.modes.DRAW_OFFENSIVE_TAIL_ARROW);if(r&&"pincer_attack_arrow"===i.feature_type&&i.start&&i.middle&&i.end){var o=r.getCoordinate(e.featureTarget.properties.coord_path);if(o&&i.arrow1&&o[0]===i.arrow1[0]&&o[1]===i.arrow1[1]);else if(!o||!i.arrow2||o[0]!==i.arrow2[0]||o[1]!==i.arrow2[1])return this.changeMode(S.modes.DRAW_PINCER_ATTACK_ARROW)}this.changeMode(S.modes.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:S.cursors.MOVE})},p.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat,t.initiallySelectedFeatures=this.getSelected().map(function(t){return t.toGeoJSON()})},p.clickOnFeature=function(t,e){var n=this;l.disable(this),this.stopExtendedInteractions(t);var r=c.isShiftDown(e),i=this.getSelectedIds(),o=e.featureTarget.properties.id,s=this.isSelected(o);if(!r&&s&&this.getFeature(o).type!==S.geojsonTypes.POINT){var a=1===i.length?this.getFeature(i[0]):null,u=a&&a.properties?a.properties:{};return a&&"circle"===u.feature_type&&u.radius&&u.center?this.changeMode(S.modes.DRAW_CIRCLE):a&&"triangle"===u.feature_type&&u.start&&u.middle&&u.end?this.changeMode(S.modes.DRAW_TRIANGLE):a&&"rectangle"===u.feature_type&&u.start&&u.end?this.changeMode(S.modes.DRAW_RECTANGLE):a&&"sector"===u.feature_type&&u.center&&u.start&&u.end?this.changeMode(S.modes.DRAW_SECTOR):a&&"ellipse"===u.feature_type&&u.first&&u.second&&u.end?this.changeMode(S.modes.DRAW_ELLIPSE):a&&"arc"===u.feature_type&&u.first&&u.second&&u.end?this.changeMode(S.modes.DRAW_ARC):a&&"line_arrow"===u.feature_type&&u.start&&u.end?this.changeMode(S.modes.DRAW_LINE_ARROW):a&&"thin_straight_arrow"===u.feature_type&&u.start&&u.end?this.changeMode(S.modes.DRAW_THIN_STRAIGHT_ARROW):a&&"thin_tail_arrow"===u.feature_type&&u.start&&u.end?this.changeMode(S.modes.DRAW_THIN_TAIL_ARROW):a&&"attack_arrow"===u.feature_type&&u.start&&u.end?this.changeMode(S.modes.DRAW_ATTACK_ARROW):a&&"offensive_arrow"===u.feature_type&&u.start&&u.middle&&u.end?this.changeMode(S.modes.DRAW_OFFENSIVE_ARROW):a&&"offensive_tail_arrow"===u.feature_type&&u.start&&u.middle&&u.end?this.changeMode(S.modes.DRAW_OFFENSIVE_TAIL_ARROW):a&&"pincer_attack_arrow"===u.feature_type&&u.start&&u.middle&&u.end?this.changeMode(S.modes.DRAW_PINCER_ATTACK_ARROW):this.changeMode(S.modes.DIRECT_SELECT,{featureId:o})}s&&r?(this.deselect(o),this.updateUIClasses({mouse:S.cursors.POINTER}),1===i.length&&l.enable(this)):!s&&r?(this.select(o),this.updateUIClasses({mouse:S.cursors.MOVE})):s||r||(i.forEach(function(t){return n.doRender(t)}),this.setSelected(o),this.updateUIClasses({mouse:S.cursors.MOVE})),this.map.fire(S.events.SELECTED,{featureIds:this.getSelectedIds()}),this.doRender(o)},p.onMouseDown=function(t,e){return c.isActiveFeature(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&c.isShiftMousedown(e)?this.startBoxSelect(t,e):void 0},p.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=u(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},p.onTouchStart=function(t,e){if(c.isActiveFeature(e))return this.startOnActiveFeature(t,e)},p.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},p.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:S.cursors.ADD}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(S.classes.BOX_SELECT),this.map.getContainer().appendChild(t.boxSelectElement));var n=u(e.originalEvent,this.map.getContainer()),r=Math.min(t.boxSelectStartLocation.x,n.x),i=Math.max(t.boxSelectStartLocation.x,n.x),o=Math.min(t.boxSelectStartLocation.y,n.y),s=Math.max(t.boxSelectStartLocation.y,n.y),a="translate("+r+"px, "+o+"px)";t.boxSelectElement.style.transform=a,t.boxSelectElement.style.WebkitTransform=a,t.boxSelectElement.style.width=i-r+"px",t.boxSelectElement.style.height=s-o+"px"},p.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};s(this.getSelected(),n),t.dragMoveLocation=e.lngLat},p.onMouseUp=function(t,e){var n=this;if(t.dragMoving)this.fireUpdate(t);else if(t.boxSelecting){var r=[t.boxSelectStartLocation,u(e.originalEvent,this.map.getContainer())],i=this.featuresAt(null,r,"click"),o=this.getUniqueIds(i).filter(function(t){return!n.isSelected(t)});o.length&&(this.select(o),o.forEach(function(t){return n.doRender(t)}),this.updateUIClasses({mouse:S.cursors.MOVE})),this.map.fire(S.events.SELECTED,{featureIds:this.getSelectedIds()})}this.stopExtendedInteractions(t)},p.toDisplayFeatures=function(t,e,n){e.properties.active=this.isSelected(e.properties.id)?S.activeStates.ACTIVE:S.activeStates.INACTIVE,n(e),this.fireActionable(),e.properties.active===S.activeStates.ACTIVE&&e.geometry.type!==S.geojsonTypes.POINT&&i(e).forEach(n)},p.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},p.onCombineFeatures=function(){var t=this.getSelected();if(!(0===t.length||t.length<2)){for(var e=[],n=[],r=t[0].type.replace("Multi",""),i=0;i<t.length;i++){var o=t[i];if(o.type.replace("Multi","")!==r)return;o.type.includes("Multi")?o.getCoordinates().forEach(function(t){e.push(t)}):e.push(o.getCoordinates()),n.push(o.toGeoJSON())}if(1<n.length){var s=this.newFeature({type:S.geojsonTypes.FEATURE,properties:n[0].properties,geometry:{type:"Multi"+r,coordinates:e}});this.addFeature(s),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([s.id]),this.map.fire(S.events.COMBINE_FEATURES,{createdFeatures:[s.toGeoJSON()],deletedFeatures:n})}this.fireActionable()}},p.onUncombineFeatures=function(){var n=this,r=this.getSelected();if(0!==r.length){for(var i=[],o=[],t=function(t){var e=r[t];n.isInstanceOf("MultiFeature",e)&&(e.getFeatures().forEach(function(t){n.addFeature(t),t.properties=e.properties,i.push(t.toGeoJSON()),n.select([t.id])}),n.deleteFeature(e.id,{silent:!0}),o.push(e.toGeoJSON()))},e=0;e<r.length;e++)t(e);1<i.length&&this.map.fire(S.events.UNCOMBINE_FEATURES,{createdFeatures:i,deletedFeatures:o}),this.fireActionable()}},p.onUnionPolygon=function(){var t=this.getSelected();if(2!==t.length)throw new Error("");for(var e=0;e<t.length;e++){if(t[e].type!==S.geojsonTypes.POLYGON)throw new Error("")}var n=null,r=t[0].toGeoJSON(),i=t[1].toGeoJSON();try{(n=N(r,i))||(n=T(r,i))}catch(t){n=T(r,i)}if(!n)throw new Error("");var h=function(t,e){if(0===e.length)return!0;var n=e[e.length-1];return t[0]!==n[0]||t[1]!==n[1]},o=function(t,e){var n=O(t),r=O(e),i=n.geometry.coordinates,o=r.geometry.coordinates,s=[];i.map(function(e,t){return o.some(function(t){return e[0]===t[0]&&e[1]===t[1]})&&s.push(t),null});for(var a=!1,u=0,c=0,l=0;l<s.length-1;l++)1!==Math.abs(s[l+1]-s[l])&&(a=!0,u=s[l],(c=s[l+1])<u&&(u=s[l+1],c=s[l]));a||(u=s[0],(c=s[s.length-1])<u&&(u=s[s.length-1],c=s[0]));var p=[];return a?i.map(function(t,e){return u<=e&&e<=c&&p.push(t),null}):(i.map(function(t,e){return c<=e&&e<i.length&&p.push(t),null}),i.map(function(t,e){return 0<=e&&e<=u&&h(t,p)&&p.push(t),null})),p},s=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a=null;try{a=L(r,i)}catch(t){var u=o(r,i),c=o(i,r),l=u[0],p=u[u.length-1],f=c[0],d=c[c.length-1];if(s(p,f)&&s(l,d)||s(p,d)&&s(l,f))u.map(function(t){return t}),c.map(function(t){return t});else if(s(p,f)&&!s(l,d)){var g=-1,y=-1;u.map(function(t,e){return s(t,d)&&(g=e),null}),c.map(function(t,e){return s(t,l)&&(y=e),null}),-1<y?u=u.slice(y,u.length):-1<g&&(c=c.slice(0,g+1))}else if(s(p,d)&&!s(l,f)){var _=-1,m=-1;u.map(function(t,e){return s(t,f)&&(m=e),null}),c.map(function(t,e){return s(t,l)&&(_=e),null}),-1<_?c=c.slice(_,c.length):-1<m&&(u=u.slice(m,u.length))}else{var v=-1,E=-1,I=-1,x=-1;u.map(function(t,e){return s(t,f)&&(I=e),s(t,d)&&(x=e),null}),c.map(function(t,e){return s(t,l)&&(v=e),s(t,p)&&(E=e),null}),-1<v&&-1<E?c=c.slice(Math.min(v,E),Math.max(v,E)+1):-1<I&&-1<x&&(u=u.slice(Math.min(I,x),Math.max(I,x)+1))}var b=[];if(u.map(function(t){return b.push(t),null}),s(p,f))c.map(function(t){return h(t,b)&&b.push(t),null});else if(s(p,d))for(var C=c.length-1;0<=C;C--)h(c[C],b)&&b.push(c[C]);else c.map(function(t){return h(t,b)&&b.push(t),null});h(l,b)&&b.push(l),a=M({type:S.geojsonTypes.FEATURE,properties:{},geometry:{type:S.geojsonTypes.LINE_STRING,coordinates:b}})}if(a){var w=this.newFeature({type:S.geojsonTypes.FEATURE,properties:a.properties,geometry:{type:S.geojsonTypes.POLYGON,coordinates:a.geometry.coordinates}});this.addFeature(w),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([w.id]),this.map.fire(S.events.REPLACE,{createdFeatures:[w.toGeoJSON()],deletedFeatures:[r,i]})}this.fireActionable()},p.onUnionLine=function(){var t=this.getSelected();if(2!==t.length)throw new Error("");for(var e=0;e<t.length;e++){if(t[e].type!==S.geojsonTypes.LINE_STRING)throw new Error("")}var n=t[0].coordinates[0],r=t[0].coordinates[t[0].coordinates.length-1],i=t[1].coordinates[0],o=t[1].coordinates[t[1].coordinates.length-1],s=[];if(y(n,i)){for(var a=t[0].coordinates.length-1;0<=a;a--)s.push(t[0].coordinates[a]);for(var u=0;u<t[1].coordinates.length;u++)s.push(t[1].coordinates[u])}else if(y(n,o)){for(var c=t[0].coordinates.length-1;0<=c;c--)s.push(t[0].coordinates[c]);for(var l=t[1].coordinates.length-1;0<=l;l--)s.push(t[1].coordinates[l])}else if(y(r,i)){for(var p=0;p<t[0].coordinates.length;p++)s.push(t[0].coordinates[p]);for(var h=0;h<t[1].coordinates.length;h++)s.push(t[1].coordinates[h])}else{if(!y(r,o))throw new Error("");for(var f=0;f<t[0].coordinates.length;f++)s.push(t[0].coordinates[f]);for(var d=t[1].coordinates.length-1;0<=d;d--)s.push(t[1].coordinates[d])}if(0<s.length){var g=this.newFeature({type:S.geojsonTypes.FEATURE,properties:t[0].properties,geometry:{type:S.geojsonTypes.LINE_STRING,coordinates:s}});this.addFeature(g),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([g.id]),this.map.fire(S.events.REPLACE,{createdFeatures:[g.toGeoJSON()],deletedFeatures:[t[0].toGeoJSON(),t[1].toGeoJSON()]})}this.fireActionable()},p.onCurveLine=function(){var t=this.getSelected();if(1!==t.length)throw new Error("");if(t[0].type!==S.geojsonTypes.LINE_STRING)throw new Error("");var e=a(t[0].toGeoJSON(),{resolution:5e3,sharpness:.85}),n=this.newFeature(r(e,{id:t[0].id}));this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.addFeature(n),this.setSelected([n.id]),this.map.fire(S.events.UPDATE,{action:S.updateActions.CHANGE_COORDINATES,prevFeatures:[t[0].toGeoJSON()],features:[n.toGeoJSON()]}),this.fireActionable()},p.onSplitLine=function(t){var e=this.getSelected();if(1!==e.length)throw new Error("");if(e[0].type!==S.geojsonTypes.LINE_STRING)throw new Error("");if(1!==this.getSelectedCoordinates().length)throw new Error("")},e.exports=p},{"../constants":69,"../edit/util/is_same_point":78,"../lib/common_selectors":101,"../lib/create_supplementary_points":104,"../lib/double_click_zoom":106,"../lib/mouse_event_point":115,"../lib/move_features":116,"../lib/string_set":118,"@turf/bezier-spline":13,"@turf/intersect":22,"@turf/line-intersect":26,"@turf/line-to-polygon":30,"@turf/polygon-to-line":33,"@turf/union":41,xtend:67}],147:[function(t,e,n){"use strict";var T=t("xtend"),r=t("../lib/common_selectors"),i=t("../lib/double_click_zoom"),L=t("../constants"),o=t("../lib/is_event_at_coordinates"),s=t("../lib/create_vertex"),O=t("@turf/polygon-to-line").default,M=t("@turf/line-to-polygon").default,P=t("@turf/line-intersect").default,A=t("@turf/nearest-point-on-line").default,a={onSetup:function(){var t=this.getSelected();if(0===t.length)throw new Error("");if(1<t.length)throw new Error("");var e=t[0];if(e.type!==L.geojsonTypes.POLYGON)throw new Error("");var n=e.id,r=this.newFeature({type:L.geojsonTypes.FEATURE,properties:{},geometry:{type:L.geojsonTypes.LINE_STRING,coordinates:[]}});return this.addFeature(r),this.setSelected([n]),i.disable(this),this.updateUIClasses({mouse:L.cursors.ADD}),this.setActionableState({trash:!0}),{line:r,selectedPolygon:e,selectedPolygonId:n,currentVertexPosition:0}},splitPolygon:function(t){var e=t.line.toGeoJSON(),n=t.selectedPolygon.toGeoJSON(),r=P(n,e);if(2!==r.features.length)throw this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(L.modes.SIMPLE_SELECT,{featureIds:[t.selectedPolygonId]}),new Error("");var i=O(n),o=A(e,r.features[0],{units:"miles"}),s=A(e,r.features[1],{units:"miles"}),a=A(i,r.features[0],{units:"miles"}),u=A(i,r.features[1],{units:"miles"});o.geometry.coordinates=r.features[0].geometry.coordinates,s.geometry.coordinates=r.features[1].geometry.coordinates,a.geometry.coordinates=r.features[0].geometry.coordinates,u.geometry.coordinates=r.features[1].geometry.coordinates;var c=i.geometry.coordinates,l=e.geometry.coordinates,p=[],h=[],f=function(t,e){if(0===e.length)return!0;var n=e[e.length-1];return t[0]!==n[0]||t[1]!==n[1]};if(p.push(a.geometry.coordinates),a.properties.index<=u.properties.index)for(var d=a.properties.index+1;d<u.properties.index+1;d++)f(c[d],p)&&p.push(c[d]);else for(var g=a.properties.index;g>u.properties.index;g--)f(c[g],p)&&p.push(c[g]);if(f(u.geometry.coordinates,p)&&p.push(u.geometry.coordinates),f(s.geometry.coordinates,p)&&p.push(s.geometry.coordinates),o.properties.index<=s.properties.index)for(var y=s.properties.index;y>o.properties.index;y--)f(l[y],p)&&p.push(l[y]);else for(var _=s.properties.index+1;_<o.properties.index+1;_++)f(l[_],p)&&p.push(l[_]);if(f(o.geometry.coordinates,p)&&p.push(o.geometry.coordinates),f(a.geometry.coordinates,p)&&p.push(a.geometry.coordinates),h.push(o.geometry.coordinates),o.properties.index<=s.properties.index)for(var m=o.properties.index+1;m<s.properties.index+1;m++)f(l[m],h)&&h.push(l[m]);else for(var v=o.properties.index;v>s.properties.index;v--)f(l[v],h)&&h.push(l[v]);if(f(s.geometry.coordinates,h)&&h.push(s.geometry.coordinates),f(u.geometry.coordinates,h)&&h.push(u.geometry.coordinates),a.properties.index<=u.properties.index){for(var E=u.properties.index+1;E<c.length;E++)f(c[E],h)&&h.push(c[E]);for(var I=0;I<a.properties.index+1;I++)f(c[I],h)&&h.push(c[I])}else{for(var x=u.properties.index;0<=x;x--)f(c[x],h)&&h.push(c[x]);for(var b=c.length-1;b>a.properties.index;b--)f(c[b],h)&&h.push(c[b])}f(a.geometry.coordinates,h)&&h.push(a.geometry.coordinates),f(o.geometry.coordinates,h)&&h.push(o.geometry.coordinates);var C=M({type:L.geojsonTypes.FEATURE,properties:{},geometry:{type:L.geojsonTypes.LINE_STRING,coordinates:p}}),w=M({type:L.geojsonTypes.FEATURE,properties:{},geometry:{type:L.geojsonTypes.LINE_STRING,coordinates:h}}),S=this.newFeature(T({geometry:C.geometry},{properties:t.selectedPolygon.properties})),N=this.newFeature(T({geometry:w.geometry},{properties:t.selectedPolygon.properties}));this.addFeature(S),this.addFeature(N),this.deleteFeature(t.selectedPolygon.id,{silent:!0}),this.deleteFeature([t.line.id],{silent:!0}),this.map.fire(L.events.REPLACE,{createdFeatures:[S.toGeoJSON(),N.toGeoJSON()],deletedFeatures:[t.selectedPolygon.toGeoJSON()]}),this.changeMode(L.modes.SIMPLE_SELECT,{featureIds:[S.id,N.id]})},clickAnywhere:function(t,e){0<t.currentVertexPosition&&o(e,t.line.coordinates[t.currentVertexPosition-1])?this.splitPolygon(t):(this.setSelected([t.selectedPolygonId]),this.updateUIClasses({mouse:L.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++)},clickOnVertex:function(t){this.splitPolygon(t)},onMouseMove:function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),this.updateUIClasses({mouse:L.cursors.ADD})}};a.onTap=a.onClick=function(t,e){return r.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},a.onKeyUp=function(t,e){r.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(L.modes.SIMPLE_SELECT)):r.isEnterKey(e)&&this.splitPolygon(t)},a.onStop=function(t){this.updateUIClasses({mouse:L.cursors.NONE}),i.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?this.splitPolygon(t):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(L.modes.SIMPLE_SELECT,{},{silent:!0})))},a.toDisplayFeatures=function(t,e,n){if(this.isSelected(e.properties.id)&&e.geometry.type===L.geojsonTypes.POLYGON)return e.properties.active=L.activeStates.ACTIVE,n(e);var r=e.properties.id===t.line.id;if(e.properties.active=r?L.activeStates.ACTIVE:L.activeStates.INACTIVE,!r)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=L.meta.FEATURE,3<=e.geometry.coordinates.length&&n(s(t.line.id,e.geometry.coordinates[e.geometry.coordinates.length-2],""+(e.geometry.coordinates.length-2),!1)),n(e))},a.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(L.modes.SIMPLE_SELECT)},e.exports=a},{"../constants":69,"../lib/common_selectors":101,"../lib/create_vertex":105,"../lib/double_click_zoom":106,"../lib/is_event_at_coordinates":111,"@turf/line-intersect":26,"@turf/line-to-polygon":30,"@turf/nearest-point-on-line":32,"@turf/polygon-to-line":33,xtend:67}],148:[function(t,e,n){"use strict";var r={onSetup:function(){return this.setActionableState(),{}},toDisplayFeatures:function(t,e,n){n(e)}};e.exports=r},{}],149:[function(t,e,n){"use strict";var r=t("xtend"),i=t("./constants"),o=t("./lib/change_style_theme"),s={defaultMode:i.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:t("./edit/theme"),userStyles:{},modes:t("./modes"),controls:{},userProperties:!0,showButtons:!0,drawEnabled:!0,adsorbEnabled:!1},a={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},u={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function c(t,e){return t.map(function(t){return t.source?t:r(t,{id:t.id+"."+e,source:"hot"===e?i.sources.HOT:i.sources.COLD})})}e.exports=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=r(t);return t.controls||(e.controls={}),!1===t.displayControlsDefault?e.controls=r(u,t.controls):e.controls=r(a,t.controls),e=r(s,e),t.userStyles&&(e.styles=o(t.userStyles,e.styles)),e.styles=c(e.styles,"cold").concat(c(e.styles,"hot")),e}},{"./constants":69,"./edit/theme":77,"./lib/change_style_theme":100,"./modes":142,xtend:67}],150:[function(t,e,n){"use strict";var c=t("./constants");e.exports=function(){var r=this;if(!(r.ctx.map&&void 0!==r.ctx.map.getSource(c.sources.HOT)))return u();var i=r.ctx.events.currentModeName();r.ctx.ui.queueMapClasses({mode:i});var n=[],t=[];r.isDirty?t=r.getAllIds():(n=r.getChangedIds().filter(function(t){return void 0!==r.get(t)}),t=r.sources.hot.filter(function(t){return t.properties.id&&-1===n.indexOf(t.properties.id)&&void 0!==r.get(t.properties.id)}).map(function(t){return t.properties.id})),r.sources.hot=[];var e=r.sources.cold.length;r.sources.cold=r.isDirty?[]:r.sources.cold.filter(function(t){var e=t.properties.id||t.properties.parent;return-1===n.indexOf(e)});var o=e!==r.sources.cold.length||0<t.length;function s(t,e){var n=r.get(t).internal(i);r.ctx.events.currentModeRender(n,function(t){r.sources[e].push(t)})}if(n.forEach(function(t){return s(t,"hot")}),t.forEach(function(t){return s(t,"cold")}),o&&r.ctx.map.getSource(c.sources.COLD).setData({type:c.geojsonTypes.FEATURE_COLLECTION,features:r.sources.cold}),r.ctx.map.getSource(c.sources.HOT).setData({type:c.geojsonTypes.FEATURE_COLLECTION,features:r.sources.hot}),r._emitSelectionChange&&(r.ctx.map.fire(c.events.SELECTION_CHANGE,{features:r.getSelected().map(function(t){return t.toGeoJSON()}),points:r.getSelectedCoordinates().map(function(t){return{type:c.geojsonTypes.FEATURE,properties:{},geometry:{type:c.geojsonTypes.POINT,coordinates:t.coordinates}}})}),r._emitSelectionChange=!1),r._deletedFeaturesToEmit.length){var a=r._deletedFeaturesToEmit.map(function(t){return t.toGeoJSON()});r._deletedFeaturesToEmit=[],r.ctx.map.fire(c.events.DELETE,{features:a})}function u(){r.isDirty=!1,r.clearChangedIds()}r.ctx.map.fire(c.events.RENDER,{}),u()}},{"./constants":69}],151:[function(t,e,n){"use strict";var s=t("./events"),a=t("./store"),u=t("./ui"),c=t("./constants");e.exports=function(r){var i=null,o={onRemove:function(){return o.removeLayers(),r.store.restoreMapConfig(),r.ui.removeButtons(),r.events.removeEventListeners(),r.map=null,r.container=null,r.store=null,i&&i.parentNode&&i.parentNode.removeChild(i),i=null,this},onAdd:function(e){r.map=e,r.events=s(r),r.ui=u(r),r.container=e.getContainer(),r.store=new a(r),i=r.ui.addButtons(),r.options.boxSelect&&(e.boxZoom.disable(),e.dragPan.disable(),e.dragPan.enable());var n=null,t=function t(){e.off("load",t),clearInterval(n),o.addLayers(),r.store.storeMapConfig(),r.events.addEventListeners()};return e.loaded()?t():(e.on("load",t),n=setInterval(function(){e.loaded()&&t()},16)),r.events.start(),i},addLayers:function(){r.map.addSource(c.sources.COLD,{data:{type:c.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),r.map.addSource(c.sources.HOT,{data:{type:c.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),r.options.styles.forEach(function(t){r.map.addLayer(t)}),r.store.render()},removeLayers:function(){r.options.styles.forEach(function(t){r.map.removeLayer(t.id)}),r.map.removeSource(c.sources.COLD),r.map.removeSource(c.sources.HOT)}};return r.setup=o}},{"./constants":69,"./events":79,"./store":152,"./ui":153}],152:[function(t,e,n){"use strict";var r=t("./lib/throttle"),i=t("./lib/to_dense_array"),o=t("./lib/string_set"),s=t("./render"),a=t("./constants").interactions,u=e.exports=function(t){this._features={},this._featureIds=new o,this._selectedFeatureIds=new o,this._selectedCoordinates=[],this._changedFeatureIds=new o,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=r(s,16,this),this.isDirty=!1};function c(t){var e=this,n=this._selectedCoordinates.filter(function(t){return e._selectedFeatureIds.has(t.feature_id)});this._selectedCoordinates.length===n.length||t.silent||(this._emitSelectionChange=!0),this._selectedCoordinates=n}u.prototype.createRenderBatch=function(){var t=this,e=this.render,n=0;return this.render=function(){n++},function(){t.render=e,0<n&&t.render()}},u.prototype.setDirty=function(){return this.isDirty=!0,this},u.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},u.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},u.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},u.prototype.getAllIds=function(){return this._featureIds.values()},u.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},u.prototype.delete=function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return i(t).forEach(function(t){e._featureIds.has(t)&&(e._featureIds.delete(t),e._selectedFeatureIds.delete(t),n.silent||-1===e._deletedFeaturesToEmit.indexOf(e._features[t])&&e._deletedFeaturesToEmit.push(e._features[t]),delete e._features[t],e.isDirty=!0)}),c.call(this,n),this},u.prototype.get=function(t){return this._features[t]},u.prototype.getAll=function(){var e=this;return Object.keys(this._features).map(function(t){return e._features[t]})},u.prototype.select=function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return i(t).forEach(function(t){e._selectedFeatureIds.has(t)||(e._selectedFeatureIds.add(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0))}),this},u.prototype.deselect=function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return i(t).forEach(function(t){e._selectedFeatureIds.has(t)&&(e._selectedFeatureIds.delete(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0))}),c.call(this,n),this},u.prototype.clearSelected=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},u.prototype.setSelected=function(e){var n=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e=i(e),this.deselect(this._selectedFeatureIds.values().filter(function(t){return-1===e.indexOf(t)}),{silent:t.silent}),this.select(e.filter(function(t){return!n._selectedFeatureIds.has(t)}),{silent:t.silent}),this},u.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},u.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},u.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},u.prototype.getSelected=function(){var e=this;return this._selectedFeatureIds.values().map(function(t){return e.get(t)})},u.prototype.getSelectedCoordinates=function(){var e=this;return this._selectedCoordinates.map(function(t){return{coordinates:e.get(t.feature_id).getCoordinate(t.coord_path)}})},u.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},u.prototype.setFeatureProperty=function(t,e,n){this.get(t).setProperty(e,n),this.featureChanged(t)},u.prototype.storeMapConfig=function(){var e=this;a.forEach(function(t){e.ctx.map[t]&&(e._mapInitialConfig[t]=e.ctx.map[t].isEnabled())})},u.prototype.restoreMapConfig=function(){var e=this;Object.keys(this._mapInitialConfig).forEach(function(t){e._mapInitialConfig[t]?e.ctx.map[t].enable():e.ctx.map[t].disable()})},u.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]}},{"./constants":69,"./lib/string_set":118,"./lib/throttle":120,"./lib/to_dense_array":121,"./render":150}],153:[function(t,e,n){"use strict";var l=t("xtend"),p=t("./constants"),h=["mode","feature","mouse"];e.exports=function(r){var n={},i=null,o={mode:null,feature:null,mouse:null},s={mode:null,feature:null,mouse:null};function a(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=document.createElement("button");return t.className=p.classes.CONTROL_BUTTON+" "+n.className,t.setAttribute("title",n.title),n.container.appendChild(t),t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.target!==i?(c(e),n.onActivate()):u()},!0),t}function u(){i&&(i.classList.remove(p.classes.ACTIVE_BUTTON),i=null)}function c(t){u();var e=n[t];e&&e&&"trash"!==t&&(e.classList.add(p.classes.ACTIVE_BUTTON),i=e)}return{setActiveButton:c,queueMapClasses:function(t){s=l(s,t)},updateMapClasses:function(){if(r.container){var e=[],n=[];h.forEach(function(t){s[t]!==o[t]&&(e.push(t+"-"+o[t]),null!==s[t]&&n.push(t+"-"+s[t]))}),0<e.length&&r.container.classList.remove.apply(r.container.classList,e),0<n.length&&r.container.classList.add.apply(r.container.classList,n),o=l(o,s)}},addButtons:function(){var t=r.options.controls,e=document.createElement("div");return r.options.showButtons||(e.style.visibility="hidden"),e.className=p.classes.CONTROL_GROUP+" "+p.classes.CONTROL_BASE,t&&(t[p.types.LINE]&&(n[p.types.LINE]=a(p.types.LINE,{container:e,className:p.classes.CONTROL_BUTTON_LINE,title:"LineString tool "+(r.options.keybindings?"(l)":""),onActivate:function(){return r.events.changeMode(p.modes.DRAW_LINE_STRING)}})),t[p.types.POLYGON]&&(n[p.types.POLYGON]=a(p.types.POLYGON,{container:e,className:p.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(r.options.keybindings?"(p)":""),onActivate:function(){return r.events.changeMode(p.modes.DRAW_POLYGON)}})),t[p.types.POINT]&&(n[p.types.POINT]=a(p.types.POINT,{container:e,className:p.classes.CONTROL_BUTTON_POINT,title:"Marker tool "+(r.options.keybindings?"(m)":""),onActivate:function(){return r.events.changeMode(p.modes.DRAW_POINT)}})),t.trash&&(n.trash=a("trash",{container:e,className:p.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){r.events.trash()}})),t.combine_features&&(n.combine_features=a("combineFeatures",{container:e,className:p.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){r.events.combineFeatures()}})),t.uncombine_features&&(n.uncombine_features=a("uncombineFeatures",{container:e,className:p.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){r.events.uncombineFeatures()}}))),e},removeButtons:function(){Object.keys(n).forEach(function(t){var e=n[t];e.parentNode&&e.parentNode.removeChild(e),delete n[t]})}}}},{"./constants":69,xtend:67}]},{},[76])(76)});
